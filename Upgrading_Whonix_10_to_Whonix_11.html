<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Upgrading Whonix 10 to Whonix 11 - Whonix
 url: ./Upgrading_Whonix_10_to_Whonix_11
 date: Thu Dec 20 08:15:30 2018
-->
<head>
<meta charset="utf-8"/>
<title>Upgrading Whonix 10 to Whonix 11 - Whonix</title>
<link rel="stylesheet" type="text/css" href="style.css">




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.31.1" name="generator"/>
<meta content="" name="google-site-verification"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="image"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="twitter:image:src"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@Whonix" name="twitter:site"/>
<meta content="Whonix" name="twitter:domain"/>
<meta content="@Whonix" name="twitter:creator"/>
<meta content="How to Upgrade from Whonix 10.x to Whonix 11.x" name="description"/>
<meta content="How to Upgrade from Whonix 10.x to Whonix 11.x" name="twitter:description"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/favicon.ico" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOPj4wC5q6j/xba0/8W2tP+3qab/4+PiBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+6rKr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8CohP/VnhL/1Z4S/8CohP/Ku7n/yru5/7mrqf8AAAAAAAAAAAAAAAAAAAAAAAAAAI6Mi//Ku7n/yru5/8GRHP/iqhL/////////////////wJEd/8q7uf/Ku7n/xsXE/wAAAAAAAAAAAAAAAAAAAAC5q6n/yru5/8q7uf/hqRH//////0bcy/9G3Mv//////+GpEf/Ku7n/yru5/7qsqv8AAAAAAAAAAAAAAAAAAAAAxLW0/8q7uf/Ku7n/4qoS/////////////////0bcy//iqhL/yru5/8q7uf/Gt7T/AAAAAAAAAAAAAAAAAAAAAMKzsP/Ku7n/yru5/96lFf//////RtzL/0bcy///////3qUV/8q7uf/Ku7n/wrWy/wAAAAAAAAAAAAAAAAAAAACvo6D/yru5/8q7uf/Ku7n/4akQ//fnvP/57tD/4akQ/8q7uf/Ku7n/yru5/7Gkov8AAAAAAAAAAAAAAAAAAAAAAAAAAMq7uf/Ku7n/yru5/8q7uf/hqRD/4akQ/8q7uf/Ku7n/yru5/8q7uf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACOjIv/yru5/8q7uf/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+Mioj/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAISDgf/Iurj/yru5/8q7uf/Ku7n/yru5/8i5uP+EgoH/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6rKr/q56c/wAAAACOjIv/joyL/wAAAACom5r/taim/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuqyp/66hnv8AAAAAAAAAAAAAAAAAAAAAqp2b/7SnpP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKmcm/+9r6z/AAAAAAAAAAAAAAAAAAAAALmrqf+jl5b/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwLOw/6uenP8AAAAAAAAAAKqenP+/sq//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACtoJ7/vK2r/72vrP+sn57/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/D8AAPAPAADgBwAAwAMAAMADAADAAwAAwAMAAMADAADgBwAA4AcAAPAPAADyTwAA888AAPPPAAD5nwAA/D8AAA==" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="article" property="og:type"/>
<meta content="Whonix" property="og:site_name"/>
<meta content="Upgrading Whonix 10 to Whonix 11" property="og:title"/>
<meta content="./Upgrading_Whonix_10_to_Whonix_11" property="og:url"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" property="og:image"/>
<meta content="How to Upgrade from Whonix 10.x to Whonix 11.x" property="og:description"/>

<meta content="" property="fb:app_id"/>
<meta content="" property="fb:admins"/>
<meta content="https://www.facebook.com/Whonix" property="article:author"/>
<meta content="https://www.facebook.com/Whonix" property="article:publisher"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Upgrading_Whonix_10_to_Whonix_11 rootpage-Upgrading_Whonix_10_to_Whonix_11 skin-foreground action-view"><div id="navwrapper"><!-- START FOREGROUNDTEMPLATE -->

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<!-- Output page indicators -->
<div class="mw-indicators mw-body-content">
</div>
<!-- If user is logged in output echo location -->
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><div class="mw-parser-output"><p><style type="text/css">

#banner {
 position: relative;
 overflow: hidden;
 margin-bottom: 0.5em !important;
 margin-top: 0.5em !important;
 background-color:#D03232;
 border: solid 1px #aaaaaa; 
 height:66px;
}

#banner a.cn-full-banner-click {
 display:block;
 height:100%;
 width:100%;
 cursor: pointer;
}


#banner-logo {
 position: absolute;
 top: 8px;
 left: 15px;
 background-image: url(data:image/png;base64,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);
 height: 50px;
 width: 100%;
 background-repeat: no-repeat;
}

#banner #black-text {
 font-size: 1.1em;
 color: white;
 padding: 0.5em 40px 0.4em 60px;
 line-height: 1.3em;
 text-align: center;
}
</style>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Payments" href="./Payments.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Whonix requires money to stay alive.
     </div>
</a>
</div>
</div></div></div> </div>
</div>
<div id="mw-js-message" style="display:none;"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up"> Actions</span></i></a>
<!--RTL -->
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="/wiki/Upgrading_Whonix_10_to_Whonix_11" href="./Upgrading_Whonix_10_to_Whonix_11.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=history" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<!--RTL -->
<div id="content">
<h1 class="title" id="firstHeading">Upgrading Whonix 10 to Whonix 11</h1>
<h5 class="subtitle" id="siteSub"></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output">
<div class="toc" id="toc"><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Before_you_start"><span class="tocnumber">1</span> <span class="toctext">Before you start</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#If_you_want_to_upgrade_Whonix-Gateway_as_well_as_Whonix-Workstation"><span class="tocnumber">1.1</span> <span class="toctext">If you want to upgrade Whonix-Gateway as well as Whonix-Workstation</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#If_you_only_want_to_upgrade_Whonix-Workstation"><span class="tocnumber">1.2</span> <span class="toctext">If you only want to upgrade Whonix-Workstation</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Non-Critical_Errors_.2F_Warnings"><span class="tocnumber">1.3</span> <span class="toctext">Non-Critical Errors / Warnings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Sanity_Tests"><span class="tocnumber">2</span> <span class="toctext">Sanity Tests</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Known_Issues"><span class="tocnumber">3</span> <span class="toctext">Known Issues</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#General"><span class="tocnumber">3.1</span> <span class="toctext">General</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Qubes_specific"><span class="tocnumber">3.2</span> <span class="toctext">Qubes specific</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#apt-get_not_linked_warning"><span class="tocnumber">3.2.1</span> <span class="toctext">apt-get not linked warning</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#warning:_setlocale:_LC_ALL:"><span class="tocnumber">3.2.2</span> <span class="toctext">warning: setlocale: LC_ALL:</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Configuring_iptables-persistent_dialog"><span class="tocnumber">3.2.3</span> <span class="toctext">Configuring iptables-persistent dialog</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Configuring_base-passwd"><span class="tocnumber">3.2.4</span> <span class="toctext">Configuring base-passwd</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#dependency_problems.2C_but_removing_anyway_as_you_requested"><span class="tocnumber">3.2.5</span> <span class="toctext">dependency problems, but removing anyway as you requested</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fnetwork.2Finterfaces.whonix"><span class="tocnumber">3.2.6</span> <span class="toctext">interactive dpkg conflict resolution dialog /etc/network/interfaces.whonix</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fxdg.2Fautostart.2Fnm-applet.desktop"><span class="tocnumber">3.2.7</span> <span class="toctext">interactive dpkg conflict resolution dialog /etc/xdg/autostart/nm-applet.desktop</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fpulse.2Fclient.conf"><span class="tocnumber">3.2.8</span> <span class="toctext">interactive dpkg conflict resolution dialog /etc/pulse/client.conf</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#purge_unneeded_packages"><span class="tocnumber">3.2.9</span> <span class="toctext">purge unneeded packages</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#connect:_Connection_refused"><span class="tocnumber">3.2.10</span> <span class="toctext">connect: Connection refused</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#whonix-ws_whonixcheck_TemplateVM_error"><span class="tocnumber">3.2.11</span> <span class="toctext">whonix-ws whonixcheck TemplateVM error</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Other_Qubes_specific_Issues"><span class="tocnumber">3.2.12</span> <span class="toctext">Other Qubes specific Issues</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Other_Unlisted"><span class="tocnumber">3.3</span> <span class="toctext">Other Unlisted</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Qubes_Pre_Fixup"><span class="tocnumber">4</span> <span class="toctext">Qubes Pre Fixup</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Upgrading"><span class="tocnumber">5</span> <span class="toctext">Upgrading</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Grub_Fix"><span class="tocnumber">6</span> <span class="toctext">Grub Fix</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Qubes_Cleanup"><span class="tocnumber">7</span> <span class="toctext">Qubes Cleanup</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Qubes-Whonix-Gateway_purge_unneeded_packages"><span class="tocnumber">7.1</span> <span class="toctext">Qubes-Whonix-Gateway purge unneeded packages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#Footnotes"><span class="tocnumber">8</span> <span class="toctext">Footnotes</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="Before_you_start">Before you start</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=1.html" title="Edit section: Before you start">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="If_you_want_to_upgrade_Whonix-Gateway_as_well_as_Whonix-Workstation">If you want to upgrade Whonix-Gateway as well as Whonix-Workstation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=2.html" title="Edit section: If you want to upgrade Whonix-Gateway as well as Whonix-Workstation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Backup your data. (Ideally have a copy of your VM, so you can try again.) <br/>
2. Consider running the optional <a href="#Sanity_Tests">#Sanity Tests</a>. <br/>
3. Upgrade Whonix-Workstation. <br/>
4. Power off Whonix-Workstation. <br/>
5. Upgrade Whonix-Gatway. <br/>
6. Restart Whonix-Gateway. <br/>
7. Restart Whonix-Workstation <br/>
</p>
<h2><span class="mw-headline" id="If_you_only_want_to_upgrade_Whonix-Workstation">If you only want to upgrade Whonix-Workstation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=3.html" title="Edit section: If you only want to upgrade Whonix-Workstation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Backup your data. (Ideally have a copy of your VM, so you can try again.) <br/>
2. Consider running the optional <a href="#Sanity_Tests">#Sanity Tests</a>. <br/>
3. Upgrade Whonix-Workstation. <br/>
4. Power off Whonix-Workstation. <br/>
5. <a data-href="/wiki/Download" href="./Download.html" title="Download">Get</a> Whonix-Gateway. <br/>
6. Start Whonix-Gateway. <br/>
7. Start Whonix-Workstation <br/>
</p><p>You can ignore the following errors.
</p>
<h2><span id="Non-Critical_Errors_/_Warnings"></span><span class="mw-headline" id="Non-Critical_Errors_.2F_Warnings">Non-Critical Errors / Warnings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=4.html" title="Edit section: Non-Critical Errors / Warnings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>[Jun 09 15:39:42] WARNING torsocks[18737]
</pre>
<p>Other warnings / errors should be reported.
</p>
<h1><span class="mw-headline" id="Sanity_Tests">Sanity Tests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=5.html" title="Edit section: Sanity Tests">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<pre>sudo dpkg --audit ; echo $?
</pre>
<p>Expected output.
</p>
<pre>0
</pre>
<pre>sudo dpkg --configure -a ; echo $?
</pre>
<p>Expected output:
</p>
<pre>0
</pre>
<p><a data-href="/wiki/Security_Guide#Updates" href="./Security_Guide.html" title="Security Guide">Get package upgrades.</a>
</p>
<pre>sudo apt-get update
</pre>
<pre>sudo apt-get dist-upgrade
</pre>
<p>Test wise install python-qt4.
</p>
<pre>sudo apt-get install python-qt4 ; echo $?
</pre>
<pre>## ... successful installation of python-qt4 ...
0
</pre>
<h1><span class="mw-headline" id="Known_Issues">Known Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=6.html" title="Edit section: Known Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="General">General</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=7.html" title="Edit section: General">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Upgrade of the whonix-gw-desktop-shortcuts, whonix-ww-desktop-shortcuts could take a while. <sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup> The output "sudo: unable to resolve host host" is expected. No big issue. Just annoying time sunk. Will be fixed after upgrade.
</p>
<h2><span class="mw-headline" id="Qubes_specific">Qubes specific</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=8.html" title="Edit section: Qubes specific">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<h3><span class="mw-headline" id="apt-get_not_linked_warning">apt-get not linked warning</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=9.html" title="Edit section: apt-get not linked warning">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>*** OMINOUS WARNING ***: /usr/bin/apt-get is not linked to either apt-get.anondist or apt-get.anondist-orig
</pre>
<p>Can be ignored. (Something we ought to fix for Whonix 12.)
</p>
<h3><span class="mw-headline" id="warning:_setlocale:_LC_ALL:">warning: setlocale: LC_ALL:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=10" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=10.html" title="Edit section: warning: setlocale: LC ALL:">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<pre>/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
</pre>
<p>TODO
</p>
<h3><span class="mw-headline" id="Configuring_iptables-persistent_dialog">Configuring iptables-persistent dialog</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=11" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=11.html" title="Edit section: Configuring iptables-persistent dialog">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific. (<a class="external text" data-href="https://github.com/QubesOS/qubes-core-agent-linux/pull/2" href="https://github.com/QubesOS/qubes-core-agent-linux/pull/2" rel="noreferrer noopener" target="_blank">ticket</a>)
</p>
<pre>Package configuration                                                                                                 
 ┌───────────────────────────────────────┤ Configuring iptables-persistent ├───────────────────────────────────────┐  
 │                                                                                                                 │  
 │ Current iptables rules can be saved to the configuration file /etc/iptables/rules.v4. These rules will then be  │  
 │ loaded automatically during system startup.                                                                     │  
 │                                                                                                                 │  
 │ Rules are only saved automatically during package installation. See the manual page of iptables-save(8) for     │  
 │ instructions on keeping the rules file up-to-date.                                                              │  
 │                                                                                                                 │  
 │ Save current IPv4 rules?                                                                                        │  
 │                                                                                                                 │  
 │                                 &lt;Yes&gt;                                    &lt;No&gt;                                   │  
 │                                                                                                                 │  
 └─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘  
</pre>
<p>Say no. (Just keep the default=N. Just press enter.)
</p>
<h3><span class="mw-headline" id="Configuring_base-passwd">Configuring base-passwd</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=12" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=12.html" title="Edit section: Configuring base-passwd">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Qubes specific.
</p>
<pre>Package configuration                                                                                                 
 ┌───────────────────────────────────────────┤ Configuring base-passwd ├───────────────────────────────────────────┐  
 │                                                                                                                 │  
 │ update-passwd has found a difference between your system accounts and the current Debian defaults.  It is       │  
 │ advisable to allow update-passwd to change your system; without those changes some packages might not work      │  
 │ correctly.  For more documentation on the Debian account policies, please see                                   │  
 │ /usr/share/doc/base-passwd/README.                                                                              │  
 │                                                                                                                 │  
 │ The proposed change is:                                                                                         │  
 │                                                                                                                 │  
 │ Remove group "qubes" (98)                                                                                       │  
 │                                                                                                                 │  
 │ If you allow this change, a backup of modified files will be made with the extension .org, which you can use    │  
 │ if necessary to restore the current settings.  If you do not make this change now, you can make it later with   │  
 │ the update-passwd utility.                                                                                      │  
 │                                                                                                                 │  
 │ Do you want to remove the group qubes?                                                                          │  
 │                                                                                                                 │  
 │                                 &lt;Yes&gt;                                    &lt;No&gt;                                   │  
 │                                                                                                                 │  
 └─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</pre>
<p>Say no. <sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup>
</p>
<h3><span id="dependency_problems,_but_removing_anyway_as_you_requested"></span><span class="mw-headline" id="dependency_problems.2C_but_removing_anyway_as_you_requested">dependency problems, but removing anyway as you requested</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=13" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=13.html" title="Edit section: dependency problems, but removing anyway as you requested">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<pre>dpkg: gcc-4.7-base:amd64: dependency problems, but removing anyway as you requested:
 libstdc++6:amd64 depends on gcc-4.7-base (= 4.7.2-5).
 libgfortran3:amd64 depends on gcc-4.7-base (= 4.7.2-5).
 libgcc1:amd64 depends on gcc-4.7-base (= 4.7.2-5).
 gcc-4.7 depends on gcc-4.7-base (= 4.7.2-5).
 libquadmath0:amd64 depends on gcc-4.7-base (= 4.7.2-5).
 g++-4.7 depends on gcc-4.7-base (= 4.7.2-5).
 cpp-4.7 depends on gcc-4.7-base (= 4.7.2-5).
 libstdc++6-4.7-dev depends on gcc-4.7-base (= 4.7.2-5).
</pre>
<p>Can be ignored.
</p>
<h3><span id="interactive_dpkg_conflict_resolution_dialog_/etc/network/interfaces.whonix"></span><span class="mw-headline" id="interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fnetwork.2Finterfaces.whonix">interactive dpkg conflict resolution dialog /etc/network/interfaces.whonix</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=14" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=14.html" title="Edit section: interactive dpkg conflict resolution dialog /etc/network/interfaces.whonix">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<pre>Configuration file '/etc/network/interfaces.whonix'
 ==&gt; Modified (by you or by a script) since installation.
 ==&gt; Package distributor has shipped an updated version.
   What would you like to do about it ?  Your options are:
    Y or I  : install the package maintainer's version
    N or O  : keep your currently-installed version
      D     : show the differences between the versions
      Z     : start a shell to examine the situation
 The default action is to keep your current version.
*** interfaces.whonix (Y/I/N/O/D/Z) [default=N] ? 
</pre>
<p>Say no. (Just keep the default=N. Just press enter.)
</p>
<h3><span id="interactive_dpkg_conflict_resolution_dialog_/etc/xdg/autostart/nm-applet.desktop"></span><span class="mw-headline" id="interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fxdg.2Fautostart.2Fnm-applet.desktop">interactive dpkg conflict resolution dialog /etc/xdg/autostart/nm-applet.desktop</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=15" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=15.html" title="Edit section: interactive dpkg conflict resolution dialog /etc/xdg/autostart/nm-applet.desktop">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<pre>Configuration file '/etc/xdg/autostart/nm-applet.desktop'
 ==&gt; Modified (by you or by a script) since installation.
 ==&gt; Package distributor has shipped an updated version.
   What would you like to do about it ?  Your options are:
    Y or I  : install the package maintainer's version
    N or O  : keep your currently-installed version
      D     : show the differences between the versions
      Z     : start a shell to examine the situation
 The default action is to keep your current version.
*** nm-applet.desktop (Y/I/N/O/D/Z) [default=N] ? 
</pre>
<p>Say yes. Press Y followed by enter. Would not be a big problem if you said no also. <sup class="reference" id="cite_ref-3"><a href="#cite_note-3">[3]</a></sup>
</p>
<h3><span id="interactive_dpkg_conflict_resolution_dialog_/etc/pulse/client.conf"></span><span class="mw-headline" id="interactive_dpkg_conflict_resolution_dialog_.2Fetc.2Fpulse.2Fclient.conf">interactive dpkg conflict resolution dialog /etc/pulse/client.conf</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=16" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=16.html" title="Edit section: interactive dpkg conflict resolution dialog /etc/pulse/client.conf">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> specific.
</p>
<pre>Configuration file '/etc/pulse/client.conf'
 ==&gt; Modified (by you or by a script) since installation.
 ==&gt; Package distributor has shipped an updated version.
   What would you like to do about it ?  Your options are:
    Y or I  : install the package maintainer's version
    N or O  : keep your currently-installed version
      D     : show the differences between the versions
      Z     : start a shell to examine the situation
 The default action is to keep your current version.
*** client.conf (Y/I/N/O/D/Z) [default=N] ?
</pre>
<p>Say yes. Press Y followed by enter. Would not be a big problem if you said no also.
</p>
<h3><span class="mw-headline" id="purge_unneeded_packages">purge unneeded packages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=17" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=17.html" title="Edit section: purge unneeded packages">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>When running.
</p>
<pre>sudo apt-get purge db5.1-util grub-common grub-pc grub-pc-bin grub2-common
</pre>
<p>You'll get the following dialog.
</p>
<pre>Package configuration
                                                 ┌────────────────────────────┤ Configuring grub-pc ├─────────────────────────────┐
                                                 │                                                                                │
                                                 │ Do you want to have all GRUB 2 files removed from /boot/grub?                  │
                                                 │                                                                                │
                                                 │ This will make the system unbootable unless another boot loader is installed.  │
                                                 │                                                                                │
                                                 │ Remove GRUB 2 from /boot/grub?                                                 │
                                                 │                                                                                │
                                                 │                      &lt;Yes&gt;                         &lt;No&gt;                        │
                                                 │                                                                                │
                                                 └────────────────────────────────────────────────────────────────────────────────┘
</pre>
<p>In Qubes (!!!), it is safe to say yes.
</p>
<h3><span class="mw-headline" id="connect:_Connection_refused">connect: Connection refused</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=18" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=18.html" title="Edit section: connect: Connection refused">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Can be ignored.
</p>
<pre>connect: Connection refused
</pre>
<h3><span class="mw-headline" id="whonix-ws_whonixcheck_TemplateVM_error">whonix-ws whonixcheck TemplateVM error</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=19" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=19.html" title="Edit section: whonix-ws whonixcheck TemplateVM error">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>whonixcheck automatically starts in whonix-ws TemplateVM and shows an error. Ignore it.
</p>
<h3><span class="mw-headline" id="Other_Qubes_specific_Issues">Other Qubes specific Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=20" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=20.html" title="Edit section: Other Qubes specific Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>See ticket:<br/>
<a class="external free" data-href="https://phabricator.whonix.org/T380" href="https://phabricator.whonix.org/T380" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T380</a>
</p>
<h2><span class="mw-headline" id="Other_Unlisted">Other Unlisted</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=21" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=21.html" title="Edit section: Other Unlisted">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Please post any issues in <a class="external text" data-href="https://www.whonix.org/old-forum/index.php/board,1.0.html" href="https://www.whonix.org/old-forum/index.php/board,1.0.html" rel="noreferrer noopener" target="_blank">Whonix support forums</a>.
</p>
<h1><span class="mw-headline" id="Qubes_Pre_Fixup">Qubes Pre Fixup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=22" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=22.html" title="Edit section: Qubes Pre Fixup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Only required for <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> users. Other users must skip this.
</p><p>Delete firewall.png. <sup class="reference" id="cite_ref-4"><a href="#cite_note-4">[4]</a></sup>
</p>
<pre>sudo rm /usr/share/icons/anon-icon-pack/firewall.png
</pre>
<p>Stop qubes-qrexec-agent. <sup class="reference" id="cite_ref-5"><a href="#cite_note-5">[5]</a></sup> Testing.
</p>
<pre>sudo systemctl stop qubes-qrexec-agent
</pre>
<div class="toccolours mw-collapsible mw-collapsed">
<p>Ignore the expand button on the right side.
</p>
<div class="mw-collapsible-content">
<p>Upgrade <i><span style="background-color:#FBFBFB">qubes-core-agent</span></i> to at least <i><span style="background-color:#FBFBFB">3.0.15-1+deb8u1</span></i> and <i><span style="background-color:#FBFBFB">qubes-gui-agent</span></i> to at least <i><span style="background-color:#FBFBFB">3.0.9+deb8u1</span></i>. Otherwise you'll run into grave issues. <sup class="reference" id="cite_ref-qubes-grave-issues_6-0"><a href="#cite_note-qubes-grave-issues-6">[6]</a></sup> This is currently only possible from Qubes' <i><span style="background-color:#FBFBFB">wheezy-testing</span></i> repository. To do that, open <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/qubes-r3.list</span></i> with root rights. For example.
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/qubes-r3.list</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/apt/sources.list.d/qubes-r3.list</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/apt/sources.list.d/qubes-r3.list</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/apt/sources.list.d/qubes-r3.list</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/apt/sources.list.d/qubes-r3.list</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/apt/sources.list.d/qubes-r3.list</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/apt/sources.list.d/qubes-r3.list</textarea>
</div>
</div>
</div>
<p>Comment in the following line by removing the <i><span style="background-color:#FBFBFB">#</span></i> in front of it.
</p>
<pre>deb [arch=amd64] http://deb.qubes-os.org/r3.0/vm wheezy-testing main
</pre>
<p>Close and save.
</p>
<pre>sudo apt-get update
</pre>
<pre>sudo apt-get dist-upgrade
</pre>
<p>You'll see something like the following. Then it will hang.
</p>
<pre>Setting up qubes-core-agent (3.0.15-1+deb7u1) ...

Configuration file `/etc/apt/sources.list.d/qubes-r3.list'
 ==&gt; Modified (by you or by a script) since installation.
 ==&gt; Package distributor has shipped an updated version.
   What would you like to do about it ?  Your options are:
    Y or I  : install the package maintainer's version
    N or O  : keep your currently-installed version
      D     : show the differences between the versions
      Z     : start a shell to examine the situation
 The default action is to keep your current version.
*** qubes-r3.list (Y/I/N/O/D/Z) [default=N] ? 
Installing new version of config file /etc/xen/scripts/vif-route-qubes ...
Leaving 'diversion of /etc/init/plymouth-shutdown.conf to /etc/init/plymouth-shutdown.conf.qubes-disabled by qubes-core-agent'
Leaving 'diversion of /etc/init/prefdm.conf to /etc/init/prefdm.conf.qubes-disabled by qubes-core-agent'
Leaving 'diversion of /etc/init/splash-manager.conf to /etc/init/splash-manager.conf.qubes-disabled by qubes-core-agent'
Leaving 'diversion of /etc/init/start-ttys.conf to /etc/init/start-ttys.conf.qubes-disabled by qubes-core-agent'
Leaving 'diversion of /etc/init/tty.conf to /etc/init/tty.conf.qubes-disabled by qubes-core-agent'
Leaving 'diversion of /etc/init/serial.conf to /etc/init/serial.conf.qubes-orig by qubes-core-agent'
</pre>
<p>This is an expected, known qrexec bug<sup class="reference" id="cite_ref-7"><a href="#cite_note-7">[7]</a></sup> that was fixed in the version you are installing. Wait a two minutes. Then open a second konsole (or konsole tab) and run.
</p>
<pre>sudo killall qubes-trigger-sync-appmenus.sh
</pre>
<p>To make sure all upgrades were applied besides the one hanging command, run again.
</p>
<pre>sudo apt-get dist-upgrade
</pre>
<p>Turn off the VM and start it again so the new qrexec will be used.
</p>
<pre>sudo poweroff
</pre>
<p>Then proceed.
</p>
</div>
</div>
<h1><span class="mw-headline" id="Upgrading">Upgrading</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=23" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=23.html" title="Edit section: Upgrading">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><b><a data-href="/wiki/Download" href="./Download.html" title="Download">Downloading</a> a new Whonix-Gateway / Whonix-Workstation will be probably easier than applying the following instructions for upgrading.</b>
</p><p>Backups are important as noted in above chapter <a href="#Before_you_start">#Before you start</a>. Especially for <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> users. <sup class="reference" id="cite_ref-8"><a href="#cite_note-8">[8]</a></sup>
</p><p>Consider doing the <a href="#Sanity_Tests">#Sanity Tests</a> described above. They'll check if your system is affected by obvious grave issues, that you must fix before attempting to upgrade. If your package manager is broken, for example because you mixed packages from Debian stable with packages from Debian testing, then the upgrade may fail in the middle leaving your system in a difficult to resolve situation.
</p><p>Consider keeping the full terminal (Konsole) log. Even if everything apparently worked, there might be issues after reboot. In case of a bug report in the forums you would be asked to share the upgrading log so the issue can be investigated.
</p><p>Make sure you read <a href="#Known_Issues">#Known Issues</a> above.
</p><p>Become root.
</p>
<pre>sudo su
</pre>
<p>Do a usual <a data-href="/wiki/Security_Guide#Updates" href="./Security_Guide.html" title="Security Guide">upgrade</a> of your system's packages from Debian.
</p><p>For <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> users, before you proceed, it is strongly recommended that you apply the above <a href="#Qubes_Pre_Fixup">#Qubes Pre Fixup</a>.
</p><p>Enable Whonix's <i><span style="background-color:#FBFBFB">jessie</span></i> repository. Don't use the <i><span style="background-color:#FBFBFB">testers</span></i> repository just yet. [Wait for new information.]
</p>
<pre>whonix_repository --enable --codename jessie
</pre>
<p>Now we have to edit a few apt sources. The following three <i><span style="background-color:#FBFBFB">sed</span></i> commands will do that for you. (But if you cannot or are not comfortable with using copy and paste, and you know what you are doing, you could also manually open an editor and make the described changes.)
</p><p>Switch Debian sources from <i><span style="background-color:#FBFBFB">wheezy</span></i> to <i><span style="background-color:#FBFBFB">jessie</span></i> in <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/debian.list</span></i>.
</p>
<pre>sed -i "s/wheezy/jessie/g" /etc/apt/sources.list.d/debian.list
</pre>
<p>Switch Torproject sources from <i><span style="background-color:#FBFBFB">wheezy</span></i> to <i><span style="background-color:#FBFBFB">jessie</span></i> in <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/debian.list</span></i>.
</p>
<pre>sed -i "s/wheezy/jessie/g" /etc/apt/sources.list.d/torproject.list
</pre>
<p>As a <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> user, note that upgrades are currently only possible using Qubes' testing repository. Otherwise you run into grave issues. <sup class="reference" id="cite_ref-qubes-grave-issues_6-1"><a href="#cite_note-qubes-grave-issues-6">[6]</a></sup> Switch Qubes' sources from <i><span style="background-color:#FBFBFB">wheezy</span></i> to <i><span style="background-color:#FBFBFB">jessie-testing</span></i> in <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/qubes-r3.list</span></i>. (Non-Qubes users should skip Qubes specific steps.) <sup class="reference" id="cite_ref-9"><a href="#cite_note-9">[9]</a></sup> One <a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1095" href="https://github.com/QubesOS/qubes-issues/issues/1095" rel="noreferrer noopener" target="_blank">the related bug</a> has been fixed, consider removing the "-testing" from /etc/apt/sources.list.d/qubes-r3.list.
</p>
<pre>sed -i "s/wheezy/jessie-testing/g" /etc/apt/sources.list.d/qubes-r3.list
</pre>
<p>As a <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> user, remove the <i><span style="background-color:#FBFBFB">wheezy-backports</span></i> repository from <i><span style="background-color:#FBFBFB">/etc/apt/sources.list.d/debian.list</span></i>. <sup class="reference" id="cite_ref-10"><a href="#cite_note-10">[10]</a></sup>
</p>
<pre>sed -i "s#deb http://ftp.us.debian.org/debian/ wheezy-backports main##g" /etc/apt/sources.list
</pre>
<p>Make the upgrade process less interactive. Optional. (Mostly Qubes specific unless you installed apt-listchanges.)
</p>
<pre>export APT_LISTCHANGES_FRONTEND=text
</pre>
<p>Enable extensive debugging so reporting eventual bugs becomes easier.
</p>
<pre>export DEBDEBUG=1
</pre>
<p>Set environment variable TORSOCKS_LOG_LEVEL=1 to reduce unnecessary torsocks warnings. <sup class="reference" id="cite_ref-11"><a href="#cite_note-11">[11]</a></sup>
</p>
<pre>export TORSOCKS_LOG_LEVEL=1
</pre>
<p>Update your package lists.
</p>
<pre>apt-get update
</pre>
<p>Let's first upgrade torsocks and uwt, so we see fewer torsocks warning later on. <sup class="reference" id="cite_ref-12"><a href="#cite_note-12">[12]</a></sup>
</p>
<pre>apt-get install torsocks uwt
</pre>
<p>Qubes specific fix.
</p>
<pre>localedef -f UTF-8 -i en_US -c en_US.UTF-8
</pre>
<p>Qubes specific fix.
</p>
<pre>update-locale LC_ALL=en_US.UTF-8
</pre>
<p>Upgrade.
</p>
<pre>apt-get dist-upgrade || apt-get -f install || apt-get dist-upgrade
</pre>
<p>Make sure the packages ntp, ntpdate and chrony are not installed. Trying to remove them is enough. Specifically important for Qubes users.<sup class="reference" id="cite_ref-13"><a href="#cite_note-13">[13]</a></sup>
</p>
<pre>apt-get purge ntp ntpdate chrony
</pre>
<p>If you are not a user of KVM, you can optionally remove the spice-vdagent package. KVM users are probably better of keeping it.
</p>
<pre>apt-get purge spice-vdagent
</pre>
<p>Qubes only. Whonix-Gateway only. Move old qubes-whonix-control-port-filter-python.service out of the way.
</p>
<pre>sudo mv /etc/systemd/system/qubes-whonix-control-port-filter-python.service ~/
</pre>
<p>Qubes only. Whonix-Gateway only. Move old /etc/init.d/control-port-filter-python out of the way.
</p>
<pre>sudo mv /etc/init.d/control-port-filter-python ~/
</pre>
<p>Qubes only. Whonix-Gateway only. Enable control-port-filter-python.
</p>
<pre>sudo systemctl enable control-port-filter-python
</pre>
<p>Qubes only. Whonix-Workstation only. Move old /etc/tmpfiles.d/tor.conf out of the way. <sup class="reference" id="cite_ref-14"><a href="#cite_note-14">[14]</a></sup>
</p>
<pre>sudo mv /etc/tmpfiles.d/tor.conf ~/
</pre>
<p>It is recommended to have the <i><span style="background-color:#FBFBFB">whonix-gateway</span></i> / <i><span style="background-color:#FBFBFB">whonix-workstation</span></i> package installed to make sure nothing is broken. (If you like to uninstall it later as per <a data-href="/wiki/Whonix_Debian_Packages" href="./Whonix_Debian_Packages.html" title="Whonix Debian Packages">Whonix Debian Packages</a>, you're free to do so. Still, it is recommended to re-install it before removal to make sure you're as close to official package selection as possible.)
</p><p>If you are upgrading Whonix-Gateway...
</p>
<pre>apt-get install whonix-gateway
</pre>
<p>If you are upgrading Whonix-Workstation...
</p>
<pre>apt-get install whonix-workstation
</pre>
<p>Get rid of old packages.
</p>
<pre>apt-get autoremove
</pre>
<p>Optional: Users of <a data-href="/wiki/VirtualBox" href="./VirtualBox.html" title="VirtualBox">VirtualBox</a>, <a data-href="/wiki/KVM" href="./KVM.html" title="KVM">KVM</a> and <a class="mw-redirect" data-href="/wiki/Physical_Isolation" href="./Physical_Isolation.html" title="Physical Isolation">Physical Isolation</a> can optionally consider installation of the <a class="external text" data-href="https://github.com/Whonix/grub-screen-resolution" href="https://github.com/Whonix/grub-screen-resolution" rel="noreferrer noopener" target="_blank">grub-screen-resolution</a> package, which would set resolution to 1024x768 during boot. <sup class="reference" id="cite_ref-15"><a href="#cite_note-15">[15]</a></sup> (Recommended.)
</p>
<pre>apt-get install grub-screen-resolution
</pre>
<p>Optional: Users of VirtualBox, KVM and Physical Isolation can optionally consider installation of the <a class="external text" data-href="https://github.com/Whonix/grub-output-verbose" href="https://github.com/Whonix/grub-output-verbose" rel="noreferrer noopener" target="_blank">grub-output-verbose</a> package, which would show more verbose output during boot. For better usability, so it doesn't look like boot hangs on slow systems and to ease debugging in case of issues. <sup class="reference" id="cite_ref-16"><a href="#cite_note-16">[16]</a></sup> (Recommended.)
</p>
<pre>apt-get install grub-output-verbose
</pre>
<p>Qubes only! Get rid of Whonix's autostart of Whonix Setup Wizard.
</p>
<pre>sudo mv /etc/xdg/autostart/whonix-setup-wizard.desktop ~/
</pre>
<p>Restore original <i><span style="background-color:#FBFBFB">/etc/default/grub</span></i>. <sup class="reference" id="cite_ref-17"><a href="#cite_note-17">[17]</a></sup>
</p>
<pre>sudo cp /etc/default/grub.anondist-orig /etc/default/grub
</pre>
<p>Update grub. (<a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> users can skip this.)
</p>
<pre>update-grub
</pre>
<p>Consider applying the <a href="#Grub_Fix">#Grub Fix</a> now or after reboot.
</p><p>Remember to store the terminal (Konsole) log. (File -&gt; Save Output As)
</p><p>Reboot required.
</p>
<pre>reboot
</pre>
<h1><span class="mw-headline" id="Grub_Fix">Grub Fix</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=24" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=24.html" title="Edit section: Grub Fix">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Applying this fix is recommended after upgrading from Whonix 10 to Whonix 11.
</p><p>Useful if you saw the the error shown on the following screenshot after boot.
</p><p><a class="image" data-href="/w/index.php?title=File:Grub_error_file_not_found_issue.png&amp;filetimestamp=20150615005532&amp;" href="https://www.whonix.org/w/index.php?title=File:Grub_error_file_not_found_issue.png&amp;filetimestamp=20150615005532&amp;"><img alt="Grub error file not found issue.png" data-src="/w/images/thumb/d/d4/Grub_error_file_not_found_issue.png/400px-Grub_error_file_not_found_issue.png" data-srcset="/w/images/thumb/d/d4/Grub_error_file_not_found_issue.png/600px-Grub_error_file_not_found_issue.png 1.5x, /w/images/d/d4/Grub_error_file_not_found_issue.png 2x" height="87" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAABXBAMAAADYCw5HAAAAD1BMVEUAAAAqKipUVFR+fn6oqKg9nkTvAAAFMklEQVR42u2bYW7rRhKEvy7xAM3xBWqaOgCtEzCC7n+m/TG0LDt5SXaRLPgeWIABQ6REfRqya7qnB35txT9yyv9fzQAk3l9QkPv/BogeEQEz6OOUI4JYsjrG0emGEK5s2RyZAdIkiWgwR8vMzEOOSHXL0ju+SAKQvNpehecZhEpCAilt2xxzRCwLYykKQLXatoVl0JtKwgIJ2xOHBxkPhbbtC4g0fQE56IhUb70VPW5SVALCdtnSuwVadFFNqHJpuNaDgnwJq5WcOnXq1KlTp04dSx3RvqSB4SOnUi/ZYXbPlueOATMjCmjZUoCQI6KP+f1xZf+mLqsLg94RYy6/2l4Mb/YkXaTLsUFu3vDIOkaKLqRKGOkICE+S9tTxwCOST5DtCcJ3kIukC/OxnxGTyHsWklRWFpDZMgyBHD0i+rFBTp0+cvrI6SM/mY/wRz7CzwdS3jCtm/0ZWXKZx4jUqDLSSoukheLUqf9VM/F9JuIXU/l5ZOLF+fTqg4d/2O+9eutVbKB3GqMif3PtPtJKupSWg/vIuoXDcrz6iH9qH/HpI6dO/cLKD5PYnrb3+VQ3AxnebTGARqXykFFLltXCI3cSzNGCzGSsR3uGEcneIFLYQEs95/5HCb9KubGNrofR3FDYBnXA5QGiBqoo3xJWp6yDgbSy2CT1HYRiNDcIsCeQok9Llihst7RbVT8YiJvbd5DVBisSe8Lap107CKx2cwDGHOEWK8uaNasiJIjKmsnKTGiOVNfHdw2gqGwJlZrlA4G8Kvp/He1O/XujYcDRiah8eol+PwoGyPzd4HyW9S6f700cRUBUKls+bSnHtSAqG5W7UX3eo+uP8h89c738kvhlqskwK0KSKBhTxYQmefbs6NGjY4ruMTVuKcPeeUd0O5gbLTO1WxPEKgm/BYmNndmGLXlcSyQ9haGyWcizowOmRwtmPGqFbW6znKNO6GgUHgc+ClnenGrd2jG054VOcFldfZIUId1ExQ7itMBh6R2kuMXcckvb2q2pFZZoc4s5xS3L9rClcUDSnFJFjTCoN1t9JAwedtZng9N2uVI16oRWFvMNO+31E2S6w3AS9AQpwLreLTM9hB5Yj2IHKa53mLg+GH5pSmzXbYBMd2v/vt5/H4/OO38/IAqD/biPPrfpsYNQuEZgtMs13b1TCm+Yx3bd/ByRS1qtW9Gl+AQJgzVyLu2FVKEPkBgfsOcx6jvIaITcxr1VWBKx5AdIy08QoeULiNF+tR+AWC8gSo8DO8hE9VagLkVXsaSAxWWoar26Uam00KLm8hUol1uH0XkHqrSocq3ym6u3agVxi36pHL9BuWy399bDukW/FJqwouYy3FxdtG403rk09kpCuexytbK0QNwavbJRrrXWaUf5i4nG3zI77Q2EPJuI/zRCnib0N2zkSx3u40+vJ+Sxa3T+sBl/gdB3EJHHrtF5b5aN7VIqoKmyxZIXygKqt7pUW1hVTUcG2aSPfEQjF/QIwm0V4NBVLo0252ODWDuIv4DsER9PAwS1A6+03/agr7ukApaGl1S+uda3DqZd5VripmqRcGViOnbo0llKPHXq1KlTp04dQ3+0N0y8JFkvdbhDr+vafWxD7BA9epAoGEVsMapwe3lurAAddFvczb/JcjggdJEwmjXWDhZbo3Rzkd5HyawOV3t/5iNc72NirocGiPXYbBibQY3210VRj+2wIIZOgSTFPEYErz8AOW6GSBtbXNEiMRvFvHc9jCpcqSQ6S6NXL0/HT61ewthfFtoejzPmn/r19R+SfKG7Fo9qLQAAAABJRU5ErkJggg==" width="400"/></a>
</p><p>Fortunately, this fix is not critical. The system is still bootable. To have it bootable also in future it is a good idea to fix this.
</p><p>Recommended for users of <a data-href="/wiki/VirtualBox" href="./VirtualBox.html" title="VirtualBox">VirtualBox</a> and <a data-href="/wiki/KVM" href="./KVM.html" title="KVM">KVM</a>. Not required for users of <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a>, because it is not yet using grub. <sup class="reference" id="cite_ref-18"><a href="#cite_note-18">[18]</a></sup> Maybe not required for users of <a class="mw-redirect" data-href="/wiki/Physical_Isolation" href="./Physical_Isolation.html" title="Physical Isolation">Physical Isolation</a>.
</p>
<ul><li><a data-href="/wiki/VirtualBox" href="./VirtualBox.html" title="VirtualBox">VirtualBox</a> users: <code>sudo grub-install /dev/sda ; echo $?</code></li>
<li><a data-href="/wiki/KVM" href="./KVM.html" title="KVM">KVM</a> users: <code>sudo grub-install /dev/vda ; echo $?</code></li>
<li><a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes</a> users: Not required.</li>
<li><a class="mw-redirect" data-href="/wiki/Physical_Isolation" href="./Physical_Isolation.html" title="Physical Isolation">Physical Isolation</a> users: Probably not required.</li></ul>
<p>Expected output.
</p>
<pre>Installing for i386-pc platform.
Installation finished. No error reported.
0
</pre>
<h1><span class="mw-headline" id="Qubes_Cleanup">Qubes Cleanup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=25" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=25.html" title="Edit section: Qubes Cleanup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Qubes-Whonix-Gateway_purge_unneeded_packages">Qubes-Whonix-Gateway purge unneeded packages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=26" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=26.html" title="Edit section: Qubes-Whonix-Gateway purge unneeded packages">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>You can optionally purge the following unneeded packages from Qubes-Whonix-Gateway.
</p>
<pre>sudo apt-get purge cups mutt icedove amd64-microcode intel-microcode avahi-daemon
</pre>
<h1><span class="mw-headline" id="Footnotes">Footnotes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=27" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit&amp;section=27.html" title="Edit section: Footnotes">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div class="reflist" style="list-style-type: decimal;">
<div class="mw-references-wrap mw-references-columns"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text">
During
<pre>sudo -u user ln -s /usr/share/applications/kde4/konsole.desktop /home/user/Desktop/
</pre></span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">↑</a></span> <span class="reference-text">
Qubes bug <a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1105" href="https://github.com/QubesOS/qubes-issues/issues/1105" rel="noreferrer noopener" target="_blank">in place upgrade issue - base-passwd debconf interative question asks 'Remove group "qubes"'?</a> will be fixed after the upgrade.</span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite_ref-3">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/1095#issuecomment-129236062" href="https://github.com/QubesOS/qubes-issues/issues/1095" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/1095#issuecomment-129236062</a></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">↑</a></span> <span class="reference-text">
<a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1095#issuecomment-129236062" href="https://github.com/QubesOS/qubes-issues/issues/1095" rel="noreferrer noopener" target="_blank">This might trigger a qrexec bug.</a></span>
</li>
<li id="cite_note-5"><span class="mw-cite-backlink"><a href="#cite_ref-5">↑</a></span> <span class="reference-text">
Because there are <a class="external text" data-href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/d0g4ts95CAAJ" href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/d0g4ts95CAAJ" rel="noreferrer noopener" target="_blank">known issues with qrexec during distribution upgrades</a>.</span>
</li>
<li id="cite_note-qubes-grave-issues-6"><span class="mw-cite-backlink">↑ <sup><a href="#cite_ref-qubes-grave-issues_6-0">6.0</a></sup> <sup><a href="#cite_ref-qubes-grave-issues_6-1">6.1</a></sup></span> <span class="reference-text">
<ul><li><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/1095" href="https://github.com/QubesOS/qubes-issues/issues/1095" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/1095</a></li>
<li><a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ" href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ</a></li></ul>
</span></li>
<li id="cite_note-7"><span class="mw-cite-backlink"><a href="#cite_ref-7">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ" href="https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/MoUqGfMpMu0/2tGlVYbiBwAJ</a></span>
</li>
<li id="cite_note-8"><span class="mw-cite-backlink"><a href="#cite_ref-8">↑</a></span> <span class="reference-text">Qubes has some more issues with distribution upgrades.</span>
</li>
<li id="cite_note-9"><span class="mw-cite-backlink"><a href="#cite_ref-9">↑</a></span> <span class="reference-text">
Once the fixed packages migrate into stable we can drop the "-testing".
<pre>sed -i "s/wheezy/jessie/g" /etc/apt/sources.list.d/qubes-r3.list
</pre></span>
</li>
<li id="cite_note-10"><span class="mw-cite-backlink"><a href="#cite_ref-10">↑</a></span> <span class="reference-text">
The following line.

<pre>deb http://ftp.us.debian.org/debian/ wheezy-backports main
</pre>
<p>Needs to be removed from <i><span style="background-color:#FBFBFB">/etc/apt/sources.list</span></i> because fortunately, Qubes no longer needs it.
</p>
</span></li>
<li id="cite_note-11"><span class="mw-cite-backlink"><a href="#cite_ref-11">↑</a></span> <span class="reference-text">
Disable torsocks warning spam such as.<br/>
[May 20 11:45:27] WARNING torsocks[2645]: [syscall] Unsupported syscall number 224. Denying the call (in tsocks_syscall() at syscall.c:165)<br/>
<a class="external free" data-href="https://phabricator.whonix.org/T317" href="https://phabricator.whonix.org/T317" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T317</a></span>
</li>
<li id="cite_note-12"><span class="mw-cite-backlink"><a href="#cite_ref-12">↑</a></span> <span class="reference-text">Due to transition from torsocks 1.x to torsocks 2.x.</span>
</li>
<li id="cite_note-13"><span class="mw-cite-backlink"><a href="#cite_ref-13">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/1102" href="https://github.com/QubesOS/qubes-issues/issues/1102" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/1102</a></span>
</li>
<li id="cite_note-14"><span class="mw-cite-backlink"><a href="#cite_ref-14">↑</a></span> <span class="reference-text">Otherwise systemd service systemd-tmpfiles-setup would enter a failed state.</span>
</li>
<li id="cite_note-15"><span class="mw-cite-backlink"><a href="#cite_ref-15">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/Whonix/grub-screen-resolution/blob/master/etc/default/grub.d/30_screen_resolution.cfg" href="https://github.com/Whonix/grub-screen-resolution/blob/master/etc/default/grub.d/30_screen_resolution.cfg" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/grub-screen-resolution/blob/master/etc/default/grub.d/30_screen_resolution.cfg</a></span>
</li>
<li id="cite_note-16"><span class="mw-cite-backlink"><a href="#cite_ref-16">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/Whonix/grub-output-verbose/blob/master/etc/default/grub.d/30_output_verbose.cfg" href="https://github.com/Whonix/grub-output-verbose/blob/master/etc/default/grub.d/30_output_verbose.cfg" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/grub-output-verbose/blob/master/etc/default/grub.d/30_output_verbose.cfg</a></span>
</li>
<li id="cite_note-17"><span class="mw-cite-backlink"><a href="#cite_ref-17">↑</a></span> <span class="reference-text">The grub-enable-apparmor package no longer modifies that file. Now implemented using <i><span style="background-color:#FBFBFB">/etc/default/grub.d</span></i>. See also: <a class="external free" data-href="https://phabricator.whonix.org/T25" href="https://phabricator.whonix.org/T25" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T25</a></span>
</li>
<li id="cite_note-18"><span class="mw-cite-backlink"><a href="#cite_ref-18">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://phabricator.whonix.org/T353#5523" href="https://phabricator.whonix.org/T353" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T353#5523</a></span>
</li>
</ol></div></div>
<hr/>
<div style="padding-bottom:1px; padding-top:6px; border:thin solid black; background:#EEEEEE; text-align:center;"><u>Random News:</u>
<p>Want to help create awesome, up-to-date <a data-href="/wiki/Screenshots" href="./Screenshots.html" title="Screenshots">screenshots</a> for the Whonix wiki? Help is most welcome!
</p>
</div>
<hr/><p><font size="-1"><a class="external text" data-href="./Upgrading_Whonix_10_to_Whonix_11" href="./Upgrading_Whonix_10_to_Whonix_11" rel="noreferrer noopener" target="_blank">https</a> | (<a data-href="/wiki/Forcing_.onion_on_Whonix.org" href="./Forcing_.onion_on_Whonix.org.html" title="Forcing .onion on Whonix.org">forcing</a>) <a class="external text" data-href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Upgrading_Whonix_10_to_Whonix_11" href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Upgrading_Whonix_10_to_Whonix_11" rel="noreferrer noopener" target="_blank">onion</a><br/>
</font></p><font size="-1"></font><p><font size="-1">Share: <a data-href="https://twitter.com/intent/tweet?url=./Upgrading_Whonix_10_to_Whonix_11&amp;text=&amp;via=Whonix" href="https://twitter.com/intent/tweet?url=./Upgrading_Whonix_10_to_Whonix_11&amp;text=&amp;via=Whonix">Twitter</a>
|
<a data-href="https://facebook.com/sharer.php?u=./Upgrading_Whonix_10_to_Whonix_11" href="https://facebook.com/sharer.php?u=./Upgrading_Whonix_10_to_Whonix_11">Facebook</a></font>
</p><p><font size="-1">This is a wiki. Want to improve this page? Help is welcome and volunteer contributions are happily considered! See <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" rel="noreferrer noopener" target="_blank">Conditions for Contributions to Whonix</a>, then <a data-href="/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;action=edit">Edit</a>! IP addresses are scrubbed, but editing over Tor is recommended. Edits are held for moderation.</font>
</p><p><font size="-1">Whonix is a <a class="external text" data-href="http://www.openinventionnetwork.com/licensees.php" href="http://www.openinventionnetwork.com/licensees.php" rel="noreferrer noopener" target="_blank">licensee</a> of the Open Invention Network. Unless otherwise noted, the content of this page is <a data-href="/wiki/Whonix:Copyrights" href="./Whonix:Copyrights.html" title="Whonix:Copyrights">copyrighted</a> and licensed under the same Libre Software <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" rel="noreferrer noopener" target="_blank">license</a> as Whonix itself. (<a data-href="/wiki/Why_Whonix_is_Free_Software" href="./Why_Whonix_is_Free_Software.html" title="Why Whonix is Free Software">Why?</a>)</font>
</p><p><font size="-1">Whonix is provided by ENCRYPTED SUPPORT LP. See <a class="mw-redirect" data-href="/wiki/Impressum" href="./Impressum.html" title="Impressum">Imprint</a>.</font>
</p>
<!-- 
NewPP limit report
Cached time: 20181215081643
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.136 seconds
Real time usage: 0.144 seconds
Preprocessor visited node count: 1239/1000000
Preprocessor generated node count: 3203/1000000
Post‐expand include size: 5527/2097152 bytes
Template argument size: 1116/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/100
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 22419/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   68.378      1 -total
 20.76%   14.197      1 Template:Reflist
 17.87%   12.217      1 Template:Open_with_root_rights
 16.89%   11.547      1 Template:Footer
 15.34%   10.491      1 Template:Box
 13.03%    8.909      3 Template:CodeSelect
  6.49%    4.439     27 Template:Code2
  5.51%    3.767      1 Template:Header
  5.07%    3.469      1 Template:Share
  5.05%    3.453      1 Template:Edit_it
-->
</div></div><div class="printfooter">
Retrieved from "<a data-href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;oldid=39830" dir="ltr" href="https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;oldid=39830">https://www.whonix.org/w/index.php?title=Upgrading_Whonix_10_to_Whonix_11&amp;oldid=39830</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a data-href="/wiki/Special:Categories" href="./Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a data-href="/wiki/Category:Documentation" href="./Category:Documentation.html" title="Category:Documentation">Documentation</a></li></ul></div></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 26 November 2018, at 05:29.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="./Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a class="mw-redirect" data-href="/wiki/Privacy_Policy" href="./Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Disclaimer"><a class="mw-redirect" data-href="/wiki/Disclaimer" href="./Disclaimer.html" title="Disclaimer">Disclaimer</a></li>
<li id="footer-Terms_of_Service"><a class="mw-redirect" data-href="/wiki/Terms_of_Service" href="./Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="./Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="./Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="./Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
<!-- Cached/compressed 20181215081643 -->
</html>
