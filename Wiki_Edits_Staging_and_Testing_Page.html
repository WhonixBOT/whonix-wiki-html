<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Wiki Edits Staging and Testing Page - Whonix
 url: ./Wiki_Edits_Staging_and_Testing_Page
 date: Sat Mar  2 08:23:12 2019
-->
<head>
<meta charset="utf-8"/>
<title>Wiki Edits Staging and Testing Page - Whonix</title>
<link rel="stylesheet" type="text/css" href="style.css">




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.31.1" name="generator"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/favicon.ico" href="https://www.whonix.org/favicon.ico" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="article" property="og:type"/>
<meta content="Whonix" property="og:site_name"/>
<meta content="Wiki Edits Staging and Testing Page" property="og:title"/>
<meta content="./Wiki_Edits_Staging_and_Testing_Page" property="og:url"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Wiki_Edits_Staging_and_Testing_Page rootpage-Wiki_Edits_Staging_and_Testing_Page skin-foreground action-view"><div id="navwrapper"><!-- START FOREGROUNDTEMPLATE -->

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<!-- Output page indicators -->
<div class="mw-indicators mw-body-content">
</div>
<!-- If user is logged in output echo location -->
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><div class="mw-parser-output"><p><style type="text/css">

#banner {
 position: relative;
 overflow: hidden;
 margin-bottom: 0.5em !important;
 margin-top: 0.5em !important;
 background-color:#D03232;
 border: solid 1px #aaaaaa; 
 height:66px;
}

#banner a.cn-full-banner-click {
 display:block;
 height:100%;
 width:100%;
 cursor: pointer;
}


#banner-logo {
 position: absolute;
 top: 8px;
 left: 15px;
 background-image: url(data:image/png;base64,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);
 height: 50px;
 width: 100%;
 background-repeat: no-repeat;
}

#banner #black-text {
 font-size: 1.1em;
 color: white;
 padding: 0.5em 40px 0.4em 60px;
 line-height: 1.3em;
 text-align: center;
}
</style>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Payments" href="./Payments.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Whonix requires money to stay alive.
     </div>
</a>
</div>
</div></div></div> </div>
</div>
<div id="mw-js-message" style="display:none;"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up">Â Actions</span></i></a>
<!--RTL -->
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="/wiki/Wiki_Edits_Staging_and_Testing_Page" href="./Wiki_Edits_Staging_and_Testing_Page.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=history" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<!--RTL -->
<div id="content">
<h1 class="title" id="firstHeading">Wiki Edits Staging and Testing Page</h1>
<h5 class="subtitle" id="siteSub"></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><div class="toc" id="toc"><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Note:_This_Page_is_for_Wiki_Staging_and_Testing_Only.21"><span class="tocnumber">1</span> <span class="toctext">Note: This Page is for Wiki Staging and Testing Only!</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Connecting_to_a_VPN_before_Tor_.28User_-.3E_VPN_-.3E_Tor_-.3E_Internet.29"><span class="tocnumber">2</span> <span class="toctext">Connecting to a VPN before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet)</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Introduction"><span class="tocnumber">2.1</span> <span class="toctext">Introduction</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Connecting_to_a_Tunnel-link_before_Tor"><span class="tocnumber">3</span> <span class="toctext">Connecting to a Tunnel-link before Tor</span></a></li>
<li class="toclevel-1"><a href="#Warnings"><span class="tocnumber">4</span> <span class="toctext">Warnings</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Challenges_in_Provider_Location_Selection"><span class="tocnumber">4.1</span> <span class="toctext">Challenges in Provider Location Selection</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#VPN_Configuration_Options"><span class="tocnumber">5</span> <span class="toctext">VPN Configuration Options</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Introduction_2"><span class="tocnumber">5.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#VPN_Client_Choice"><span class="tocnumber">5.2</span> <span class="toctext">VPN Client Choice</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Separate_VPN-Gateway"><span class="tocnumber">5.3</span> <span class="toctext">Separate VPN-Gateway</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#On_the_Host"><span class="tocnumber">5.4</span> <span class="toctext">On the Host</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#How_to_add_the_VPN_in_Host_OS"><span class="tocnumber">5.4.1</span> <span class="toctext">How to add the VPN in Host OS</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Use_a_Fail_Closed_Mechanism"><span class="tocnumber">5.4.2</span> <span class="toctext">Use a Fail Closed Mechanism</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Inside_Whonix-Gateway"><span class="tocnumber">5.5</span> <span class="toctext">Inside Whonix-Gateway</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#VPN_Client_Choice_2"><span class="tocnumber">5.5.1</span> <span class="toctext">VPN Client Choice</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Whonix_TUNNEL_FIREWALL_vs_standalone_VPN-Firewall"><span class="tocnumber">5.5.2</span> <span class="toctext">Whonix TUNNEL_FIREWALL vs standalone VPN-Firewall</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Setup_Time"><span class="tocnumber">5.5.3</span> <span class="toctext">Setup Time</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Preparation"><span class="tocnumber">5.5.4</span> <span class="toctext">Preparation</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Firewall_Settings"><span class="tocnumber">5.5.5</span> <span class="toctext">Firewall Settings</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Reload_Firewall"><span class="tocnumber">5.5.6</span> <span class="toctext">Reload Firewall</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#sudoers_configuration"><span class="tocnumber">5.5.7</span> <span class="toctext">sudoers configuration</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#VPN_Setup"><span class="tocnumber">5.5.8</span> <span class="toctext">VPN Setup</span></a>
<ul>
<li class="toclevel-4 tocsection-22"><a href="#Introduction_3"><span class="tocnumber">5.5.8.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-4 tocsection-23"><a href="#Get_VPN_Certificate"><span class="tocnumber">5.5.8.2</span> <span class="toctext">Get VPN Certificate</span></a></li>
<li class="toclevel-4 tocsection-24"><a href="#VPN_Credentials"><span class="tocnumber">5.5.8.3</span> <span class="toctext">VPN Credentials</span></a></li>
<li class="toclevel-4 tocsection-25"><a href="#VPN_Credentials_2"><span class="tocnumber">5.5.8.4</span> <span class="toctext">VPN Credentials</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#VPN_IP_Address"><span class="tocnumber">5.5.8.5</span> <span class="toctext">VPN IP Address</span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#VPN_Configuration_File"><span class="tocnumber">5.5.8.6</span> <span class="toctext">VPN Configuration File</span></a></li>
<li class="toclevel-4 tocsection-28"><a href="#DNS_Configuration"><span class="tocnumber">5.5.8.7</span> <span class="toctext">DNS Configuration</span></a></li>
<li class="toclevel-4 tocsection-29"><a href="#Configuration_Folder_Permissions"><span class="tocnumber">5.5.8.8</span> <span class="toctext">Configuration Folder Permissions</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-30"><a href="#systemd_setup"><span class="tocnumber">5.5.9</span> <span class="toctext">systemd setup</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Enable_Tor"><span class="tocnumber">5.5.10</span> <span class="toctext">Enable Tor</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#Troubleshooting"><span class="tocnumber">5.5.11</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-4"><a href="#ip_unpriv_vs_ip-unpriv"><span class="tocnumber">5.5.11.1</span> <span class="toctext">ip_unpriv vs  ip-unpriv</span></a></li>
<li class="toclevel-4"><a href="#50_openvpn_unpriv.conf_vs_50_openvpn-unpriv.conf"><span class="tocnumber">5.5.11.2</span> <span class="toctext">50_openvpn_unpriv.conf vs 50_openvpn-unpriv.conf</span></a></li>
<li class="toclevel-4"><a href="#Cannot_ioctl_TUNSETIFF"><span class="tocnumber">5.5.11.3</span> <span class="toctext">Cannot ioctl TUNSETIFF</span></a></li>
<li class="toclevel-4"><a href="#Dev_tun_Mismatch"><span class="tocnumber">5.5.11.4</span> <span class="toctext">Dev tun Mismatch</span></a></li>
<li class="toclevel-4"><a href="#.2Frun.2Fopenvpn.2Fopenvpn.status_Permission_denied"><span class="tocnumber">5.5.11.5</span> <span class="toctext">/run/openvpn/openvpn.status Permission denied</span></a></li>
<li class="toclevel-4"><a href="#debug_start"><span class="tocnumber">5.5.11.6</span> <span class="toctext">debug start</span></a></li>
<li class="toclevel-4"><a href="#Linux_ip_link_set_failed"><span class="tocnumber">5.5.11.7</span> <span class="toctext">Linux ip link set failed</span></a></li>
<li class="toclevel-4"><a href="#DNS_Configuration_2"><span class="tocnumber">5.5.11.8</span> <span class="toctext">DNS Configuration</span></a></li>
<li class="toclevel-4"><a href="#Terminology_for_Support_Requests"><span class="tocnumber">5.5.11.9</span> <span class="toctext">Terminology for Support Requests</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-33"><a href="#How_to_Submit_a_Support_Request"><span class="tocnumber">5.5.12</span> <span class="toctext">How to Submit a Support Request</span></a>
<ul>
<li class="toclevel-4 tocsection-34"><a href="#Additional_Tweaks_.2F_Recommendations_.2F_Troubleshooting"><span class="tocnumber">5.5.12.1</span> <span class="toctext">Additional Tweaks / Recommendations / Troubleshooting</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1><span id="Note:_This_Page_is_for_Wiki_Staging_and_Testing_Only!"></span><span class="mw-headline" id="Note:_This_Page_is_for_Wiki_Staging_and_Testing_Only.21"><u>Note: This Page is for Wiki Staging and Testing Only!</u></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=1.html" title="Edit section: Note: This Page is for Wiki Staging and Testing Only!">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h1><span id="Connecting_to_a_VPN_before_Tor_(User_-&gt;_VPN_-&gt;_Tor_-&gt;_Internet)"></span><span class="mw-headline" id="Connecting_to_a_VPN_before_Tor_.28User_-.3E_VPN_-.3E_Tor_-.3E_Internet.29">Connecting to a VPN before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=2.html" title="Edit section: Connecting to a VPN before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet)">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=3.html" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_notice.png&amp;filetimestamp=20130717195411&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_notice.png&amp;filetimestamp=20130717195411&amp;"><img alt="Ambox notice.png" data-src="/w/images/c/c8/Ambox_notice.png" height="40" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span"><u>Advertisement</u>:<br/>
Too difficult to set up? Provider specific automation can be created for you by the lead developer of Whonix. Send reasonable price suggestions. Get in <a data-href="/wiki/Contact#For_Private_Inquiries" href="./Contact.html" title="Contact">contact</a>.</div></td></tr></tbody></table>
<p><br/>
It is possible to combine <a data-href="/wiki/Tor" href="./Tor.html" title="Tor">Tor</a> with tunnels like VPNs, proxies and SSH. The traffic can be sent through both Tor and the second tunnel, in either order. However, this is an advanced topic and appropriate only for special cases. Adding a second connection does not automatically improve security, but it will add significant complexity. 
The potential positive or negative effects on anonymity are being <a class="external text" data-href="https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN" href="https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN" rel="noreferrer noopener" target="_blank">controversially debated</a>. 
</p><p>The Whonix project remains technologically neutral in the anonymity discussion. The improper combination of Tor and another service may actually degrade a user's security and anonymity. One such case is using a proxy to hide Tor network traffic from your ISP.
</p><p>While proxies are a type of tunnel-link they should not be thought of as a replacement for a VPN and SSH in this configuration. This is because connections to proxies are unencrypted and therefore should not be used to hide Tor use. Proxies are ok for circumvention of censorship if that has been shown to work from the users location but are unsuitable for hiding Tor due to lack of encryption.
</p><p>Combinations of tunnels-links with Tor are difficult to set up and should only be attempted by advanced users. For the vast majority of Whonix users, using Tor in isolation â without a tunnel-link (VPN, proxy or SSH) â is the correct choice.
</p>
<h1><span class="mw-headline" id="Connecting_to_a_Tunnel-link_before_Tor">Connecting to a Tunnel-link before Tor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=4.html" title="Edit section: Connecting to a Tunnel-link before Tor">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<hr/>
<p><b><code>User</code> -&gt; <code>tunnel-link</code> -&gt; <code>Tor</code> -&gt; <code>Internet</code></b>
</p><p><br/>
In this configuration network traffic will (1) enter the tunnel-link and pass through your ISP -&gt; (2) exit your tunnel-link server as encrypted Tor traffic-&gt; (3) enter to the Tor network-&gt; (4) exit the Tor network at a Tor exit node as normal internet traffic (encrypted or unencrypted).
</p><p><b> Possible uses: </b>
</p>
<ul><li>You must connect to your tunnel-link to access the internet.</li>
<li>Your ISP blocks Tor and Tor bridges but doesnât block the tunnel-link.</li>
<li>Fear of de-anonymizing attacks against the Tor network; belief that your tunnel-link is able to protect your identity in such case.</li></ul>
<h1><span class="mw-headline" id="Warnings">Warnings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:Tunnel_Introduction/Tunnel-link_before_Tor&amp;action=edit&amp;section=T-1" href="https://www.whonix.org/w/index.php?title=Template:Tunnel_Introduction/Tunnel-link_before_Tor&amp;action=edit&amp;section=T-1.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><u>Note:</u> The following warnings are not Whonix specific issues. They are general issues associated with combining Tor with tunnel-links.
</p><p><br/>
</p>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">A tunnel service provider that knows your identity and/or location may be more willing and able to compromise your privacy than your ISP.</div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">If your software configuration doesnât block all traffic when your tunnel-link connection suddenly disconnects, your encrypted Tor traffic will go through your ISP without warning. This is the default nature of most tunnel configurations and not an issue specific to Whonix.<sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup></div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">If using Tor is dangerous in your area, VPNs or SSH may not provide enough protection (due to software misconfiguration or sophisticated packet inspection).</div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_notice.png&amp;filetimestamp=20130717195411&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_notice.png&amp;filetimestamp=20130717195411&amp;"><img alt="Info" data-src="/w/images/c/c8/Ambox_notice.png" height="40" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAKaUlEQVR42u2YW2xcx3nHf9+cs0sub+KSlEjdbItS4kQ3K7akKk2TkKbiSELToICBAg0QJC9B0iJIUiAPBYpW6EuBPLVpXcCuYRS5ug7iJnXjuKEVC2JkJa1r2bIcxTZpUbYpkuJ1ednbmZmvD+fs2aVIFXac9KkHOCAWPDPzm+/y/74Z+P/n3T3y6w786iPj75ucrw6sFO2HV6t+f7Hit0ReWhUkE2i5rVmW8m0ysaNLLr+n2559T8fs+aGhoYnfKuBXHx4PC0V7//h0+bNLRTcQZMNsVz5HvrOJttYMTRmDCFQjz3LRMleoMD1foVK1vr9H3zxyu/70nt7Co6FW/vv48eNzv1HArzx49eMvXV09vVzxx/r62ujftYm+La20toQEgRCIIAIGMCIYUVShWLZM3Cjy0miB0YkVdnb6hd/fa/99f9fid0ql0rOnTp1aeleAf/mNN7KvT5a/9upE6Uu9W9vYu28zm3taMAbUK5JMIhK/pvYiGIHACJlQEBGm50qcvTjDlWvLnNqrY5/Ys/CguPLwfffd98KvBfj1H17vefIXC99dKvvjew/2ckd/J4EIznsEwRgIGuAgtmJoYkhBCCRexAhkMwYjcGmswI8uTLGnO1r5k6Or38pq8V+HhoZ+8o4Ah59f6Pn7H0w+MV/WY3cf20l3Tw5nfbqYScCMiafwHvK52L3LVSU0QmDib4LE7bWxuSbD5FyZbw+/xR2dUfSlY0vfw5Yeu/fee3/4tgB//qvl7D/84PpTr89Gg0c+fDttHc1461NLNVql5t7juwPu6gsQ4JcznrNXHSRWNjX3N4DmMobFlSr/9OQ1DvRa+7lDs99VZ783NDT0RCOL2Qjw8ZHZv3n1emVw/5EdZFubKFcczpO+1oPV+C1aONRnOLYjIBdCcwh3bzUc2mooWcV5xblkrIL1ilNlNfJ0tGX51PGdXHjThD+b6rk/CIITZ86c+d3/FfDhH08NnLtU+LP+/VtoybdQqXish8gni90E6hR25dfvc1enxN84sBqPtY0b9Mpq1dHX1cwnP9jHPz5LbsF1fNIY87Gnn366d0PAJ34+Hw4/t/C1lu5WurZ3Uq04nCo+mThSkoXqoJGDqRVdB3hjVeNNaQxmXd16TknnXKk69u3q4P23tfPQc03bPeajYRjetyHgxdGVP7g2Gx3ZursHqwmQkkyqOJcslljAecWIcm7cMTbv03neKChnx+OEijcSQzkPUfpbUwtHTvnIwW4uTQvXy+0fUtWjIyMj/QBhI+ArbxY/l8vnyHbkiKI4KbwkwqtxsHtVjICKJP+DQkV56LmI/i5DIHCtoEQOskEcp0ZBRdOEUlPL6HiuSqRs6Wxmz7Y2fvSaZj9/0NwdRdHvAa+nFvznn0z3T8xWBzp6O9KYqcebYlXTxHAax2TVKhUXW6do4dKU58Upz2oVFOrWXuMNcE5TqzZ65MCuDs6/YViymYPGmH3Dw8ObUgteHi8OVjFNmY4ckVVEIRBFRNBEJlQ0tqoK2QByGUn1UNZIiaJA1UlibVJvBIBPYss7jSuSCuVI6e1qJpMJuLacazuQr+7JZrP9KeCNxeqHgpYshAHOxZUidqEm5Sv5DVS8cs+2gM8cysYirXHdTWVV4LU5zyPPRzQFcThIusm6eAugHjyKV6UpE7Cls4mXZyvs79TbVHVfCri4bN8b5lpxCOIVkdiK9VjT1BrOSwIUP7mMrFP8XBhnuDFgVGNxX+ONxOJJbKvGlu1qz/L6vABsVdVtKWCp6vtkU0CkiXs1cctNSRHXWuW/JiyXbzgiJ3zhSIYPbA3WAPpa9rtkbAK6xhu1JEysGXhozYWMTYOIdAH5FLBitS00Ac6BqCYD4xhTQFWTbiW2QtFDMVKqTqm69dXINySFoojb2BsiggJi4kQKA0MxEoCcqraGayeNM0t84gYUNeAS0KABVEQ2rpPJo8RCHRipewPFKHiRelsmGoO62MrxhpJQFsmkgJlAVivOI14JfD17va9nZW3igLqVnWdNPNYB6xKVekMTq2kMVZsvbkBi8a5EnuZMPKGqagrY0hxMr1Rsv3GK1xgqHpgENiCydmKTaJ1nPaGmZTGRGjSOw4awqYFK4vrAQ6EY0dcmJGpUTr2Ubw9es6UoEeiGWuuVyNVraFq6kppsU4lZb8F6SUwEPvltVdcKdzJf5JT55YjbNilAQUSWUsDeruwFLVeJqg4Ha0E1lgzXUOxtQ5XRjWKw4RvbOJerj4t8HdQDq2XH3HKFA5stwAxwNQXcvS13psVo5FbLRCr1HfqGsuTiYt+4oL1FDKJrN1lr2WzSdDhf62hiUEW4sVjGWkd/RxngLVW9nAJ+/mTfa9u6syN2fqVu8lqTqQ3Wc7EVrNZ6RLgF3zoXrmnbXL2jqXlp7PoKv7NdaQvKqOpVERlboxR39DU/xGoZLVZwSD3OGkGT1qtqlZWqslTx2A100CosVz3LVaXsb/JGrYFwYF28vYVCheuzRe5/fxVVHQNeGBwcXFyjg3fuyD3+yluly2M3CvvZuTnONq1nryTZqx56W4Vd+YDIKV0t6482m7LC0e0h2QAmlj1zxeQgdVP2KmBUeHl8kbv6lJ25JUTlknPuxxsemh54curjDz114ynb143f1EaoHqkdyhPNKkXKH+1v4q8Gcm/r0P/Af1Z47OUq7VlJN1mTqWxomJ5b5fkrMzz8iTI9QWEUeGBgYODvRETXFYM/PdX3Hx/d1/aInZyHUoUIqbfqDWeKjSPv1o+7yc3WK16EwmqVF16d44sfFHqCggXOA4+KiK7rqGvPHw9s+eJ0YeLwxYnZg7JzCzYTYpym4h0aeHHK8bcXysmBPekHG//GpSo+SkxajMTZb0TwCmEglMqWF6/M8JHblOPbZsHLT51z3xgaGpqqsWwIeOzOtuKZl5ZOfP2J68/+amLmDtnag2/K4r1Pz8W/nHG8MOkwpg5W61Rq39Sa2eZQaAoF6yAwShgYVosRr4zOcmc+4sv3LIJzF1T1sZGRkbNv++rjweGZHY+fnx4eX5L3yeY8vrUlVeE19zBJ4yANh3Sp3c00HPKNEYwRVgol3nhzgQ/0Wr5yuECzVC+o6nfa29sfPHz4cPSOLo9OPzbRfm2q8P1fXHUfsy0tSL4DzWZStUsXr4FK3c2NUAawlYiF2WUKi0Xu3+v4w90LLmv8Ge/9v3R0dHzzZrh3dP32199++c9/NsqXry6yRVtzmPYWaMpS8/GtQPEeW4koFoqsLpe4s9vz6QMldrctjwLnVfWb586de+b06dP+XV9gfuvfzvdfWej4i8uTcvKVWemLJMBnM5hsBgkDMCaF8s5hqw5biRDvONTnGLi9wl3dq+MZ4y8CI+Vy+dETJ05M/savgJ955pk9VxbaP3WtEN47uRzumV4hv1iWbDFSA0guI3TmlO2blD1dtvzefHVmc1NpFLiqqheBpwYGBsZqUvJbuaNOQDvDMNxtrd0PbBWRvKq2JuqgQFlEloBxVX0JGB0cHFz8P7lEX5dMp0+bo0ePZnK5XMZaG+RyOb+0tFQ9efJk9e1Y6lbP/wA2kHvWfUY55wAAAABJRU5ErkJggg==" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">Tor blocks by destination servers can usually be bypassed using simple <a data-href="/wiki/Tor_Browser#Bypass_Tor_Censorship" href="./Tor_Browser.html" title="Tor Browser">proxies</a>, rather than adding an additional tunnel to Tor.
In order to circumvent state-level censorship of the Tor network, <a data-href="/wiki/Bridges" href="./Bridges.html" title="Bridges">Bridges</a> or other <a data-href="/wiki/Lantern" href="./Lantern.html" title="Lantern">alternative</a> <a data-href="/wiki/Anon_Connection_Wizard" href="./Anon_Connection_Wizard.html" title="Anon Connection Wizard">circumvention</a> <a data-href="/wiki/Censorship_Circumvention_Tools" href="./Censorship_Circumvention_Tools.html" title="Censorship Circumvention Tools">tools</a> will probably be required. <sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup></div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAjCAYAAADmOUiuAAAHT0lEQVRYw82XCVBTVxSGQwyIuMCAwUgQkM2wJAGiAYxSRUFwG0brnjJQqmIEgYJWx22qWJSWCmLB0aqtFpC27uIuYEUtAoJaxLogSAVcEBAVMYXTc5+89BFZFKj2zvyTmfdu3vvy33v+c8NiddOYp6sbf0ksboiTSFL8/f2NLCwsOKz/y7Bjs73KR4+G5xMnwsOxY2G1j8/OwMBAga6uLvuDwyGBVpKFRSGBo5UulT4PDwlZ5OXlpfd6Spff0Xl59OwZVD1uHDybMEGlWm9v+NrT8/yiRYuG8/l8Thff0fkv67BY+pkiURUTjtZlFxfl4sDAtdOnTzfU0ND4MIAB/frF1bUCR2uLm1tRaGiol0Ag0OoKYKeGIYslKHJ1VTL3Hi0CVzd+PNwcPhyW+vom+vn5mWlpab3fglnH46W1BfYU92AN7ssnHh6QLJVWfB4WNlMqleq8NzhbRqyoNGUKvExIgFofH6j29IQqjJtHY8ZAsasrrJwyZS/Gjm3fvn3Z7yNWOMxYoV1rSEoCMupTUuAxgj10d4cHo0ZBhZsbHBaL68JDQxUeHh79uiN22h1jtbSoWGmxpHI5NL54AQ8ePIC/8fPxzJlQ+dFHUD5yJPw1YgQUOzvDV56eZ4ODg114PB7nP8vBXoxYYe612zt2ALY2wDlgZmYG+fHxcB/hymQyKMUlLkHA0zY2ysUKxYqpU6e+a+y8PeCnJFYQjKjWy4vaa7UKBUSuWUPB0ZLPmQOVAQFQ6uICd6VSuDNsGNySSGCjTHYNY8fTyspKq9tjhsTKdWdnJbNCH2MhvCoogCVLlrQAHI8/oD4/H4oR7vbQoXDTyQluODjAOSsr+MLfP97X19dEU1Oze/fi2gED0mjX6AqtWbmSKox4XFIm4MKFC6nr5RER8KejI9wQi+G6SAR/2NvDVrG4LCws7GOJRKLdrbFSinuKco2uUIRUlpVRIJmZmS0At27dSl1vKC2FIlzaQqEQrtnZwRUbG7hgbg7Lp01LnT9/vqB3797sLhcJiZVdZmaFtGsPMf9Ihdaia01NTZSePn0KPXr0UAFevXpVda98/Xq4amsLBQh3ecgQyMNl3m1pWR0eFvaZu7t7vy7vwTEYKxWYZ8xcq8AqbqytBeZwxKUkcHp6etDY2Ki6rqyuhmu4Fy9bW0OupSVcQgezTE3hy3HjzgQFBQ3lcrmcTjtIYuWkQFBFu0bnWl1qqsohWphxFOAEhFe/V7l9O+RgDGUj3EWMofMmJpBqZNQQERS01MfHp3+nY8avT584AkZcu49gJNfKZ8yAplev3oDYs2cPBRgVFfXGvcaGBijA51xA584PGgTn+HzIHDgQ1ru65oeEhLibm5tz3nmJSazkicVK2rV7eDIpwVx7fvYstDZKsSAIYHp6eqv3Hx05AlnGxvBbM1z6gAGwV1+/cUlAQIxcLjfGPcx+pyVebWCQRrtGd4PyBQsoR1ob5LqBgQFUVla2eT9/8mTI4PHgjKEhnOZy4STOj7W1vYux4+Pg4KD91g7aaGh4knigXaO6AeplURG0N7Aq2/wBZNTk5FBwp/r3hxMIdxy1H4tq2YwZu+fOnWvdq1cvdocOklj5ns8vpF2ju0Hl6tVv7C11ZWRkdDjnCrZAAnZcXx+OoY6iEk1MqvDM6Ofm5tanQwfdNTUVt7B3MnvoLXRSiSeV7hjPS0rgBO7BowiZhjqCOoCQq7y9T2AHcsJtwm7TQRIrhwcPripGMGYPfZSY2KEzycnJgCcViIyMBKVS2e7colWrVHCHUYdQ2w0N6yOCgyMmTZqk36aDn+joxBEw4hrpoUXYQ29iByFnvfZeqN7qYmJi2p3/qqYGTmBwH8K9eBB1ALUPISNlshyMHTdTU1NOq7GSZW2tpF0jcKSHPtm/v8Nli46ObgFInOxoFGO/puH2E0DUjyR25s3bMGvWLCM2m81uscTL9fTSaNfok8dN/H/RxGhbbY3c3FzA56kAY2NjO/xOI4b9SVwtArYX9SvGzi/4GS0S3cHYmSwUCrVVS0xiJQ+bOe0affK4gblVf+cOvLx3j1K9uvA0Q2vftm3gj/O3rFsHL8i1+/f/VXn5a1VUqPQMg/0UZuxeBKPgUD+jdmPBLJ09e2dAQICltrY2m/oTlMDlFtKuUScPgUB18lDvoerdgASuKtcY0ZGGYhbBQVKtJPeal5NyDUVcI2CpqD2oFNRGc/NHGDtymUymwxrN4SgKEIp2LZ/AMU4evw8eTPXQrOYeetbISNUNCNjJ5sA91ixmfFBwjEJQwam5RsHh81JQyahdOGfFxImHFQqFiJXE41W06hqCvU/XklFJqJ8QcDdqk7FxXXh4+DzWD1xuGXEtrzOuMeE6cq01OIZrSSgabhcB5PPrIyIioliDWKyhG+zskhIkkgzUxQQnp4vfETk6Zm92cMjeLBZnxxOJRNnxQmH2JiJ7++w4e/scdcUS2dnRytuopm9bKj/G1lalbxiKFgpzlsnl29HB2f8AQvkHoInKWyIAAAAASUVORK5CYII=" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">Using any extra tunnel, for example a VPN, proxy or SSH can can negatively affect anonymity under some circumstances. <sup class="reference" id="cite_ref-3"><a href="#cite_note-3">[3]</a></sup> <sup class="reference" id="cite_ref-4"><a href="#cite_note-4">[4]</a></sup>
To explain why that is, some background information is required so you can draw conclusions and take actions to avoid this risk. See below.</div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">Don't use the same tunnel provider / configuration in more than one place at the same time.<br/>
<p><br/>
</p>
For example, do not use the same tunnel setup inside Whonix-Gateway as well as inside Whonix-Workstation. Also do not use the same tunnel setup on the host and inside a Whonix-Gateway or Whonix-Workstation at the same time.</div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span">Individual tunnel-links should only be used for a single configuration and never reused in any other tunnel-link chains. Doing so could tie any anonymous identities associated with the tunnel-link to the user's ISP assigned IP address.
<p><br/>
Example:
</p><p>In tunnel-chain 1, the ISP assigned IP address is permanently linked to the tunnel-link. In tunnel-chain 2, the same tunnel-link was reused. Since the users ISP assigned IP address was previously linked to that same tunnel-link, that anonymous identity can now be linked to the user actual IP address. 
</p>
<ul><li>Tunnel-chain 1: (<code>User</code> -&gt; <code>Tunnel-link</code>[users IP address is linked] -&gt; <code>Tor</code> -&gt; <code>Internet</code>)</li></ul>
<ul><li>Tunnel-chain 2: (<code>User</code> -&gt; <code>Tor</code> -&gt; <code>Tunnel-link</code>[anonymous activities linked] -&gt; <code>Internet</code>)</li></ul>
The previous example also holds true if the tunnel-link is first used with tunnel-chain 2 and then reused in tunnel-chain 1. If this were done, all anonymous activities conducted with tunnel-chain 2 would then be link with the users ISP assigned IP address.</div></td></tr></tbody></table>
<hr/>
<table class="plainlinks metadata ambox ambox-notice" role="presentation"><tbody><tr><td class="mbox-image"><div style="width:52px"><a class="image" data-href="/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;" href="https://www.whonix.org/w/index.php?title=File:Ambox_warning_pn.svg.png&amp;filetimestamp=20130717200816&amp;"><img alt="Warning" data-src="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/40px-Ambox_warning_pn.svg.png" data-srcset="/w/images/thumb/f/f7/Ambox_warning_pn.svg.png/60px-Ambox_warning_pn.svg.png 1.5x, /w/images/thumb/f/f7/Ambox_warning_pn.svg.png/80px-Ambox_warning_pn.svg.png 2x" height="35" src="data:image/png;base64,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" width="40"/></a></div></td><td class="mbox-text"><div class="mbox-text-span"><a class="mw-redirect" data-href="/wiki/Qubes-Whonix" href="./Qubes-Whonix.html" title="Qubes-Whonix">Qubes-Whonix</a> users note:<br/>
<p>You probably do not want to run the tunnel software from within a TemplateVM. This is because the <code>whonix-gw-14</code> TemplateVM "is more like a workstation". It is behind <code>sys-whonix</code>. It is not <code>sys-whonix</code> itself.<br/>
<br/>
(If you are using <code>openvpn</code> inside Whonix-Gateway (commonly called <code>sys-whonix</code>) or Whonix-Workstation (commonly called <code>anon-whonix</code>) while following Whonix documentation, <code>openvpn</code> will not start inside the <code>whonix-gw-14</code> or <code>whonix-ws-14</code> TemplateVM.) <sup class="reference" id="cite_ref-5"><a href="#cite_note-5">[5]</a></sup>
<br/>
</p>
In Qubes R4 and above, the <a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1858" href="https://github.com/QubesOS/qubes-issues/issues/1858" rel="noreferrer noopener" target="_blank">TemplateVMs's NetVM is purposely set to <code>none</code> by Qubes default</a>. (They are upgraded through the qrexec based updates proxy that will be running on <code>sys-whonix</code>.)</div></td></tr></tbody></table>
<h2><span class="mw-headline" id="Challenges_in_Provider_Location_Selection">Challenges in Provider Location Selection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=5.html" title="Edit section: Challenges in Provider Location Selection">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Selecting a provider location presents unique challenges that must be accounted for when chaining tunnel-links with Tor. 
</p>
<ul><li>Tor avoids using more than one relay belonging to the same operator when building circuits. Legitimate Tor relay operators adhere to Tor's relay operator practices of announcing which relays belong to them by declaring this in the Tor relay family setting. Tor also avoids using Tor relays that are within the same network by not using relays within the same /16 subnet. <sup class="reference" id="cite_ref-6"><a href="#cite_note-6">[6]</a></sup> Tor however does not take into account your real external IP nor destination IP addresses. <sup class="reference" id="cite_ref-7"><a href="#cite_note-7">[7]</a></sup> In essence, you must avoid using the same network/operator as your first and last Tor relays since this would open up <a data-href="/wiki/Warning#Confirmation_attacks" href="./Warning.html" title="Warning">end-to-end correlation attacks</a>.</li>
<li>Many tunnel providers use shared IP addresses which means that many users share the same external IP address. On one hand this is good since that is similar to Tor, where many users share the same Tor exit relays. On the other hand, this can in some situations lead to actually making you less safe.</li>
<li>It is possible to host Tor relays [any... bridges, entry, middle or exit] behind VPNs or tunnel-links. For example, there are VPN providers that support VPN port forwarding. This is an interesting way to contribute to Tor while not exposing oneself to too much legal risk. However, in certain situations it is possible a VPN or other tunnel-link and a Tor relay could be hosted by the same operator, in the same network or even on the same IP.</li>
<li>In an economy with a deep labor division, there are those that provide the service to host servers (VPS etc.). While others provide VPN and other tunnel-link services and rent such servers. It is common that diverse customers run and/or share the same IP address. This is another situation where a VPN or other tunnel-link and a Tor relays could be hosted by the same operator, in the same network or even on the same IP.</li>
<li>By adding arbitrary tunnel-links to your connection chain, you could unknowingly use the same operator/network twice in your connection chain.
<ul><li>Scenario 1)
<ul><li>a) User uses VPN IP A on the host, thereby using it as it is first relay.</li>
<li>b) User's Tor client happens to pick a Tor exit relay running on VPN IP A.
<ul><li>Conditions a and b match at the same time. The user is now using the same IP address as first and last proxy.</li>
<li>--&gt; By using the VPN the user did not get more, but less secure.</li></ul></li></ul></li>
<li>Scenario 2)
<ul><li>a) User sets up a VPN inside Whonix-Workstation. This configuration results in <code>User</code> -&gt; <code>Tor</code> -&gt; <code>VPN</code> -&gt; <code>Internet</code>. Using VPN IP A.</li>
<li>b) A Tor entry guard is being hosted on VPN IP A.
<ul><li>Conditions a and b match at the same time. The user is now using the same IP as first and last proxy.</li>
<li>--&gt; By using the VPN the user did not get more, but less secure.</li></ul></li></ul></li></ul></li>
<li>Choose your tunnel providers wisely.
<ul><li>Find out in which physical and legal jurisdiction and network their servers are located.</li>
<li>Perhaps avoid using VPN or SSH providers that support port forwarding.</li>
<li>Perhaps use only tunnel-link providers that are assigning private - as in not shared with others - unique - IP addresses. However, it is not clear if this does more harm than gain as noted above.</li>
<li>Perhaps use tunnel-link providers that run their own servers rather than relying on shared infrastructure.</li></ul></li>
<li>Perhaps manually pick your Tor relay[s]. Specifically your entry guard[s] or <a data-href="/wiki/Bridges" href="./Bridges.html" title="Bridges">bridge[s]</a>).
<ul><li>Tor documentation generally discourages tampering with Tor's routing algorithm by manually choosing your relays, but since you are trying to be clever by extending your Tor chain despite of all the information regarding the difficulty of this endeavor, perhaps it would make sense to pick your entry guard manually.</li>
<li>Using <a data-href="/wiki/Bridges" href="./Bridges.html" title="Bridges">Bridges</a> might be an alternative, but note the following quote. "<i>Bridges are less reliable and tend to have lower performance than other entry points. If you live in a uncensored area, they are not necessarily more secure than entry guards.</i> <i>Source: <a class="external text" data-href="https://lists.torproject.org/pipermail/tor-talk/2012-May/024378.html" href="https://lists.torproject.org/pipermail/tor-talk/2012-May/024378.html" rel="noreferrer noopener" target="_blank">bridge vs non-bridge users anonymity</a>.</i>"</li></ul></li></ul>
<h1><span class="mw-headline" id="VPN_Configuration_Options">VPN Configuration Options</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=6.html" title="Edit section: VPN Configuration Options">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=7.html" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a class="mw-redirect" data-href="/wiki/Qubes-Whonix" href="./Qubes-Whonix.html" title="Qubes-Whonix">Qubes-Whonix</a> users have the option to use a <a href="#Separate_VPN-Gateway">#Separate VPN-Gateway</a> but could also install the VPN software <a href="#Inside_Whonix-Gateway">#Inside Whonix-Gateway</a>.</li>
<li><a data-href="/wiki/Non-Qubes-Whonix" href="./Non-Qubes-Whonix.html" title="Non-Qubes-Whonix">Non-Qubes-Whonix</a> users could install the VPN software <a href="#On_the_Host">#On the Host</a> or <a href="#Inside_Whonix-Gateway">#Inside Whonix-Gateway</a>.</li></ul>
<p><br/>
</p><p>What's the difference of installing a VPN on the host versus installing on Whonix-Gateway?
</p>
<table class="wikitable" style="background-color: #fff;text-align: center">
<tbody><tr>
<th>
</th>
<th>VPN Installed on the Host
</th>
<th>VPN Installed on Whonix-Gateway
</th>
<th>VPN Installed on <u>both</u> the Host and Whonix-Gateway
</th></tr>
<tr>
<th>All Whonix Traffic Routing
</th>
<td>User -&gt; Host's VPN -&gt; Tor -&gt; Internet
</td>
<td>User -&gt; Gateway's VPN -&gt; Tor -&gt; Internet
</td>
<td>User -&gt; Host's VPN -&gt; Gateway's VPN -&gt; Tor -&gt; Internet
</td></tr>
<tr>
<th>All Host Traffic Routing
</th>
<td>User -&gt; Host's VPN -&gt; Internet
</td>
<td>User -&gt; Internet
</td>
<td>User -&gt; Host's VPN -&gt; Internet
</td></tr>
<tr>
<th>Whonix-Gateway Compromise
</th>
<td>Host's VPN Affords Protection
</td>
<td>Nil Protection
</td>
<td>Host's VPN Affords Protection
</td></tr>
</tbody></table>
<p>To decide the best configuration in your circumstances, consider:
</p>
<ul><li>Is it necessary to hide <i>all traffic</i> from the ISP? <sup class="reference" id="cite_ref-all-traffic_8-0"><a href="#cite_note-all-traffic-8">[8]</a></sup> Then install the VPN on the host.</li>
<li>Should the VPN provider be able to see <i>all traffic</i>? <sup class="reference" id="cite_ref-all-traffic_8-1"><a href="#cite_note-all-traffic-8">[8]</a></sup> Then install the VPN on the host.</li>
<li>Should the VPN provider be limited to seeing <i>Tor traffic</i>, but not <i>clearnet traffic</i>? Then install the VPN on Whonix-Gateway.</li></ul>
<h2><span class="mw-headline" id="VPN_Client_Choice">VPN Client Choice</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=8.html" title="Edit section: VPN Client Choice">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Use OpenVPN.</li>
<li>Using bitmask with Qubes is not yet documented.<sup class="reference" id="cite_ref-9"><a href="#cite_note-9">[9]</a></sup></li>
<li>Other VPN clients are unsupported. We are not aware of any sane VPN client choices besides OpenVPN.</li></ul>
<hr/>
<h2><span class="mw-headline" id="Separate_VPN-Gateway">Separate VPN-Gateway</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=9.html" title="Edit section: Separate VPN-Gateway">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a class="mw-redirect" data-href="/wiki/Qubes-Whonix" href="./Qubes-Whonix.html" title="Qubes-Whonix">Qubes-Whonix</a> only! <a data-href="/wiki/Non-Qubes-Whonix" href="./Non-Qubes-Whonix.html" title="Non-Qubes-Whonix">Non-Qubes-Whonix</a> is <a data-href="/wiki/Unsupported" href="./Unsupported.html" title="Unsupported">unsupported</a>!
</p><p>A separate VPN-Gateway between Whonix-Gateway and sys-firewall, i.e. Whonix-Workstation -&gt; Whonix-Gateway -&gt; sys-vpn -&gt; sys-firewall -&gt; sys-net.
</p><p><b>User -&gt; VPN -&gt; Tor -&gt; Internet </b>
</p><p>These "Separate VPN-Gateway" instructions are new. You might be one of the first users. You might run into minor issues. Please test and <a class="external text" data-href="https://forums.whonix.org" href="https://forums.whonix.org" rel="noreferrer noopener" target="_blank">report</a> how it went.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><b>1.</b> Clone a TemplateVM for example, debian-9 and name the new template clone debian-9-vpn. <sup class="reference" id="cite_ref-10"><a href="#cite_note-10">[10]</a></sup>
</p><p><code>Qube Manager</code> -&gt; <code>debian-9</code> -&gt; <code><u>C</u>lone qube</code> -&gt; <i><code>Enter name for Qube clone:</code></i><code> debian-9-vpn</code> -&gt; <code>Press: OK</code>
</p><p><b>2.</b> Create a new ProxyVM based on the newly cloned template. Name the VM <code>sys-vpn</code> and set <code>sys-firewall</code> as NetVM. Make sure to check [â] the box for provides_network.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><code>Qube Manager</code> -&gt; <code><u>Q</u>ube</code> -&gt; <code>Create <u>n</u>ew qube</code>
</p>
<ul><li>Name and label: <code>sys-vpn</code> (Set any color)</li>
<li>Type: <code>AppVM</code></li>
<li>Template: <code>debian-9-vpn</code></li>
<li>Networking: <code>sys-firewall</code></li>
<li>Advanced:   [<code>â</code>] Provides network</li>
<li>Press: <code>OK</code></li></ul>
</div>
<p><b>3.</b> Setup the VPN-Gateway as per <a class="external text" data-href="https://www.qubes-os.org/doc/vpn/" href="https://www.qubes-os.org/doc/vpn/" rel="noreferrer noopener" target="_blank">Qubes VPN documentation</a>.  The instructions to configure the <a class="external text" data-href="https://qubes-os.org/doc/vpn/#set-up-a-proxyvm-as-a-vpn-gateway-using-iptables-and-cli-scripts" href="https://qubes-os.org/doc/vpn/" rel="noreferrer noopener" target="_blank">VPN gateway using iptables and CLI scripts</a> is preferred to prevent clearnet leaks when the VPN breaks down. 
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p>When a failed closed configuration is used and the VPN connection breaks down, all traffic originating from Whonix-Gateway (commonly called <code>sys-whonix</code>) would <u>only</u> be forced through Tor. This is what you want if you are reading this documentation chapter.
</p><p><b>User -&gt; Tor -&gt; Internet</b>
</p><p>If a failed closed configuration is not used, network traffic (such as DNS queries) could leak through the VPN tunnel to the Internet when the tunnel connection breaks down.
</p><p><b>User -&gt; VPN</b>(<u>clearnet leaks!</u>) <b>-&gt; Tor -&gt; Internet</b>
</p>
</div>
<p><b>4.</b> Check, that your <code>sys-vpn</code> is fully functional. Test connectivity from inside the <code>sys-vpn</code> as per:
<a class="external text" data-href="https://qubes-os.org/doc/vpn/" href="https://qubes-os.org/doc/vpn/" rel="noreferrer noopener" target="_blank">Qubes VPN Documentation</a>
</p>
</div>
<p><u>Note:</u> Both TCP and UDP VPN connections should work. System DNS should work out of the box so no DNS configuration is required for Whonix-Gateway.<sup class="reference" id="cite_ref-11"><a href="#cite_note-11">[11]</a></sup>
</p><p>Done!
</p><p>For troubleshooting, see footnote. <sup class="reference" id="cite_ref-12"><a href="#cite_note-12">[12]</a></sup>
</p>
<h2><span class="mw-headline" id="On_the_Host">On the Host</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=10" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=10.html" title="Edit section: On the Host">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a data-href="/wiki/Non-Qubes-Whonix" href="./Non-Qubes-Whonix.html" title="Non-Qubes-Whonix">Non-Qubes-Whonix</a> only! (Because in Qubes, the host is non-networked by default. <a class="mw-redirect" data-href="/wiki/Qubes-Whonix" href="./Qubes-Whonix.html" title="Qubes-Whonix">Qubes-Whonix</a> users have the option to use a <a href="#Separate_VPN-Gateway">#Separate VPN-Gateway</a> but could also install the VPN software <a href="#Inside_Whonix-Gateway">#Inside Whonix-Gateway</a>.)
</p><p><b>User -&gt; VPN -&gt; Tor -&gt; Internet </b>
</p><p>When using a Whonix-Gateway virtual machine, connect to a VPN using software on the host operating system (and not on the Whonix-Workstation nor Whonix-Gateway).
</p><p>Using software inside the host operating system may be more convenient if your more familiar with the host operating system than Whonix. Additionally, your VPN provider might provide custom software with tools for connecting to their servers. However, there are issues that you must consider:
</p>
<ul><li>A VPN on the host operating system will route all traffic originating from the host through the VPN, as well as Whonix's traffic. It is up to your preferences, if you like this or not.</li>
<li>Your VPN software may not be designed or configured to "fail closed". That is, if your VPN session suddenly disconnects, your Tor connection will be automatically sent through your ISP without going through your VPN service.</li></ul>
<h4><span class="mw-headline" id="How_to_add_the_VPN_in_Host_OS">How to add the VPN in Host OS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=11" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=11.html" title="Edit section: How to add the VPN in Host OS">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Use the host operating system's built-in tools connect to your VPN or use the software provided by your VPN service.
</p><p><span id="Fail_Closed_Mechanism"></span>
</p>
<h4><span class="mw-headline" id="Use_a_Fail_Closed_Mechanism">Use a Fail Closed Mechanism</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=12" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=12.html" title="Edit section: Use a Fail Closed Mechanism">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>A general problem with VPNs is that connections often fail to remain open. This means the VPN connection suddenly closes, leaving the user directly connected to the Internet (without first tunneling through the VPN). This is not a Whonix-specific problem. VPN servers and software can occasionally fail without prior notice. Therefore, if the VPN is unreachable or the connection breaks down for whatever reason, in most cases the user will continue to connect to the Internet without the VPN.
</p><p>One of the key benefits of Whonix is that when a VPN connection fails, protection is still provided by the Tor process. In this instance, the Whonix-Workstation will seamlessly continue to make "direct" connections through Tor. Failure of the VPN tunnel may be inconsequential if a VPN is only used to circumvent Tor censorship. On the other hand, if VPN use is intended to improve security, then it must be configured so that if/when the VPN connection fails, all connections between the outside world and the computer are halted.
</p><p>If you want to enforce, that the VPN always gets used, try <a class="external text" data-href="https://github.com/adrelanos/VPN-Firewall" href="https://github.com/adrelanos/VPN-Firewall" rel="noreferrer noopener" target="_blank">VPN-Firewall</a>.
</p><p>(Or if that works for you, install the VPN on the gateway instead, because it comes with an integrated TUNNEL_FIREWALL feature, i.e. stay away from the standalone VPN-Firewall when you set up a VPN on the gateway.)
</p>
<hr/>
<p><span id="VPN_Software_on_Whonix-Gateway"></span>
</p>
<h2><span class="mw-headline" id="Inside_Whonix-Gateway">Inside Whonix-Gateway</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=13" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=13.html" title="Edit section: Inside Whonix-Gateway">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Whonix-Gateway can be configured to connect to a VPN server before Tor, as well as "fail closed", blocking all Tor traffic if the VPN disconnects. 
</p><p><b>User -&gt; VPN -&gt; Tor -&gt; Internet</b>
</p>
<h5><span class="mw-headline" id="VPN_Client_Choice_2">VPN Client Choice</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=14" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=14.html" title="Edit section: VPN Client Choice">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Use OpenVPN.
</p><p>Using bitmask inside Whonix-Gateway for this use case is <a data-href="/wiki/Unsupported" href="./Unsupported.html" title="Unsupported">unsupported</a>. And discouraged. Because bitmask modifies the firewall. Perhaps that can be configured or is safe. Reaching that and documenting bitmask is TODO, <a class="external text" data-href="https://phabricator.whonix.org/T516" href="https://phabricator.whonix.org/T516" rel="noreferrer noopener" target="_blank">help welcome</a>!
</p><p>Other VPN clients are <a data-href="/wiki/Unsupported" href="./Unsupported.html" title="Unsupported">unsupported</a>. We are not aware of any sane VPN client choices besides OpenVPN.
</p>
<h5><span class="mw-headline" id="Whonix_TUNNEL_FIREWALL_vs_standalone_VPN-Firewall">Whonix TUNNEL_FIREWALL vs standalone VPN-Firewall</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=15" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=15.html" title="Edit section: Whonix TUNNEL FIREWALL vs standalone VPN-Firewall">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>When applying VPN instructions inside Whonix VMs, <b>do not</b> use the standalone VPN-Firewall. It is not required and is incompatible with the integrated Whonix TUNNEL_FIREWALL feature which is documented below.
</p>
<h5><span class="mw-headline" id="Setup_Time">Setup Time</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=16" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=16.html" title="Edit section: Setup Time">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>If you are interested in <a data-href="/wiki/Hide_Tor_and_Whonix_from_your_ISP" href="./Hide_Tor_and_Whonix_from_your_ISP.html" title="Hide Tor and Whonix from your ISP">Hide Tor and Whonix from your ISP</a> (read that page first)... After installing Whonix-Gateway, do the following steps before activating Tor in <span style="border:1px dotted #005cb9">Whonix Setup Wizard</span>.
</p>
<h5><span class="mw-headline" id="Preparation">Preparation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=17" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=17.html" title="Edit section: Preparation">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>It is challenging to set up OpenVPN on Whonix with a secure, leak preventing <a href="#Fail_Closed_Mechanism">Fail Closed Mechanism</a>. For this reason, it is strongly recommended to learn how to set up OpenVPN on Debian stable (currently stretch). The following steps are a simple overview of the process:
</p>
<ol><li>Prepare a Debian stable VM.</li>
<li>Install the Debian OpenVPN package: <i>sudo apt-get install openvpn</i></li>
<li>Research how to set up a VPN using OpenVPN on the command line. <sup class="reference" id="cite_ref-13"><a href="#cite_note-13">[13]</a></sup></li>
<li>Search for help with general VPN setup in the <a href="#VPN_Setup">#VPN Setup</a> chapter or on the <a class="mw-redirect" data-href="/wiki/TestVPN" href="./TestVPN.html" title="TestVPN">TestVPN</a> page. <a data-href="/wiki/Support" href="./Support.html" title="Support">Help</a> is available from various sources, and the VPN provider may also be of assistance.</li></ol>
<p>Whonix 12 users may recall the variable VPN_SERVERS; it has been abolished for better security. <sup class="reference" id="cite_ref-14"><a href="#cite_note-14">[14]</a></sup>
</p>
<h5><span class="mw-headline" id="Firewall_Settings">Firewall Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=18" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=18.html" title="Edit section: Firewall Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p><b>Modify Whonix User Firewall Settings</b>
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><b>Note</b>: If no changes have yet been made to Whonix Firewall Settings, then the Whonix User Firewall Settings File <i><span style="background-color:#FBFBFB">/etc/whonix_firewall.d/50_user.conf</span></i> appears empty (because it does not exist). This is expected.
</p><p><u>If using <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u>, complete these steps.
</p><p><code>Qubes App Launcher (blue/grey "Q")</code> -&gt; <code>Template:</code> <code>whonix-gw-14</code> -&gt; <code>Whonix User Firewall Settings</code>
</p><p><u>If using a graphical Whonix-Gateway</u>, complete these steps.
</p><p><code>Start Menu</code> -&gt; <code>Applications</code> -&gt; <code>Settings</code> -&gt; <code>User Firewall Settings</code>
</p><p><u>If using a terminal-only Whonix-Gateway</u>, complete these steps.
</p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/whonix_firewall.d/50_user.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/whonix_firewall.d/50_user.conf</textarea>
</div>
</div>
<div class="toccolours mw-collapsible mw-collapsed">
<p>For more help, press on Expand on the right.
</p>
<div class="mw-collapsible-content">
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><b>Note</b>: The Whonix Global Firewall Settings File <i><span style="background-color:#FBFBFB">/etc/whonix_firewall.d/30_default.conf</span></i> contains default settings and explanatory comments about their purpose. By default, the file is opened read-only and is not meant to be directly edited. Below, it is recommended to open the file without root rights. The file contains an explanatory comment on how to change firewall settings.
</p>
<pre>## Please use "/etc/whonix_firewall.d/50_user.conf" for your custom configuration,
## which will override the defaults found here. When Whonix is updated, this
## file may be overwritten.
</pre>
<p>See also <a data-href="/wiki/Whonix_Configuration_Files" href="./Whonix_Configuration_Files.html" title="Whonix Configuration Files">Whonix modular flexible .d style configuration folders</a>.
</p><p>To view the file, follow these instructions.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If using <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u>, complete these steps.
</p><p><code>Qubes App Launcher (blue/grey "Q")</code> -&gt; <code>Template:</code> <code>whonix-gw-14</code> -&gt; <code>Whonix Global Firewall Settings</code>
</p><p><u>If using a graphical Whonix-Gateway</u>, complete these steps.
</p><p><code>Start Menu</code> -&gt; <code>Applications</code> -&gt; <code>Settings</code> -&gt; <code>Global Firewall Settings</code>
</p><p><u>If using a terminal-only Whonix-Gateway</u>, complete these steps.
</p><div class="codeContainerNew">
<div class="preDiv">
<pre>nano /etc/whonix_firewall.d/30_default.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">nano /etc/whonix_firewall.d/30_default.conf</textarea>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Add the following settings. You can skip comments (starting with <span style="border:1px dotted #005cb9">#</span>). Don't use <span style="border:1px dotted #005cb9">;</span> for comments. <sup class="reference" id="cite_ref-15"><a href="#cite_note-15">[15]</a></sup> Likely you do not need to either uncomment (removing the <span style="border:1px dotted #005cb9">#</span> in front) or modify <span style="border:1px dotted #005cb9">VPN_INTERFACE</span> / <span style="border:1px dotted #005cb9">LOCAL_NET</span>.
</p>
<pre>## Make sure Tor always connects through the VPN.
## Enable: 1
## Disable: 0
## DISABELD BY DEFAULT, because it requires a VPN provider.
VPN_FIREWALL=1

## For OpenVPN.
#VPN_INTERFACE=tun0

## Destinations you don not want routed through the VPN.
## 10.0.2.2-10.0.2.24: VirtualBox DHCP
#      LOCAL_NET="\
#         127.0.0.0-127.0.0.24 \
#         192.168.0.0-192.168.0.24 \
#         192.168.1.0-192.168.1.24 \
#         10.152.152.0-10.152.152.24 \
#         10.0.2.2-10.0.2.24 \
#      "
</pre>
<p>Save.
</p>
<h5><span class="mw-headline" id="Reload_Firewall">Reload Firewall</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=19" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=19.html" title="Edit section: Reload Firewall">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Reload Whonix-Gateway Firewall.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u>, complete the following steps.
</p><p><code>Qubes App Launcher (blue/grey "Q")</code> -&gt; <code>Whonix-Gateway ProxyVM (commonly named sys-whonix)</code> -&gt; <code>Reload Whonix Firewall</code>
</p><p><u>If you are using a graphical Whonix-Gateway</u>, complete the following steps.
</p><p><code>Start Menu</code> -&gt; <code>Applications</code> -&gt; <code>System</code> -&gt; <code>Reload Whonix Firewall</code>
</p><p><u>If you are using a terminal-only Whonix-Gateway</u>, run.
</p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo whonix_firewall</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo whonix_firewall</textarea>
</div>
</div>
</div>
<h5><span class="mw-headline" id="sudoers_configuration">sudoers configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=20" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=20.html" title="Edit section: sudoers configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Open <i><span style="background-color:#FBFBFB">/etc/sudoers.d/tunnel_unpriv</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/sudoers.d/tunnel_unpriv</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/sudoers.d/tunnel_unpriv</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/sudoers.d/tunnel_unpriv</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/sudoers.d/tunnel_unpriv</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/sudoers.d/tunnel_unpriv</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/sudoers.d/tunnel_unpriv</textarea>
</div>
</div>
</div>
<p>Comment in the following and remove the single hashes (<i><span style="background-color:#FBFBFB">#</span></i>) in front of all lines, but do not remove the double hashes (<i><span style="background-color:#FBFBFB">##</span></i>). The edited file should look like this.
</p>
<pre>tunnel ALL=(ALL) NOPASSWD: /bin/ip
tunnel ALL=(ALL) NOPASSWD: /usr/sbin/openvpn *
Defaults:tunnelÂ !requiretty
</pre>
<p>Save and exit.
</p>
<h5><span class="mw-headline" id="VPN_Setup">VPN Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=21" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=21.html" title="Edit section: VPN Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<h6><span class="mw-headline" id="Introduction_3">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=22" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=22.html" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>The following example uses the free Riseup VPN, because it is known to support TCP, UDP and SSL. However, any preferred VPN can be used.
</p><p>Update: The Riseup "legacy" VPN may have been discontinued, as it no longer works for the author of these instructions. The Riseup replacement service (Bitmask) has not been tested.
</p>
<h6><span class="mw-headline" id="Get_VPN_Certificate">Get VPN Certificate</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=23" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=23.html" title="Edit section: Get VPN Certificate">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>TODO: Documentation bug fix required. Won't work without Tor being enabled. You need to get the certificate elsewhere and then <a data-href="/wiki/File_Transfer" href="./File_Transfer.html" title="File Transfer">File Transfer</a> it into Whonix-Gateway.
</p><p>Look at the <a class="external text" data-href="https://help.riseup.net/vpn" href="https://help.riseup.net/vpn" rel="noreferrer noopener" target="_blank">riseup VPN help page</a> for <a class="external text" data-href="https://help.riseup.net/en/riseup-ca" href="https://help.riseup.net/en/riseup-ca" rel="noreferrer noopener" target="_blank"><code>RiseupCA.pem</code></a> and (right-click) <a class="external text" data-href="https://help.riseup.net/security/network-security/riseup-ca/RiseupCA.pem" href="https://help.riseup.net/security/network-security/riseup-ca/RiseupCA.pem" rel="noreferrer noopener" target="_blank">download</a> it. Store the certificate in <i><span style="background-color:#FBFBFB">/etc/openvpn/RiseupCA.pem</span></i>
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>curl --tlsv1.2 --proto =https https://help.riseup.net/security/network-security/riseup-ca/RiseupCA.pem | sudo tee /etc/openvpn/RiseupCA.pem</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">curl --tlsv1.2 --proto =https https://help.riseup.net/security/network-security/riseup-ca/RiseupCA.pem | sudo tee /etc/openvpn/RiseupCA.pem</textarea>
</div>
</div>
<h6><span class="mw-headline" id="VPN_Credentials">VPN Credentials</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=24" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=24.html" title="Edit section: VPN Credentials">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>For this step, a riseup.net account and Riseup account name is required. Go to <a class="external free" data-href="https://user.riseup.net/users/riseupusername/vpn" href="https://user.riseup.net/users/riseupusername/vpn" rel="noreferrer noopener" target="_blank">https://user.riseup.net/users/riseupusername/vpn</a> to obtain a VPN secret (VPN password). Below, replace "riseupusername" with the actual riseup user name, or just go to <a class="external free" data-href="https://user.riseup.net" href="https://user.riseup.net" rel="noreferrer noopener" target="_blank">https://user.riseup.net</a>, login and click on "VPN". 
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/openvpn/auth.txt</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/openvpn/auth.txt</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/openvpn/auth.txt</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/openvpn/auth.txt</textarea>
</div>
</div>
</div>
<p>Add the <i>actual</i> user name and password.
</p>
<pre>riseupusername
vpnsecret
</pre>
<p>Save and exit.
</p>
<h6><span class="mw-headline" id="VPN_Credentials_2">VPN Credentials</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=25" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=25.html" title="Edit section: VPN Credentials">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>For this step, a riseup.net account and Riseup account name is required. Go to <a class="external free" data-href="https://user.riseup.net/users/riseupusername/vpn" href="https://user.riseup.net/users/riseupusername/vpn" rel="noreferrer noopener" target="_blank">https://user.riseup.net/users/riseupusername/vpn</a> to obtain a VPN secret (VPN password). Below, replace "riseupusername" with the actual riseup user name, or just go to <a class="external free" data-href="https://user.riseup.net" href="https://user.riseup.net" rel="noreferrer noopener" target="_blank">https://user.riseup.net</a>, login and click on "VPN". 
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/openvpn/auth.txt</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/openvpn/auth.txt</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/openvpn/auth.txt</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/openvpn/auth.txt</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/openvpn/auth.txt</textarea>
</div>
</div>
</div>
<p>Add the <i>actual</i> user name and password.
</p>
<pre>riseupusername
vpnsecret
</pre>
<p>Save and exit.
</p>
<h6><span class="mw-headline" id="VPN_IP_Address">VPN IP Address</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=26" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=26.html" title="Edit section: VPN IP Address">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>When editing the VPN configuration file the use of DNS hostnames is not supported. This means IP address(s) of the VPN must be used.<sup class="reference" id="cite_ref-16"><a href="#cite_note-16">[16]</a></sup>  Therefore, <i><span style="background-color:#FBFBFB">vpn.riseup.net</span></i> cannot be used, but an IP address such as <i><span style="background-color:#FBFBFB">198.252.153.226</span></i> should be used instead. To discover the IP address, check with the provider or use nslookup on the host. For example, to verify the actual IP address of the <i><span style="background-color:#FBFBFB">vpn.riseup.net</span></i> DNS server, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>nslookup vpn.riseup.net</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">nslookup vpn.riseup.net</textarea>
</div>
</div>
<h6><span class="mw-headline" id="VPN_Configuration_File">VPN Configuration File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=27" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=27.html" title="Edit section: VPN Configuration File">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Open <i><span style="background-color:#FBFBFB">/etc/openvpn/openvpn.conf</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/openvpn/openvpn.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/openvpn/openvpn.conf</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/openvpn/openvpn.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/openvpn/openvpn.conf</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/openvpn/openvpn.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/openvpn/openvpn.conf</textarea>
</div>
</div>
</div>
<p>Add.
</p><p>Note: make sure to adjust the <span style="border:1px dotted #005cb9">remote 198.252.153.226 80</span> variable in your config (unless you are using <span style="border:1px dotted #005cb9">nyc.vpn.riseup.net</span> as your VPN service). Replace the IP (<span style="border:1px dotted #005cb9">198.252.153.226</span>) and port (<span style="border:1px dotted #005cb9">80</span>) to match your VPN service.
</p>
<pre>##############################
## VPN provider specific settings ##
##############################
auth-user-pass auth.txt

## using nyc.vpn.riseup.net 80
remote 198.252.153.226 80

ca RiseupCA.pem

remote-cert-tls server

####################################
## TUNNEL_FIREWALL specific settings ##
####################################
client
dev tun0
persist-tun
persist-key

script-security 2
#up "/etc/openvpn/update-resolv-conf script_type=up dev=tun0"
#down "/etc/openvpn/update-resolv-conf script_type=down dev=tun0"

user tunnel
iproute /usr/bin/ip_unpriv
</pre>
<p>Do not worry about TCP mode on Whonix-Gateway. Using the VPN in TCP mode may be possible depending the services provides by your VPN provider, but is not required on Whonix-Gateway. The VPN in UDP mode should work just fine. <sup class="reference" id="cite_ref-17"><a href="#cite_note-17">[17]</a></sup> Your pick.
</p><p><sup class="reference" id="cite_ref-18"><a href="#cite_note-18">[18]</a></sup> <sup class="reference" id="cite_ref-19"><a href="#cite_note-19">[19]</a></sup>
</p><p>Save.
</p>
<h6><span class="mw-headline" id="DNS_Configuration">DNS Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=28" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=28.html" title="Edit section: DNS Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>DNS configuration, resolvconf, update-resolv-conf or similar is not required for Whonix-Gateway. <sup class="reference" id="cite_ref-20"><a href="#cite_note-20">[20]</a></sup>
</p>
<h6><span class="mw-headline" id="Configuration_Folder_Permissions">Configuration Folder Permissions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=29" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=29.html" title="Edit section: Configuration Folder Permissions">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Since OpenVPN will be run under user <i>tunnel</i>, that user requires read access to the folder <i>/etc/openvpn</i>.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo chown -R tunnel:tunnel /etc/openvpn</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo chown -R tunnel:tunnel /etc/openvpn</textarea>
</div>
</div>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo chown -R tunnel:tunnel /var/run/openvpn</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo chown -R tunnel:tunnel /var/run/openvpn</textarea>
</div>
</div>
<h5><span class="mw-headline" id="systemd_setup">systemd setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=30" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=30.html" title="Edit section: systemd setup">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Create the OpenVPN systemd service file.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo cp /lib/systemd/system/openvpn@.service /lib/systemd/system/openvpn@openvpn.service</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo cp /lib/systemd/system/openvpn@.service /lib/systemd/system/openvpn@openvpn.service</textarea>
</div>
</div>
<p>Enable the OpenVPN systemd service file.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo systemctl enable openvpn@openvpn</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo systemctl enable openvpn@openvpn</textarea>
</div>
</div>
<p>Start the OpenVPN systemd service.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo systemctl start openvpn@openvpn</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo systemctl start openvpn@openvpn</textarea>
</div>
</div>
<p>Check the OpenVPN systemd service status.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo systemctl status openvpn@openvpn</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo systemctl status openvpn@openvpn</textarea>
</div>
</div>
<h5><span class="mw-headline" id="Enable_Tor">Enable Tor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=31" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=31.html" title="Edit section: Enable Tor">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Enable Tor using Whonix Setup Wizard.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u>, complete the following steps.
</p><p><code>Qubes App Launcher (blue/grey "Q")</code> -&gt; <code>Whonix-Gateway ProxyVM (commonly named 'sys-whonix')</code> -&gt; <code>Whonix Setup</code>
</p><p><u>If you are using a graphical Whonix-Gateway</u>, complete the following steps.
</p><p><code>Start Menu</code> -&gt; <code>Applications</code> -&gt; <code>System</code> -&gt; <code>Whonix Setup Wizard</code>
</p><p><u>If you are using a terminal-only Whonix-Gateway</u>, complete the following steps.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo whonixsetup</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo whonixsetup</textarea>
</div>
</div>
</div>
<h5><span class="mw-headline" id="Troubleshooting">Troubleshooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=32" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=32.html" title="Edit section: Troubleshooting">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>You can skip this troubleshooting chapter unless any difficulties are encountered.
</p>
<h6><span class="mw-headline" id="ip_unpriv_vs_ip-unpriv">ip_unpriv vs  ip-unpriv</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-1" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-1.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>There are two similar, yet distinct projects: standalone VPN-FIREWALL and Whonix TUNNEL_FIREWALL. Although both are alike, there is one difference that might be encountered. For instance, in chapter <a href="#VPN_Configuration_File">#VPN Configuration File</a>:
</p>
<ul><li>Whonix TUNNEL_FIREWALL uses <i><span style="background-color:#FBFBFB">ip<b>_</b>unpriv</span></i> (underscore)</li>
<li>Standalone VPN-FIREWALL uses <i><span style="background-color:#FBFBFB">ip<b>-</b>unpriv</span></i> (hyphen)</li></ul>
<p><br/>
Be sure to use the right version of ip unpriv according to whether the VPN-FIREWALL or Whonix TUNNEL_FIREWALL project is being used.
</p>
<h6><span class="mw-headline" id="50_openvpn_unpriv.conf_vs_50_openvpn-unpriv.conf">50_openvpn_unpriv.conf vs 50_openvpn-unpriv.conf</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-2" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-2.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Like the example above:
</p>
<ul><li>Whonix TUNNEL_FIREWALL uses /usr/lib/tmpfiles.d/50_openvpn_unpriv.conf <i><span style="background-color:#FBFBFB">ip<b>_</b>unpriv</span></i> (underscore)</li>
<li>Standalone VPN-FIREWALL uses  /usr/lib/tmpfiles.d/50_openvpn-unpriv.conf <i><span style="background-color:#FBFBFB">ip<b>-</b>unpriv</span></i> (hyphen)</li></ul>
<h6><span class="mw-headline" id="Cannot_ioctl_TUNSETIFF">Cannot ioctl TUNSETIFF</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-3" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-3.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<pre> <i>ERROR: Cannot ioctl TUNSETIFF tun: Operation not permitted (errno=1)</i>
</pre>
<p>In openvpn.conf do not use.
</p>
<pre>dev tun
</pre>
<p>Use.
</p>
<pre>dev tun0
</pre>
<h6><span class="mw-headline" id="Dev_tun_Mismatch">Dev tun Mismatch</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-4" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-4.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>In openvpn.conf do not use.
</p>
<pre>dev tun
</pre>
<p>Use.
</p>
<pre>dev tun0
</pre>
<h6><span id="/run/openvpn/openvpn.status_Permission_denied"></span><span class="mw-headline" id=".2Frun.2Fopenvpn.2Fopenvpn.status_Permission_denied">/run/openvpn/openvpn.status Permission denied</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-5" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-5.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<pre> <i>Options error: --status fails with '/run/openvpn/openvpn.status': Permission denied</i>
</pre>
<p>Do not start OpenVPN as root. Do not use <i>sudo openvpn</i>, because this will lead to permission issues. Files in the <i>/run/openvpn</i> folder are owned by root, so they cannot be overwritten by the user tunnel.
</p>
<h6><span class="mw-headline" id="debug_start">debug start</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-6" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-6.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>To start debug, run the following commands concurrently.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo /usr/sbin/openvpn --rmtun --dev tun0</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo /usr/sbin/openvpn --rmtun --dev tun0</textarea>
</div>
</div>
<div class="codeContainerNew">
<div class="preDiv">
<pre>sudo /usr/sbin/openvpn --mktun --dev tun0 --dev-type tun --user tunnel --group tunnel</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo /usr/sbin/openvpn --mktun --dev tun0 --dev-type tun --user tunnel --group tunnel</textarea>
</div>
</div>
<div class="codeContainerNew">
<div class="preDiv">
<pre>cd /etc/openvpn/</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">cd /etc/openvpn/</textarea>
</div>
</div>
<div class="codeContainerNew">
<div class="preDiv">
<pre>sudo -u tunnel openvpn /etc/openvpn/openvpn.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo -u tunnel openvpn /etc/openvpn/openvpn.conf</textarea>
</div>
</div>
<h6><span class="mw-headline" id="Linux_ip_link_set_failed">Linux ip link set failed</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-7" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-7.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<pre> <i>Linux ip link set failed: external program exited with error status: 2</i>
</pre>
<p>Use ip_unpriv as documented above.
</p>
<h6><span class="mw-headline" id="DNS_Configuration_2">DNS Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-8" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-8.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>This only applies if resolvconf is used.
</p><p>Permissions on two directories may need to be manually changed if they are not automatically applied. Check if changes are necessary via the following command.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>ls -la /run/resolvconf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">ls -la /run/resolvconf</textarea>
</div>
</div>
<p>If the output lists tunnel as having read / write / execute permissions for both <i>/run/resolvconf</i> and <i>/run/resolvconf/interface</i>, then nothing needs modification. If tunnel is not listed as a group for one or both of these directories, then permissions need to be changed. In that case, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo chown --recursive root:tunnel /run/resolvconf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo chown --recursive root:tunnel /run/resolvconf</textarea>
</div>
</div>
<p>Then set the necessary permissions.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo chmod --recursive 775 /run/resolvconf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo chmod --recursive 775 /run/resolvconf</textarea>
</div>
</div>
<p>In <i>/run/resolvconf</i>, resolv.conf may or may not be owned by tunnel, depending on whether the systemd service has already started. There is no need to modify permissions on this file, as the permissions will change when the service starts.
</p>
<h6><span class="mw-headline" id="Terminology_for_Support_Requests">Terminology for Support Requests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-9" href="https://www.whonix.org/w/index.php?title=Template:VPN-Firewall/Troubleshooting&amp;action=edit&amp;section=T-9.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Phrases such as "over Tor" are ambiguous. Please do not coin idiosyncratic words or phrases, otherwise this leads to confusion. Please use the same terms that are consistently referenced in documentation, such as:
</p>
<ul><li>How to Connect to a VPN Before Tor (User -&gt; VPN -&gt; Tor -&gt; Internet).</li>
<li>How to Connect to Tor Before a VPN (User -&gt; Tor -&gt; VPN -&gt; Internet).</li>
<li>And so on.</li></ul>
<p><br/>
Always refer to the connection scheme when requesting support: <i><span style="background-color:#FBFBFB">User -&gt; VPN -&gt; Tor -&gt; Internet</span></i> or <i><span style="background-color:#FBFBFB">User -&gt; Tor -&gt; VPN -&gt; Internet</span></i> and so on.
</p>
<h3><span class="mw-headline" id="How_to_Submit_a_Support_Request">How to Submit a Support Request</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=33" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=33.html" title="Edit section: How to Submit a Support Request">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Before submitting a support request for VPN related issues users are encouraged to follow the <a data-href="/wiki/Support#Free_Support_Principle" href="./Support.html" title="Support">Free Support Principle</a> when working towards a solution. Whonix developers will use the information provided by the user to determine if the issue is a technical problem (aka bug) and/or configuration error which is a common reason for VPN connectivity issue.
</p><p>Before Whonix developers will review the support request, the following information must be provided.
</p>
<ul><li>Steps to reproduce the behavior. For example, list all command that were run up to this point.<sup class="reference" id="cite_ref-21"><a href="#cite_note-21">[21]</a></sup></li></ul>
<ul><li>Actual behavior. (Detailed explanation. Reports stating "VPN does not work" will be rejected.)</li></ul>
<ul><li>Expected behavior. (Reports stating "VPN works" will be rejected.)</li></ul>
<p>The following information is also required.
</p>
<ul><li>All error messages.</li></ul>
<ul><li>VPN logs from <b>debug start</b> section. This can be found under <b>Troubleshooting</b> on this page. Make sure to redact all sensitive information.</li></ul>
<ul><li>Please answer: Has the VPN configuration been modified aside from the instructions on this page?</li></ul>
<p><u>Note:</u> Users are encouraged to troubleshoot their VPN issues in an effort to find a solutions. However, if the VPN has been modified with custom configuration options, a favorable outcome is less likely if Whonix developers are not made aware of the modification.
</p>
<ul><li>Please answer: Is Whonix currently configured to use a second tunnel-link/proxy or bridge?</li></ul>
<ul><li>(If applicable) Links to similar issues found on the <a class="external text" data-href="https://forums.whonix.org" href="https://forums.whonix.org" rel="noreferrer noopener" target="_blank">Whonix forums</a> and/or other offsite forums/resources.</li></ul>
<h4><span id="Additional_Tweaks_/_Recommendations_/_Troubleshooting"></span><span class="mw-headline" id="Additional_Tweaks_.2F_Recommendations_.2F_Troubleshooting">Additional Tweaks / Recommendations / Troubleshooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=34" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;action=edit&amp;section=34.html" title="Edit section: Additional Tweaks / Recommendations / Troubleshooting">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="toccolours mw-collapsible mw-collapsed">
<p><b>If having problems with the connection / Tor is not fully bootstrapped</b>, please press on expand on the right.
</p>
<div class="mw-collapsible-content">
<p>You have may have to manually restart Tor. This is because the VPN may not be ready when Tor is attempting to connect, because the VPN connection initialization takes too long. Due to a bug in Tor, it won't keep trying to connect. To fix this, you may have to manually restart Tor after boot, if whonixcheck reports that Tor is not fully bootstrapped. The same may be necessary if your VPN software or connection temporarily broke down.
</p><p><b>To Manually restart Tor:</b>
</p><p>Reload Tor.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p>After editing <i><span style="background-color:#FBFBFB">/usr/local/etc/torrc.d/50_user.conf</span></i>, Tor must be reloaded for changes to take effect. 
</p><p><b>Note:</b> If Tor does not connect after completing all these steps, then a user mistake is the most likely explanation. Recheck <i><span style="background-color:#FBFBFB">/usr/local/etc/torrc.d/50_user.conf</span></i> and repeat the steps outlined in the sections above. If Tor then connects successfully, all the necessary changes have been made.
</p><p><u>If you are using <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u>, complete the following steps.
</p><p><code>Qubes App Launcher (blue/grey "Q")</code> -&gt; <code>Whonix-Gateway ProxyVM (commonly named 'sys-whonix')</code> -&gt; <code>Reload Tor</code>
</p><p><u>If you are using a graphical Whonix-Gateway</u>, complete the following steps.
</p><p><code>Start Menu</code> -&gt; <code>Applications</code> -&gt; <code>Settings</code> -&gt; <code>Reload Tor
</code>
</p>
<div class="toccolours mw-collapsible mw-collapsed">
<p><u>If you are using a terminal-only Whonix-Gateway</u>, press on Expand on the right.
</p>
<div class="mw-collapsible-content">
<p>Complete the following steps.
</p><p>Reload Tor.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo service tor@default reload</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo service tor@default reload</textarea>
</div>
</div>
<p>Check Tor's daemon status.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo service tor@default status</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo service tor@default status</textarea>
</div>
</div>
<p>It should include a a message saying.
</p>
<pre>Active: active (running) since ...
</pre>
<p>In case of issues, try the following debugging steps.
</p><p>Check Tor's config.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo -u debian-tor tor --verify-config</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo -u debian-tor tor --verify-config</textarea>
</div>
</div>
<p>The output should be similar to the following.
</p>
<pre>Sep 17 17:40:41.416 [notice] Read configuration file "/usr/local/etc/torrc.d/50_user.conf".
Configuration was valid</pre>
</div>
</div>
</div>
<p><b>Leak Tests</b>
</p><p>When you shut down the VPN, neither Tor, nor Whonix-Gateway's whonixcheck/apt-get/etc. nor Whonix-Workstation should be able to connect anywhere anymore.
</p><p><b> Force Tor to wait for OpenVPN </b>
</p><p>Create a folder /etc/systemd/system/tor.service.d.
</p><p><code>
sudo mkdir /etc/systemd/system/tor.service.d
</code>
</p><p>Create a file /etc/systemd/system/tor.service.d/50_user.conf.
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/systemd/system/tor.service.d/50_user.conf</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/systemd/system/tor.service.d/50_user.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/systemd/system/tor.service.d/50_user.conf</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="./Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/systemd/system/tor.service.d/50_user.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/systemd/system/tor.service.d/50_user.conf</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/systemd/system/tor.service.d/50_user.conf</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/systemd/system/tor.service.d/50_user.conf</textarea>
</div>
</div>
</div>
<p>Add the following content.
</p><p><code>
[Unit]
After=openvpn.service
</code>
</p><p>Save.
</p><p>At next boot, the Tor daemon will be started after the OpenVPN daemon.
</p><p>Debugging: <sup class="reference" id="cite_ref-22"><a href="#cite_note-22">[22]</a></sup>
</p><p><b>Limitations</b>
</p>
<ul><li>Only tested with OpenVPN. Most other VPN's have deficiencies anyway.</li>
<li>DNS (IP address) of VPN server has to be manually resolved. There is technically no way to automatically resolve DNS without making the setup much more complex. The VPN server's IP address should not be resolved over Tor, because that's what you wanted to hide in the first place. Since outside observers will know, that you are connecting to the VPN IP anyway, it is probably safe to resolve the DNS over clearnet or by asking the VPN provider if they don't already document their IPs on their website anyway.</li>
<li>No support for IPv6 yet.</li></ul>
<p><b>Troubleshooting VPN -&gt; Tor</b>
</p>
<ul><li>If not connecting, see above to manually restart Tor</li>
<li>Check your VPN software's logs.</li></ul>
<ul><li><b>Test if you are able to connect using your VPN</b></li></ul>
<p>1. Login as user <span style="border:1px dotted #005cb9">clearnet</span>.
</p><p><code>
sudo su clearnet
</code>
</p><p>2. Try connecting to check.tpo. Note, at time of writing, it looked like usaip free trial is probably blocking SSL, therefore it might not work.
</p><p><code>
UWT_DEV_PASSTHROUGH=1 curl --silent --tlsv1.2 --proto =https -H 'Host: check.torproject.org' -k <a class="external free" data-href="https://138.201.14.212" href="https://138.201.14.212" rel="noreferrer noopener" target="_blank">https://138.201.14.212</a> | grep IP
</code>
</p><p>Should show something along: <i><span style="background-color:#FBFBFB">Your IP address appears to be: xxx.xxx.xxx.xxx</span></i>
</p><p>3. Get back to normal user.
</p><p><code>
exit
</code>
</p>
</div>
</div>
<hr/><div class="mw-references-wrap mw-references-columns"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">â</a></span> <span class="reference-text">For example, VPNs require a failed closed configuration to prevent DNS leaks.</span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">â</a></span> <span class="reference-text">Users in China are <a class="external text" data-href="https://web.archive.org/web/20171218203107/https://www.cs.uml.edu/~xinwenfu/paper/Bridge.pdf" href="https://web.archive.org/web/20171218203107/https://www.cs.uml.edu/~xinwenfu/paper/Bridge.pdf" rel="noreferrer noopener" target="_blank">unlikely to circumvent government censorship</a> with vanilla bridges, as they are uniformly blocked. That said, anon-connection-wizard configured with the meek-amazon or meek-azure pluggable transport is reported to bypass Chinese censorship in late 2017.</span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite_ref-3">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://lists.torproject.org/pipermail/tor-talk/2016-July/041757.html" href="https://lists.torproject.org/pipermail/tor-talk/2016-July/041757.html" rel="noreferrer noopener" target="_blank">https://lists.torproject.org/pipermail/tor-talk/2016-July/041757.html</a></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">â</a></span> <span class="reference-text">
<a class="external text" data-href="https://phabricator.whonix.org/T492" href="https://phabricator.whonix.org/T492" rel="noreferrer noopener" target="_blank">research / document impact for tunnel users if Tor relays hosted at the same tunnel provider</a> </span>
</li>
<li id="cite_note-5"><span class="mw-cite-backlink"><a href="#cite_ref-5">â</a></span> <span class="reference-text">
This is because file <a class="external text" data-href="https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf" href="https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf" rel="noreferrer noopener" target="_blank">/lib/systemd/system/openvpn@openvpn.service.d/50_unpriv.conf</a> checks the following condition
<pre>ConditionPathExists=!/var/run/qubes-service/whonix-template
</pre>
<p>Which means, if file <code>/var/run/qubes-service/whonix-template</code> exists, which is the case in Whonix TemplateVMs, the <i><span style="background-color:#FBFBFB">openvpn@openvpn</span></i> service will not be started.
</p>
</span></li>
<li id="cite_note-6"><span class="mw-cite-backlink"><a href="#cite_ref-6">â</a></span> <span class="reference-text">
<a class="external free" data-href="http://tor.stackexchange.com/a/114/80" href="http://tor.stackexchange.com/a/114/80" rel="noreferrer noopener" target="_blank">http://tor.stackexchange.com/a/114/80</a></span>
</li>
<li id="cite_note-7"><span class="mw-cite-backlink"><a href="#cite_ref-7">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://lists.torproject.org/pipermail/tor-talk/2016-July/041753.html" href="https://lists.torproject.org/pipermail/tor-talk/2016-July/041753.html" rel="noreferrer noopener" target="_blank">https://lists.torproject.org/pipermail/tor-talk/2016-July/041753.html</a></span>
</li>
<li id="cite_note-all-traffic-8"><span class="mw-cite-backlink">â <sup><a href="#cite_ref-all-traffic_8-0">8.0</a></sup> <sup><a href="#cite_ref-all-traffic_8-1">8.1</a></sup></span> <span class="reference-text">
All traffic generated by the host and all applications running on the host. For example, Firefox, NTP, and anything else. This also includes traffic generated by Whonix.</span>
</li>
<li id="cite_note-9"><span class="mw-cite-backlink"><a href="#cite_ref-9">â</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/leapcode/bitmask_client/issues/1009" href="https://github.com/leapcode/bitmask_client/issues/1009" rel="noreferrer noopener" target="_blank">https://github.com/leapcode/bitmask_client/issues/1009</a></span>
</li>
<li id="cite_note-10"><span class="mw-cite-backlink"><a href="#cite_ref-10">â</a></span> <span class="reference-text">
At the time of writing Debian 9 stretch was the stable release version.</span>
</li>
<li id="cite_note-11"><span class="mw-cite-backlink"><a href="#cite_ref-11">â</a></span> <span class="reference-text">Because Whonix-Gateway does not require any clearnet DNS anyhow.</span>
</li>
<li id="cite_note-12"><span class="mw-cite-backlink"><a href="#cite_ref-12">â</a></span> <span class="reference-text">
<ul><li>Check, that your VPN-Gateway is fully functional. Test connectivity from inside the VPN-Gateway.</li>
<li>Add a non-Whonix VM behind your VPN-Gateway. For example, add a debian based AppVM behind your VPN-Gateway. Figure out if the VPN-Gateway works at all before involving Whonix.</li></ul>
</span></li>
<li id="cite_note-13"><span class="mw-cite-backlink"><a href="#cite_ref-13">â</a></span> <span class="reference-text">Only proceed if this is successful. Do not post support requests regarding these instructions before completing this basic exercise.</span>
</li>
<li id="cite_note-14"><span class="mw-cite-backlink"><a href="#cite_ref-14">â</a></span> <span class="reference-text"><a class="external free" data-href="https://phabricator.whonix.org/T460" href="https://phabricator.whonix.org/T460" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T460</a></span>
</li>
<li id="cite_note-15"><span class="mw-cite-backlink"><a href="#cite_ref-15">â</a></span> <span class="reference-text">That config file is a bash fragment.</span>
</li>
<li id="cite_note-16"><span class="mw-cite-backlink"><a href="#cite_ref-16">â</a></span> <span class="reference-text"> Many VPN service providers include DNS hostnames in their configuration files. The hostnames typically  include the providers name followed by (.net, .com, .ch, .pw).</span>
</li>
<li id="cite_note-17"><span class="mw-cite-backlink"><a href="#cite_ref-17">â</a></span> <span class="reference-text">
The Tor software cannot transport UDP yet, but it does not have to in this case. (Reference: <a data-href="/wiki/Tor#UDP" href="./Tor.html" title="Tor">Tor#UDP</a>.) Since the VPN connects over clearnet, UDP should just work as usual. Once the VPN is functional, Tor will have no issue to connect using it (without "knowing" it is over a VPN).</span>
</li>
<li id="cite_note-18"><span class="mw-cite-backlink"><a href="#cite_ref-18">â</a></span> <span class="reference-text">
The <a class="external text" data-href="https://github.com/Whonix/usability-misc/blob/master/usr/bin/ip_unpriv" href="https://github.com/Whonix/usability-misc/blob/master/usr/bin/ip_unpriv" rel="noreferrer noopener" target="_blank">/usr/bin/ip_unpriv</a> wrapper script is being provided by the <a class="external text" data-href="https://github.com/Whonix/usability-misc" href="https://github.com/Whonix/usability-misc" rel="noreferrer noopener" target="_blank">usabilty-misc</a> package.

The <a class="external text" data-href="https://github.com/Whonix/usability-misc/blob/master/etc/sudoers.d/tunnel_unpriv" href="https://github.com/Whonix/usability-misc/blob/master/etc/sudoers.d/tunnel_unpriv" rel="noreferrer noopener" target="_blank">/etc/sudoers.d/tunnel_unpriv</a> wrapper script is being provided by the <a class="external text" data-href="https://github.com/Whonix/usability-misc" href="https://github.com/Whonix/usability-misc" rel="noreferrer noopener" target="_blank">usabilty-misc</a> package.

The <a class="external text" data-href="https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf" href="https://github.com/Whonix/usability-misc/blob/master/lib/systemd/system/openvpn%40openvpn.service.d/50_unpriv.conf" rel="noreferrer noopener" target="_blank">/lib/systemd/system/openvpn@openvpn.service.d/50_unpriv.conf</a> wrapper script is being provided by the <a class="external text" data-href="https://github.com/Whonix/usability-misc" href="https://github.com/Whonix/usability-misc" rel="noreferrer noopener" target="_blank">usabilty-misc</a> package.</span>
</li>
<li id="cite_note-19"><span class="mw-cite-backlink"><a href="#cite_ref-19">â</a></span> <span class="reference-text">We must run OpenVPN as user 'tunnel', because that is the only user besides user <i><span style="background-color:#FBFBFB">clearnet</span></i> that will be allowed to establish external connections when using Whonix Firewall setting VPN_FIREWALL=1.</span>
</li>
<li id="cite_note-20"><span class="mw-cite-backlink"><a href="#cite_ref-20">â</a></span> <span class="reference-text">
Because Whonix-Gateway by default has no and needs no system DNS for its own traffic. See <a data-href="/wiki/Whonix-Gateway_System_DNS" href="./Whonix-Gateway_System_DNS.html" title="Whonix-Gateway System DNS">Whonix-Gateway System DNS</a> if you would like to read an explanation why that is so.</span>
</li>
<li id="cite_note-21"><span class="mw-cite-backlink"><a href="#cite_ref-21">â</a></span> <span class="reference-text">
To list previous commands, run.
<div class="codeContainerNew">
<div class="preDiv">
<pre>history</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">history</textarea>
</div>
</div></span>
</li>
<li id="cite_note-22"><span class="mw-cite-backlink"><a href="#cite_ref-22">â</a></span> <span class="reference-text">
Reload systemd.

<code>
sudo systemctl daemon-reload
</code>

Check Tor service status.

<code>
sudo systemctl status tor
</code>
<code>
sudo systemctl status tor@default
</code>

It should list the drop-in file <i><span style="background-color:#FBFBFB">/etc/systemd/system/tor.service.d/50_user.conf</span></i>.</span>
</li>
</ol></div>
<!-- 
NewPP limit report
Cached time: 20190227042648
Cache expiry: 2592000
Dynamic content: false
CPU time usage: 0.328 seconds
Real time usage: 0.422 seconds
Preprocessor visited node count: 1279/1000000
Preprocessor generated node count: 2761/1000000
Postâexpand include size: 66046/2097152 bytes
Template argument size: 14108/2097152 bytes
Highest expansion depth: 10/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postâexpand size: 3803/5000000 bytes
Lua time usage: 0.060/7.000 seconds
Lua virtual size: 15.32 MB/50 MB
Lua estimated memory usage: 0 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  329.304      1 -total
 34.64%  114.057      9 Template:Mbox
 26.64%   87.738     35 Template:CodeSelect
 20.30%   66.833      1 Template:Tunnel_Introduction
 19.96%   65.732     13 Template:Box
 19.74%   65.016      1 Template:Tunnel_Automation_Sale
 11.42%   37.605      1 Template:Tunnel-link_Warnings/Common
 10.74%   35.356      4 Template:Open_with_root_rights
  6.15%   20.249      1 Template:Tunnel_Introduction/Tunnel-link_before_Tor
  5.98%   19.705      1 Template:VPN-Firewall/Troubleshooting
-->
</div>
<!-- Saved in parser cache with key wiki:stable-pcache:idhash:6363-0!canonical and timestamp 20190227042648 and revision id 41049
 -->
</div><div class="printfooter">
Retrieved from "<a data-href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;oldid=41049" dir="ltr" href="https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;oldid=41049">https://www.whonix.org/w/index.php?title=Wiki_Edits_Staging_and_Testing_Page&amp;oldid=41049</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 24 February 2019, at 02:32.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="./Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="/wiki/Privacy_Policy" href="./Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Cookie_Policy"><a data-href="/wiki/Cookie_Policy" href="./Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-Terms_of_Service"><a class="mw-redirect" data-href="/wiki/Terms_of_Service" href="./Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-DMCA"><a class="mw-redirect" data-href="/wiki/DMCA" href="./DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-E_Sign_Consent"><a data-href="/wiki/E-Sign_Consent" href="./E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="./Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="./Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="./Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
<!-- Cached/compressed 20190227072602 -->
</html>
