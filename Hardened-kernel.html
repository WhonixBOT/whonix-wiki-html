<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Hardened-kernel - Whonix
 url: ./Hardened-kernel
 date: Fri Feb 28 07:41:58 2020
-->
<head>
<meta charset="utf-8"/>
<title>Hardened-kernel - Whonix</title>
<link rel="stylesheet" type="text/css" href="style.css">
<style>#banner{position:relative;overflow:hidden;margin-bottom:.5em!important;margin-top:.5em!important;background-color:#d03232;border:solid 1px #aaa;height:66px}#banner a.cn-full-banner-click{display:block;height:100%;width:100%;cursor:pointer}#banner-logo{position:absolute;top:8px;left:15px;background-image:url(data:image/png;base64,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);height:50px;width:100%;background-repeat:no-repeat}#banner #black-text{font-size:1.1em;color:#fff;padding:.5em 40px .4em 60px;line-height:1.3em;text-align:center}</style>


<meta content="" name="ResourceLoaderDynamicStyles"/>
<meta content="MediaWiki 1.33.1" name="generator"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Hardened-kernel&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Hardened-kernel&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/w/images/favicon.ico" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOPj4wC5q6j/xba0/8W2tP+3qab/4+PiBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+6rKr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8CohP/VnhL/1Z4S/8CohP/Ku7n/yru5/7mrqf8AAAAAAAAAAAAAAAAAAAAAAAAAAI6Mi//Ku7n/yru5/8GRHP/iqhL/////////////////wJEd/8q7uf/Ku7n/xsXE/wAAAAAAAAAAAAAAAAAAAAC5q6n/yru5/8q7uf/hqRH//////0bcy/9G3Mv//////+GpEf/Ku7n/yru5/7qsqv8AAAAAAAAAAAAAAAAAAAAAxLW0/8q7uf/Ku7n/4qoS/////////////////0bcy//iqhL/yru5/8q7uf/Gt7T/AAAAAAAAAAAAAAAAAAAAAMKzsP/Ku7n/yru5/96lFf//////RtzL/0bcy///////3qUV/8q7uf/Ku7n/wrWy/wAAAAAAAAAAAAAAAAAAAACvo6D/yru5/8q7uf/Ku7n/4akQ//fnvP/57tD/4akQ/8q7uf/Ku7n/yru5/7Gkov8AAAAAAAAAAAAAAAAAAAAAAAAAAMq7uf/Ku7n/yru5/8q7uf/hqRD/4akQ/8q7uf/Ku7n/yru5/8q7uf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACOjIv/yru5/8q7uf/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+Mioj/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAISDgf/Iurj/yru5/8q7uf/Ku7n/yru5/8i5uP+EgoH/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6rKr/q56c/wAAAACOjIv/joyL/wAAAACom5r/taim/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuqyp/66hnv8AAAAAAAAAAAAAAAAAAAAAqp2b/7SnpP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKmcm/+9r6z/AAAAAAAAAAAAAAAAAAAAALmrqf+jl5b/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwLOw/6uenP8AAAAAAAAAAKqenP+/sq//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACtoJ7/vK2r/72vrP+sn57/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/D8AAPAPAADgBwAAwAMAAMADAADAAwAAwAMAAMADAADgBwAA4AcAAPAPAADyTwAA888AAPPPAAD5nwAA/D8AAA==" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="http://www.kkkkkkkkkk63ava6.onion/w/api.php?action=rsd" href="http://www.kkkkkkkkkk63ava6.onion/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="Hardened-kernel - Whonix" property="og:title"/>
<meta content="http://www.kkkkkkkkkk63ava6.onion/wiki/Hardened-kernel" property="og:url"/>
<meta content="" property="og:image"/>
<meta content="2020-02-24T18:16:45Z" property="article:modified_time"/>
<meta content="2020-02-24T18:16:45Z" property="article:published_time"/>
<meta content="@Whonix" property="twitter:site"/>
<meta content="Hardened-kernel - Whonix" property="twitter:title"/>
<meta content="" property="twitter:image"/>
<meta content="summary" property="twitter:card"/>

<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Hardened-kernel rootpage-Hardened-kernel skin-foreground action-view"><noscript><meta content="0;url='./Hardened-kernel?PageSpeed=noscript'" http-equiv="refresh"/><style><!--table,div,span,font,p{display:none} --></style><div style="display:block">Please click <a data-href="./Hardened-kernel?PageSpeed=noscript" href="./Hardened-kernel?PageSpeed=noscript">here</a> if you are not redirected within a few seconds.</div></noscript><div class="mw-cookiewarning-container banner-container"><div class="mw-cookiewarning-text"><span>This website uses cookies. By using our website, you acknowledge that you have read, understood and agreed to our Privacy Policy, Cookie Policy, Terms of Service, and E-Sign Consent.</span> <a data-href="Terms_of_Service" href="./Terms_of_Service">More information</a><form method="POST"><input class="mw-cookiewarning-dismiss" name="disablecookiewarning" type="submit" value="OK"/></form></div></div><div id="navwrapper">

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<div class="mw-indicators mw-body-content">
</div>
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><p>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="Donate" href="./Donate.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Whonix requires Donations to stay alive.
</div>
</a>
</div>
</div></div> </div>
</div>
<div id="mw-js-message" style="display:none"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up"> Actions</span></i></a>
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="Hardened-kernel" href="./Hardened-kernel.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Hardened-kernel&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Hardened-kernel&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Hardened-kernel&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Hardened-kernel&amp;action=history" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<div id="content">
<h1 class="title" id="firstHeading">Hardened-kernel</h1>
<h3 id="tagline">From Whonix</h3> <h5 class="subtitle" id="siteSub"></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><div class="toc" id="toc"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Improvements"><span class="tocnumber">2</span> <span class="toctext">Improvements</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Options_we_disable"><span class="tocnumber">2.1</span> <span class="toctext">Options we disable</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Options_we_enable"><span class="tocnumber">2.2</span> <span class="toctext">Options we enable</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#linux-hardened"><span class="tocnumber">3</span> <span class="toctext">linux-hardened</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Improvements_of_linux-hardened"><span class="tocnumber">3.1</span> <span class="toctext">Improvements of linux-hardened</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Improvements_of_linux-hardened_we_don.27t_yet_benefit_from"><span class="tocnumber">3.2</span> <span class="toctext">Improvements of linux-hardened we don't yet benefit from</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Upcoming_improvements_of_linux-hardened"><span class="tocnumber">3.3</span> <span class="toctext">Upcoming improvements of linux-hardened</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Unused_options"><span class="tocnumber">4</span> <span class="toctext">Unused options</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=1.html" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://github.com/Whonix/hardened-kernel/" href="https://github.com/Whonix/hardened-kernel/" rel="noreferrer noopener" target="_blank">hardened-kernel</a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/hardened-kernel/" href="https://web.archive.org/web/https://github.com/Whonix/hardened-kernel/" rel="noreferrer noopener" target="_blank">[archive]</a></sup> is a hardened kernel configuration for Whonix / Kicksecure with hardening patches. There are two configs, hardened-vm-kernel and hardened-host-kernel. hardened-vm-kernel is designed specifically for virtual machines and hardened-host-kernel is designed for hosts.
</p><p>Both configs try to have as many hardening options enabled as possible and have little attack surface. hardened-vm-kernel only has support for VMs and all other hardware options are disabled to reduce attack surface and compile time.
</p><p>During installation of hardened-vm-kernel, it compiles the kernel on your own machine and does not use a pre-compiled kernel. This ensures the kernel symbols in the compiled image are completely unique which makes it far harder for kernel exploits. This is possible due to hardened-vm-kernel having only VM config options enabled which drastically reduces compile time.
</p><p>During installation of hardened-host-kernel, the kernel is not compiled on your machine and it uses a pre-compiled kernel. This is because the host kernel needs most hardware options enabled to support most devices which makes compilation take a very long time.
</p><p>The VM kernel is more secure than the host kernel due to having less attack surface and not being pre-compiled but if you want more security for the host, it is recommended to edit the hardened host config, enable only the hardware options you need and compile the kernel yourself. This makes the security of the host and VM kernel comparable.
</p><p>Both configs were based on the default Debian config.
</p><p>These kernels use the linux-hardened patch for further hardening. Custom hardening patches should be sent there.
</p>
<h1><span class="mw-headline" id="Improvements">Improvements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=2.html" title="Edit section: Improvements">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Here is a list of the improvements of the config. This may not be complete but has the bulk of the features.
</p>
<h2><span class="mw-headline" id="Options_we_disable">Options we disable</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=3.html" title="Edit section: Options we disable">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Disables /proc/kcore. Exposes kernel text image layout.
</p><p>Disables /dev/port. Can modify kernel memory.
</p><p>Disables /dev/mem. Can modify kernel memory.
</p><p>Disables livepatching. Can modify kernel code.
</p><p>Disables CPU MSRS. Can be abused to write to kernel memory.
</p><p>Disables kexec. Can replace the current kernel.
</p><p>Disables kprobes. Can access kernel memory.
</p><p>Disables <code>bpf()</code> syscall. Can be abused to read arbitrary kernel memory through functions such as <code>bpf_probe_read()</code>.
</p><p>Disables ACPI table upgrading. Loading arbitrary ACPI tables can be abused to jump into kernel code.
</p><p>Disables hibernation. The kernel image can be replaced during hibernation.
</p><p>Disables slab merging. Reduces the risk of kernel heap overflows.
</p><p>Disables <code>userfaultfd()</code> syscall. Can make heap sprays easier. <sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup>
</p><p>Disables vivid. It's only required for testing and has been the cause of multiple vulnerabilities. <sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup>
</p><p>Disables binfmt_misc. We don't need custom binary formats and they just add attack surface.
</p><p>Disables legacy nouveau contexts. These aren't needed anymore and contain security holes. <sup class="reference" id="cite_ref-3"><a href="#cite_note-3">[3]</a></sup>
</p><p>Disables INET socket monitoring interface. Has helped heap memory attacks in the past.
</p><p>Disables vsyscall emulation. Vsyscalls are in a fixed position in memory and can be used to bypass ASLR.
</p><p>Disables crash dumps and coredumps. Can contain sensitive information.
</p><p>Disables uselib. Only used in older libc versions and has been the cause of privilege escalation vulnerabilities in the past.
</p><p>Disables 32-bit support and IA32 emulation. Doesn't have much attention upstream so it's full of bugs. <sup class="reference" id="cite_ref-4"><a href="#cite_note-4">[4]</a></sup>
</p><p>Disables <code>modify_ldt()</code> syscall. Increases low-level kernel attack surface.
</p><p>Disables KSM. This has various vulnerabilities described <a class="external text" data-href="KVM#KSM" href="./KVM" rel="noreferrer noopener" target="_blank">here</a> <sup><a data-href="https://web.archive.org/web/./KVM#KSM" href="https://web.archive.org/web/./KVM" rel="noreferrer noopener" target="_blank">[archive]</a></sup>.
</p><p>Disables unused networks protocols (DCCP, RDS, SCTP, bluetooth etc.).
</p><p>Disables ftrace. Can hook into kernel code to gather a lot of information about what is happening in the kernel.
</p><p>Disables firewire and thunderbolt. Can be abused for DMA.
</p><p>Disables AIO. This has various vulnerabilities described <a class="external text" data-href="https://github.com/AndroidHardeningArchive/documentation/blob/master/technical_overview.md#attack-surface-reduction" href="https://github.com/AndroidHardeningArchive/documentation/blob/master/technical_overview.md" rel="noreferrer noopener" target="_blank">here</a> <sup><a data-href="https://web.archive.org/web/https://github.com/AndroidHardeningArchive/documentation/blob/master/technical_overview.md#attack-surface-reduction" href="https://web.archive.org/web/https://github.com/AndroidHardeningArchive/documentation/blob/master/technical_overview.md" rel="noreferrer noopener" target="_blank">[archive]</a></sup>.
</p><p>Disables <code>sysfs()</code> syscall. Deprecated.
</p><p>Disables debugfs. Contains a lot of debug info that's been the cause of many vulnerabilities in the past.
</p><p>Disables notifier error injection. Allows userspace to inject artificial errors into kernel code.
</p><p>Disables profiling support. Can gather potentially dangerous debugging information.
</p><p>Disables unneeded partition types.
</p><p>Disables IPV6.
</p><p>Disables unused LSMs. Only AppArmor is enabled.
</p><p>Disables /proc page monitoring.
</p><p>Disables unused filesystems.
</p><p>Restrict loading line disciplines to CAP_SYS_MODULE. Prevents attackers from loading ancient line disciplines with vulnerabilities to exploit them.
</p><p>Distrusts the CPU for initial entropy as it cannot be audited to ensure it gives good entropy.
</p><p>Disables staging drivers. These are lower quality and are more likely to contain vulnerabilities.
</p>
<h2><span class="mw-headline" id="Options_we_enable">Options we enable</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=4.html" title="Edit section: Options we enable">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Enables validation of commonly targeted structures (SG tables, notifier call chains, credential management, linked list manipulation).
</p><p>Enables sanity checks in virtual to page code to prevent certain data corruption.
</p><p>Enables IOMMU by default. Prevents DMA attacks.
</p><p>Enables hardening GCC plugins: LATENT_ENTROPY, STRUCTLEAK and RANDSTRUCT. LATENT_ENTROPY gathers more entropy during boot, STRUCTLEAK zero-inits variables and RANDSTRUCT randomizes the layout of sensitive kernel structures. We do not weaken RANDSTRUCT with the RANDSTRUCT_PERFORMANCE option. We use STRUCTLEAK's strongest option (BYREF_ALL).
</p><p>Enables reset attack mitigation. Prevents certain cold-boot attacks.
</p><p>Sets the number of entropy bits to use for mmap ASLR to the highest (32). linux-hardened applies this to the stack too.
</p><p>Compiles jitterentropy and various HWRNGs as built-in for better entropy.
</p><p>Signs all kernel modules during compilation.
</p><p>Makes the kernel panic on oopses to deter bruteforcing.
</p><p>Restricts the SysRq key to only allow SAK and shutdowns.
</p>
<h1><span class="mw-headline" id="linux-hardened">linux-hardened</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=5.html" title="Edit section: linux-hardened">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://github.com/anthraxx/linux-hardened/" href="https://github.com/anthraxx/linux-hardened/" rel="noreferrer noopener" target="_blank">linux-hardened</a> <sup><a data-href="https://web.archive.org/web/https://github.com/anthraxx/linux-hardened/" href="https://web.archive.org/web/https://github.com/anthraxx/linux-hardened/" rel="noreferrer noopener" target="_blank">[archive]</a></sup> is a patch for the Linux kernel that adds many hardening features.
</p>
<h2><span class="mw-headline" id="Improvements_of_linux-hardened">Improvements of linux-hardened</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=6.html" title="Edit section: Improvements of linux-hardened">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Many ASLR improvements <a class="external free" data-href="https://gist.github.com/thestinger/b43b460cfccfade51b5a2220a0550c35" href="https://gist.github.com/thestinger/b43b460cfccfade51b5a2220a0550c35" rel="noreferrer noopener" target="_blank">https://gist.github.com/thestinger/b43b460cfccfade51b5a2220a0550c35</a> <sup><a data-href="https://web.archive.org/web/https://gist.github.com/thestinger/b43b460cfccfade51b5a2220a0550c35" href="https://web.archive.org/web/https://gist.github.com/thestinger/b43b460cfccfade51b5a2220a0550c35" rel="noreferrer noopener" target="_blank">[archive]</a></sup>
</p><p>Marks more areas as read-only with <code>__ro_after_init</code> and adds <code>__read_only</code> for non-init usage.
</p><p>Adds writable function pointer detection.
</p><p>Enables stricter sysctls by default although we set these with security-misc already.
</p><p>More sanity checks.
</p><p>Slab canaries.
</p><p>Sanitizes slab and page allocations on free (for non-LTS kernels, it just uses <code>init_on_{free,alloc}</code> with some enhancements).
</p><p>Verifies slab and page sanitization.
</p><p>Restricts the TIOCSTI ioctl to CAP_SYS_ADMIN as it can be used to compromise many programs in the same session.
</p><p>Disables unprivileged user namespaces. These expose a lot of kernel attack surface.
</p><p>Restricts device timing sidechannels to CAP_MKNOD.
</p><p>Restricts all <code>perf_event_open()</code> use to CAP_SYS_ADMIN.
</p><p>Makes the kernel BUG on more data corruption.
</p><p>Adds the <code>extra_latent_entropy</code> kernel boot parameter to gather more entropy during boot.
</p>
<h2><span id="Improvements_of_linux-hardened_we_don't_yet_benefit_from"></span><span class="mw-headline" id="Improvements_of_linux-hardened_we_don.27t_yet_benefit_from">Improvements of linux-hardened we don't yet benefit from</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=7.html" title="Edit section: Improvements of linux-hardened we don't yet benefit from">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>FORTIFY_SOURCE enhancements. These aren't intended for production usage.
</p><p>Restricts <code>userfaultfd()</code> syscall to root. We disable <code>userfaultfd()</code> altogether.
</p><p>Extends <code>init_on_free</code> and <code>init_on_alloc</code> to slab caches with constructors. These aren't in our kernel version.
</p><p>Hard-wires the legacy checkreqprot option to 0. We don't use SELinux.
</p><p>Adds a sysctl to disable newly added USB devices (<code>kernel.deny_new_usb</code>). We don't make use of this yet.
</p><p>Zero-fill uninitialized local variables. Requires clang compiler support and we use GCC.
</p>
<h2><span class="mw-headline" id="Upcoming_improvements_of_linux-hardened">Upcoming improvements of linux-hardened</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=8.html" title="Edit section: Upcoming improvements of linux-hardened">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>We are contributing to linux-hardened and adding more hardening features. These aren't merged yet. This list documents these upcoming features.
</p><p>Disables TCP simultaneous connect. This weakness allows an attacker to easily prevent a client from connecting to a known server so it should be disabled.
</p><p>Restricts module auto-loading to CAP_SYS_MODULE. Prevents unprivileged attackers from auto-loading vulnerable modules to increase attack surface.
</p><p>Restricts access to sysfs to root. Sysfs has been the cause of many vulnerabilities and info-leaks.
</p><p>Further restricts <code>perf_event_open()</code> to deny even root from using it.
</p><p>Trusted Path Execution.
</p>
<h1><span class="mw-headline" id="Unused_options">Unused options</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Hardened-kernel&amp;action=edit&amp;section=9.html" title="Edit section: Unused options">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>There are some hardening options we don't use. This is a list of options we don't use and why.
</p><p><code>CONFIG_STATIC_USERMODEHELPER=y</code> - This would be great to enable but breaks boot.
</p><p><code>CONFIG_KALLSYMS=n</code> - We set <code>kptr_restrict</code> so this won't make much difference except minor attack surface reduction.
</p><p><code>CONFIG_MAGIC_SYSRQ=n</code> - There are important features of SysRq we don't want to lose such as SAK. Instead, we restrict the SysRq key to only allow SAK and shutdowns.
</p><p><code>CONFIG_BPF_JIT=n</code> - We harden the BPF JIT compiler so this isn't as important but there has been some discussion on disabling this <a class="external free" data-href="https://forums.whonix.org/t/should-the-bpf-jit-compiler-be-disabled/8475" href="https://forums.whonix.org/t/should-the-bpf-jit-compiler-be-disabled/8475" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/should-the-bpf-jit-compiler-be-disabled/8475</a> <sup><a data-href="https://web.archive.org/web/https://forums.whonix.org/t/should-the-bpf-jit-compiler-be-disabled/8475" href="https://web.archive.org/web/https://forums.whonix.org/t/should-the-bpf-jit-compiler-be-disabled/8475" rel="noreferrer noopener" target="_blank">[archive]</a></sup>
</p><p><code>CONFIG_MODULE_SIG_FORCE=y</code> - Currently, this will break the Virtualbox Guest Additions, LKRG and Tirdad kernel modules but there is work on fixing this.
</p><p><code>CONFIG_SLUB_DEBUG_ON=y</code> - This gives no advantage over the <code>slub_debug=</code> boot parameter.
</p><p><code>CONFIG_SECURITY_LOADPIN=y</code> - We don't use loadpin so this option is pointless.
</p><p><code>CONFIG_PAGE_POISONING=y</code> - We use linux-hardened's <code>CONFIG_PAGE_SANITIZE</code> instead which is better and doesn't force debug bloat.
</p><p><code>CONFIG_MODULES=n</code> - We need kernel modules and restrict module loading as much as we can (with apparmor-profile-everything and in the future, enforcing signature verification and restricting auto-loading to root). This can be reconsidered once clang CFI is upstream as disabling module support improves CFI granularity.
</p><p><code>CONFIG_USER_NS=n</code> - This option is only a problem for unprivileged users and linux-hardened restricts these to root.
</p><p><code>CONFIG_SHUFFLE_PAGE_ALLOCATOR=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_INIT_ON_ALLOC_DEFAULT_ON=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_INIT_ON_FREE_DEFAULT_ON=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_GCC_PLUGIN_STACKLEAK=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_SECURITY_LOCKDOWN_LSM=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_SECURITY_SAFESETID=y</code> - Not in LTS kernels.
</p><p><code>CONFIG_INIT_STACK_ALL=y</code> - Requires clang compiler support.
</p>
<p><code>CONFIG_LOCAL_INIT=y</code> (linux-hardened) - Requires clang compiler support.</p><div class="mw-references-wrap"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://duasynt.com/blog/linux-kernel-heap-spray" href="https://duasynt.com/blog/linux-kernel-heap-spray" rel="noreferrer noopener" target="_blank">https://duasynt.com/blog/linux-kernel-heap-spray</a> <sup><a data-href="https://web.archive.org/web/https://duasynt.com/blog/linux-kernel-heap-spray" href="https://web.archive.org/web/https://duasynt.com/blog/linux-kernel-heap-spray" rel="noreferrer noopener" target="_blank">[archive]</a></sup></span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://www.openwall.com/lists/oss-security/2019/11/02/1" href="https://www.openwall.com/lists/oss-security/2019/11/02/1" rel="noreferrer noopener" target="_blank">https://www.openwall.com/lists/oss-security/2019/11/02/1</a> <sup><a data-href="https://web.archive.org/web/https://www.openwall.com/lists/oss-security/2019/11/02/1" href="https://web.archive.org/web/https://www.openwall.com/lists/oss-security/2019/11/02/1" rel="noreferrer noopener" target="_blank">[archive]</a></sup></span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite_ref-3">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b30a43ac7132cdda833ac4b13dd1ebd35ace14b7" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b30a43ac7132cdda833ac4b13dd1ebd35ace14b7" rel="noreferrer noopener" target="_blank">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b30a43ac7132cdda833ac4b13dd1ebd35ace14b7</a> <sup><a data-href="https://web.archive.org/web/https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b30a43ac7132cdda833ac4b13dd1ebd35ace14b7" href="https://web.archive.org/web/https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b30a43ac7132cdda833ac4b13dd1ebd35ace14b7" rel="noreferrer noopener" target="_blank">[archive]</a></sup></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">↑</a></span> <span class="reference-text"><a class="external free" data-href="https://seclists.org/oss-sec/2019/q4/98" href="https://seclists.org/oss-sec/2019/q4/98" rel="noreferrer noopener" target="_blank">https://seclists.org/oss-sec/2019/q4/98</a> <sup><a data-href="https://web.archive.org/web/https://seclists.org/oss-sec/2019/q4/98" href="https://web.archive.org/web/https://seclists.org/oss-sec/2019/q4/98" rel="noreferrer noopener" target="_blank">[archive]</a></sup></span>
</li>
</ol></div>
</div></div><div class="printfooter">
Retrieved from "<a data-href="http://www.kkkkkkkkkk63ava6.onion/w/index.php?title=Hardened-kernel&amp;oldid=54803" dir="ltr" href="http://www.kkkkkkkkkk63ava6.onion/w/index.php?title=Hardened-kernel&amp;oldid=54803">http://www.kkkkkkkkkk63ava6.onion/w/index.php?title=Hardened-kernel&amp;oldid=54803</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 24 February 2020, at 19:16.</li>
<li id="footer-Imprint"><a data-href="Imprint" href="./Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="Privacy_Policy" href="./Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Cookie_Policy"><a data-href="Cookie_Policy" href="./Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-Terms_of_Service"><a data-href="Terms_of_Service" href="./Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-DMCA"><a class="mw-redirect" data-href="DMCA" href="./DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-E_Sign_Consent"><a data-href="E-Sign_Consent" href="./E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-Priority_Support"><a data-href="Priority_Support" href="./Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="Investors" href="./Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="Professional_Support" href="./Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
</html>
