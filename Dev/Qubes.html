<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Dev/Qubes - Whonix
 url: ../Dev/Qubes
 date: Tue Jan 22 07:49:45 2019
-->
<head>
<meta charset="utf-8"/>
<title>Dev/Qubes - Whonix</title>
<link rel="stylesheet" type="text/css" href="../style.css">




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.31.1" name="generator"/>
<meta content="" name="google-site-verification"/>
<meta content="Qubes-Whonix development notes." name="description"/>
<meta content="Qubes-Whonix development notes." name="twitter:description"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="image"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="twitter:image:src"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@Whonix" name="twitter:site"/>
<meta content="Whonix" name="twitter:domain"/>
<meta content="@Whonix" name="twitter:creator"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Dev/Qubes&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Dev/Qubes&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/favicon.ico" href="https://www.whonix.org/favicon.ico" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="article" property="og:type"/>
<meta content="Whonix" property="og:site_name"/>
<meta content="Dev/Qubes" property="og:title"/>
<meta content="../Dev/Qubes" property="og:url"/>
<meta content="Qubes-Whonix development notes." property="og:description"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" property="og:image"/>

<meta content="" property="fb:app_id"/>
<meta content="" property="fb:admins"/>
<meta content="https://www.facebook.com/Whonix" property="article:author"/>
<meta content="https://www.facebook.com/Whonix" property="article:publisher"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dev_Qubes rootpage-Dev skin-foreground action-view"><div id="navwrapper"><!-- START FOREGROUNDTEMPLATE -->

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<!-- Output page indicators -->
<div class="mw-indicators mw-body-content">
</div>
<!-- If user is logged in output echo location -->
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><div class="mw-parser-output"><p><style type="text/css">

#banner {
 position: relative;
 overflow: hidden;
 margin-bottom: 0.5em !important;
 margin-top: 0.5em !important;
 background-color:#D03232;
 border: solid 1px #aaaaaa; 
 height:66px;
}

#banner a.cn-full-banner-click {
 display:block;
 height:100%;
 width:100%;
 cursor: pointer;
}


#banner-logo {
 position: absolute;
 top: 8px;
 left: 15px;
 background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAArCAYAAAA65tviAAANxklEQVRo3rWae3Ad1X3HP2d3r65elmz5KcvyA0u2MQYbcIyhNgNI40wcHAdKIDjM5EFC0oaB0nTS0Jl22ukj09CmnaRNJ7QpTMorpQWSQoITiRjimNi4NTa2ZVvGT0m2JEuWru5D997d8+sf5+zdvZJsnHS6M5rV2bv39/t9f+/zO1cxxdUGdJp7nYKPAXcLrAEWAnkFx4E3gVc74KcA7UAHV3a12bvlMVfBBoGNClYCswFf4CSwD9ip4JcdoC/HQ031sN3cPifwPftIAKViC0AUKPv/VmVA6SsF1AazgBcUtEmMx4TX4s++ADzdCX6o6EsCCV9oNxpfKoCL4VgD1NYkmdEwjZHRDCdSOUZBHAtQ4JyClg7IXs4S1gqdwO1WEQKoGZZHwkpfAMbsX+zKKVjRAWcuaZFQk+3QDbRooAlomlHDnffdQuPCWVTVJEELIkIhm2fw/Agdb3Wx/cCZUABfwbYOeHEqrbXBastmlg/SXFWhPr7uKhbOrqW2sgLXUSjR5Md9xtLj9A2k2LHvDKNaOAcikdAPdMBzk4CEINqgU8EdClgErFvfyub7bkGs8IhAoBGtES2gBc9RnD45wJM/fIczF9LiGpqPdMC32ywDq6C7gJc0SLXnqE/d3MJNKxopFAMkCOkZ2mhBtEZpcBB2vtfDO8cH6QfS1qWBrR3wo1BhcYt8FHhVLIgbb1jC1gc2orUxvmEQAQjXBOb/hOvwrWd38t8nBnAMycc64O+tJTYreE2DLG6oVX/8iQ8ZACEtMSDQIBICMYoTLagg4PxgipffPkEvkDJgAoEZnZAGUDawqwVGgMQcYHnjDB786laUgNaC0trcRaM1pTWWWSiM0gE/+Mk+fvruaVEmdr4osNtmH3XT0jl89o5rEMczfhIqRkIwEoHQgkIsf0EXCwz1D/GDX52iBxOIAqMYMBK61j0CL7rAEuAP/vx+KuumWUEjZsQ0KFaDaF0SQkRw/IDnfryb7QfOigdFBa6Ae9vVjXxyw9VQWRvRjLuspuRWEIKJ0RfQmTF27TvO3p5RjofCw291wtvKmj4FTGsC1t+4hLse3IwOiAlcrjWxWgqFmChUopDlb5/bwf4zwyigdW4dj915A279bBCrgDg9kUk8jDsbRZZ4APT38a87DtNb0NJvQqO3ExaoNlim4KiALAL1xUe3sODqlijgxPit6BiDmE9PLRDI0Dm+9tTPyRV8/vq+dVQ0LkIpJxKqRKfcPc3nhm75c/MsyKTZt2svO86m5ERU21pUG9wDvOgBS4E/ffIxiiRQlogWo/0yAGHsxC1S0pplHmgGDu7DVTB98TLcZFUkUJlLWR4SKUVKtGN8LN3ssS4yg4M89V4/p8EPwAPuUW3wd8CjM0FtWNnE/Y9/nmIhiOLDMii5lAiC1VqoTSItx10kGB0m33uaqmWrSxoWGw9l67LvESkj5A3oXJb0u3vR2QyegmcPDnLa18EQuAq+pdpsCVkM3Pup21nzkXa07xuBY24wyX9DjYYgofRZFDcayY+jKipj7xMJiZQDiNEUAeW4+BeHyR49SHHgHIICLTgi7OpL8+7FcX0KHOAN1Q6nBBYtAx78w200r15t0yI20JhCiNhayn14olCircBhZiq5CdaSsc/F1GjRmuJgP7ljhyj09YByI7cOTPB3j+TlF/1ZjpkY6VVtMKqgrgX48l/8LnNbW21miQnIhAAsgZta+Agg5WvibgSClJot8X2kWCB79DDZg/tCj40KZKCjVBwIg7kir/VlpdsAyag28B1wlwKPfOMxZi9tMSlXImZl2itxIEqJZaBCoSc/FxHTSihT+8X3yR0/QrbrAH4qBcWCLbQ25etY6xLoMpcdzPm81j8u3da+qt3WkBbg4b96hMY1NyK+T5BNQ7GI9ouGsOOilAuuh/ISKC8BjhMJGsZJ6Cl+ET2eQ+dyBOkU/uhFgpGLFEcuojNjBOkxdDYTKaOs9bH3QGItS9QOIZqBXMBPLhSwFrmo2swGZnEr8NnPtTGzvpIgO2aratQHSSCgTX8kQWCaR+vTSimjdN83nxV9xA/KqrYxUMyScW3HG8aSsBMa1NgaLZzOaXaMFEMgx1QbbAc2LQK2fewGFi1oQIcNYhBv5MK1BRcjOnEdarC0tt3tRH/H+nvIL/pe6F7lTWpIz1WKPakiezOaHgPkZdUOTwh8pQHUh1cv5LabW/F9P2pBAo3WGhVmMh2tdWDrimVatg50qeGMgEosYCPBDL1yt5JYrEj4LgqlwFPw7/0FugNhzPRcf6Ta4eMCLzvA6soEX/7MRvL5YlmrLjoKMuNSsVY7ZCJi3U+X/FiCqP0vuadE75i1pR/o8iY1iIFCULHNbF4Lz/QXOBltqm5TbbBAwVkBaQb1O7+9lrqaihITYkxEYj5sgcWzzCRNxvJ+6bMy4LH3YlYr21wRnxaYxHIsq3kz5XM6AlIZtvFngQVzgU3XNbPu2qYyJhN9dvJurnw9dUxMVMTkTZoBbmJSiZQDsMki4SheGSjQ5Qsp8/j7HfDpEMhGgbcc4Lqkx5c+sZZCvoiUNlGRayixwWmFDdcqiKwjsc3YxLWJLR19T8uk9UQAIQg3WUFfpsB/XShwygw+RGC+gn5l99VJgRzAHFCbr23i+ta5UUxom2qDmOaEqNpewjIywcWiLjm+jqw8lRXiV8OmtTz1zC6OBsYaCo53QOvEKcrDwLcdYJXn8IUt1+H7QVlMXFJAmZgM4rVHXzobaX1FACTQ1K5azClVwX90HqLHWANgVgcMl4DE5lm9Ao11oDY01rFpTbN1o8jfQwHD2lIW/GJS8AfVBDfQjAaaM55mSU6hqgKCGo3ruUhRcMcdvHEHsw/TVC2dT2L5Qr7z9E7eFyEwIJ7tgAemnGsJtCv4mYBcBWrb+iU01FbYGhHb8gaxAhZbhxlHTWoton19Rgf8W33AS+th0eKAh+bUcO/tH6a+ehEnuodQY/0Mv/8e+aODsF2Y0dxMdUsTz7y6n/8ZTDFuhO7vgHmXHZm2wz8LfN4BrgI+fctiqjynlE0+qCZQEAb8AskV4+STASrr4A079J1x+UarT9PmDaxddyNVlZVsa/guS5s2QDpF14FBBntS1JMnfSFPX1+BG2a4nOtqYs/eAXafHmIoEnhlB3R94Mi0zUwbl1aAWlXhsm1tc6kah5U5KlpmrQrC6Kocrb+3glmt13C8u0CtCiiOpRjuOU/63FlSmSSvL7+J/MxqChmfx5v/k2leLe54kQt9gjMODY5LrXZpUB6jvT5/9p0Mp/qD0ngWuKsDXvnAIbbNYjOBfgG3BlhdneCuVXPLKnB54Gvy84p86McuycJGcoMj+OkM3YeGkGweP1VgdCigSmBa1ueha6+hKqlZevYEH6kfYdEMl+uaPLycS5BSDPcJR44GPH80zytKqDwJc0agZoQn3oKvXvE03rpYo8BpIFENLE843LtyDo5M0RCKMNRU4OZnAsZ6k1T4PvmLmvSwIp9ymFPh0lTjQdph554MW1oqSSQ0dZWaRE4z60SOm6qEGRqCPLw7BscbwFsCugqyBeh/H0lfROkxzjHOz+jlbXz208WviGZck48V7Lx2OXBEQCpAtTqKbcsbcEVKk8fQxfJFYfvmDNs+6VAvCZqmuZB2IOtAxmGgJ2DnngzfPKv55a2gqmB6JdQloaYCqj2o8MCz/iNiDknyPmSLkC4io+Oo1Lgd1x/G53VaSXPqshaJxctKBYcEJAFqmaPYvKCWhoQzqf0eKWoOJjUXmjXzlgvzZgEZuNAD/3hSOFMJ2fnA9YZHpQczqmBaAqoroNKFhGv2a5gOn2IAOR8yRUjlYfQCFE4BDfTzHL/PKNuBEXUlJ0zt0GLnt7WANIHaNKuS5TUuxVjqVUoRCGS1kCpC1u50k47R7gsP+Lx6UEPSzGad2VBfC/UVUJuAqgRUuOCGVsEMrvIBZAMYPGuUQjNQARziNC9xPwHdVwTEJgAHOGrPTmQmqNVJh1uneyQcs0O8THFmZExo2ac43zWdh54foGtAoA4qF0PDfKithOoEVFn3KllFQ1HDuRNwpgej0jzQhzAdxZPcTZbdVwRkQvX/EbBFMCO+RcBHGxLMSSozyhFjmUkNX6DYf2+RNZshWXAZueiw5fk8qWpQLjSvhbrp1ioOePagRRR07YKBgmXWC0zHbJ8HKfIid5L7NYBMOBC6XcEbYg9dpgPXJBTtMxN4qtw6IoJyHZyqJIHn0eWNs2dBhqXL4I6Vis7DIo8fQWkXKucizU2oucvMLlAVYPebkJ0N1GE2G/OB83a9nb/kKE9R5MSvBWQCqOnA08BWAfFAzQLWV7tcX+fhKTsScx2cigSugsMX8+wfydOt4YI9J3SAcfj6gXUo6vkajeZMscaF3Djoq8zJDg5QQHBRnOUX/JBvAnuBPkD/X4CEKfo+gX9QMEuDVIFqAG6d5tFS7eB6Lj3jATuGCgwBw7EDVODnHtz9ujlkgnpWsJ4dNDKXuTag+4F6hGEUVfTyPb5OjjeAc4Tfu1z6/Q1i52+AR8WEDgnrBa71hGx09idihLi+EwbKDk0TQJF6NrOHFpYhCEUUHgHbeYJu/gVjzNErruy/CRj7A4M/EfhKnLhEIN7B/Pigp5NL/MigGTiLyx28wGru4Qjf5xgP8z5piGaA/y9ApgA2D/gSBlAS+K6Cf+qAw1dE4GngM0ArK+nm8JQ/JZhw/S9dtEONwVO5dQAAAABJRU5ErkJggg==);
 height: 50px;
 width: 100%;
 background-repeat: no-repeat;
}

#banner #black-text {
 font-size: 1.1em;
 color: white;
 padding: 0.5em 40px 0.4em 60px;
 line-height: 1.3em;
 text-align: center;
}
</style>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Payments" href="../Payments.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Whonix requires money to stay alive.
     </div>
</a>
</div>
</div></div></div> </div>
</div>
<div id="mw-js-message" style="display:none;"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up">Â Actions</span></i></a>
<!--RTL -->
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="/wiki/Dev/Qubes" href="../Dev/Qubes.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Dev/Qubes&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Dev/Qubes&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Dev/Qubes&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Dev/Qubes&amp;action=history" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<!--RTL -->
<div id="content">
<h1 class="title" id="firstHeading">Dev/Qubes</h1>
<h5 class="subtitle" id="siteSub"><span class="subpages">&lt; <a class="mw-redirect" data-href="/wiki/Dev" href="../Dev.html" title="Dev">Dev</a></span></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output">
<p>
</p>
<div class="toc" id="toc"><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Qubes_Persistence"><span class="tocnumber">1</span> <span class="toctext">Qubes Persistence</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Debian_Template"><span class="tocnumber">2</span> <span class="toctext">Debian Template</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#bind-dirs_vs_Tor"><span class="tocnumber">3</span> <span class="toctext">bind-dirs vs Tor</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Config_Files_Changes"><span class="tocnumber">4</span> <span class="toctext">Config Files Changes</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#IPs"><span class="tocnumber">5</span> <span class="toctext">IPs</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Tor_Browser"><span class="tocnumber">6</span> <span class="toctext">Tor Browser</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Run_updates_over_Proxy.2FTor"><span class="tocnumber">7</span> <span class="toctext">Run updates over Proxy/Tor</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Time_Sync"><span class="tocnumber">8</span> <span class="toctext">Time Sync</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Introduction"><span class="tocnumber">8.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Instructions"><span class="tocnumber">8.2</span> <span class="toctext">Instructions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#How_big_is_Qubes_OS.27s_user_base.3F"><span class="tocnumber">9</span> <span class="toctext">How big is Qubes OS's user base?</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#IP_Spoofing_Protection"><span class="tocnumber">10</span> <span class="toctext">IP Spoofing Protection</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Inter-VM_Networking"><span class="tocnumber">11</span> <span class="toctext">Inter-VM Networking</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Forum_Discussion"><span class="tocnumber">12</span> <span class="toctext">Forum Discussion</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#IP"><span class="tocnumber">13</span> <span class="toctext">IP</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#grep_-r_10.152.152.10_.2A"><span class="tocnumber">13.1</span> <span class="toctext">grep -r 10.152.152.10 *</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#grep_-r_10.152.152.11_.2A"><span class="tocnumber">13.2</span> <span class="toctext">grep -r 10.152.152.11 *</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Misc"><span class="tocnumber">14</span> <span class="toctext">Misc</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Time"><span class="tocnumber">15</span> <span class="toctext">Time</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#tb-updater_vs_TemplateVM"><span class="tocnumber">16</span> <span class="toctext">tb-updater vs TemplateVM</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#prerequisite_knowledge"><span class="tocnumber">16.1</span> <span class="toctext">prerequisite knowledge</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Implementation_as_of_Qubes-Whonix_11"><span class="tocnumber">16.2</span> <span class="toctext">Implementation as of Qubes-Whonix 11</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Brainstorming"><span class="tocnumber">16.3</span> <span class="toctext">Brainstorming</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Headless_TBB_Internal_Updater_Updates_in_AppVMs"><span class="tocnumber">16.3.1</span> <span class="toctext">Headless TBB Internal Updater Updates in AppVMs</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#up_to_date_versions_of_Tor_Browsers_in_newly_created_AppVMs_inherited_from_updated_TemplateVMs"><span class="tocnumber">16.3.2</span> <span class="toctext">up to date versions of Tor Browsers in newly created AppVMs inherited from updated TemplateVMs</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#keep_as_is"><span class="tocnumber">16.3.3</span> <span class="toctext">keep as is</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#Forum_Discussion_2"><span class="tocnumber">16.4</span> <span class="toctext">Forum Discussion</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28"><a href="#UpdateVM"><span class="tocnumber">17</span> <span class="toctext">UpdateVM</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="#Upgrade_through_Clearnet"><span class="tocnumber">18</span> <span class="toctext">Upgrade through Clearnet</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Qubes_R3.2"><span class="tocnumber">18.1</span> <span class="toctext">Qubes R3.2</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Qubes_R4"><span class="tocnumber">18.2</span> <span class="toctext">Qubes R4</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#Build"><span class="tocnumber">19</span> <span class="toctext">Build</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#Build_Single_Qubes_Package"><span class="tocnumber">19.1</span> <span class="toctext">Build Single Qubes Package</span></a>
<ul>
<li class="toclevel-3 tocsection-34"><a href="#Debian_dev"><span class="tocnumber">19.1.1</span> <span class="toctext">Debian dev</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#Fedora_rpm"><span class="tocnumber">19.1.2</span> <span class="toctext">Fedora rpm</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-36"><a href="#Build_Qubes-Whonix_Templates"><span class="tocnumber">19.2</span> <span class="toctext">Build Qubes-Whonix Templates</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Official_Builds"><span class="tocnumber">19.3</span> <span class="toctext">Official Builds</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#Test"><span class="tocnumber">20</span> <span class="toctext">Test</span></a></li>
<li class="toclevel-1 tocsection-39"><a href="#Qubes_VM_Manger_Firewall_Tab_Settings"><span class="tocnumber">21</span> <span class="toctext">Qubes VM Manger Firewall Tab Settings</span></a></li>
<li class="toclevel-1 tocsection-40"><a href="#Qubes_Upstream_Bugs"><span class="tocnumber">22</span> <span class="toctext">Qubes Upstream Bugs</span></a></li>
<li class="toclevel-1 tocsection-41"><a href="#stable_vs_testing"><span class="tocnumber">23</span> <span class="toctext">stable vs testing</span></a></li>
<li class="toclevel-1 tocsection-42"><a href="#Handling_of_file_system_in_TemplateVMs_vs_TemplateBasedVMs"><span class="tocnumber">24</span> <span class="toctext">Handling of file system in TemplateVMs vs TemplateBasedVMs</span></a>
<ul>
<li class="toclevel-2 tocsection-43"><a href="#Qubes_R3"><span class="tocnumber">24.1</span> <span class="toctext">Qubes R3</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Qubes_Proposal"><span class="tocnumber">24.2</span> <span class="toctext">Qubes Proposal</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-45"><a href="#Split_GPG"><span class="tocnumber">25</span> <span class="toctext">Split GPG</span></a></li>
<li class="toclevel-1 tocsection-46"><a href="#sys-whonix_as_Qubes_FirewallVM"><span class="tocnumber">26</span> <span class="toctext">sys-whonix as Qubes FirewallVM</span></a></li>
<li class="toclevel-1 tocsection-47"><a href="#Connection_Issues"><span class="tocnumber">27</span> <span class="toctext">Connection Issues</span></a></li>
<li class="toclevel-1 tocsection-48"><a href="#Matrix_of_Qubes_VM_Types"><span class="tocnumber">28</span> <span class="toctext">Matrix of Qubes VM Types</span></a></li>
<li class="toclevel-1 tocsection-49"><a href="#Network_in_TemplateVMs"><span class="tocnumber">29</span> <span class="toctext">Network in TemplateVMs</span></a></li>
<li class="toclevel-1 tocsection-50"><a href="#Torified_Updates_Proxy"><span class="tocnumber">30</span> <span class="toctext">Torified Updates Proxy</span></a>
<ul>
<li class="toclevel-2 tocsection-51"><a href="#sys-whonix"><span class="tocnumber">30.1</span> <span class="toctext">sys-whonix</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Whonix_TemplateVMs"><span class="tocnumber">30.2</span> <span class="toctext">Whonix TemplateVMs</span></a>
<ul>
<li class="toclevel-3 tocsection-53"><a href="#Qubes_R3.2_2"><span class="tocnumber">30.2.1</span> <span class="toctext">Qubes R3.2</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#Qubes_R4_2"><span class="tocnumber">30.2.2</span> <span class="toctext">Qubes R4</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-55"><a href="#Related"><span class="tocnumber">30.3</span> <span class="toctext">Related</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-56"><a href="#Updates_Proxy_Debugging"><span class="tocnumber">31</span> <span class="toctext">Updates Proxy Debugging</span></a></li>
<li class="toclevel-1 tocsection-57"><a href="#Troubleshooting"><span class="tocnumber">32</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-58"><a href="#Connectivity_Issues"><span class="tocnumber">32.1</span> <span class="toctext">Connectivity Issues</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-59"><a href="#bind-dirs_flow_chart"><span class="tocnumber">33</span> <span class="toctext">bind-dirs flow chart</span></a></li>
<li class="toclevel-1 tocsection-60"><a href="#qubes-whonix-postinit.service_flow_chart"><span class="tocnumber">34</span> <span class="toctext">qubes-whonix-postinit.service flow chart</span></a></li>
<li class="toclevel-1 tocsection-61"><a href="#Qubes-Whonix_14_release_testing"><span class="tocnumber">35</span> <span class="toctext">Qubes-Whonix 14 release testing</span></a></li>
<li class="toclevel-1 tocsection-62"><a href="#lightdm_autologin"><span class="tocnumber">36</span> <span class="toctext">lightdm autologin</span></a></li>
<li class="toclevel-1 tocsection-63"><a href="#ssh_into_Qubes_dom0"><span class="tocnumber">37</span> <span class="toctext">ssh into Qubes dom0</span></a></li>
<li class="toclevel-1 tocsection-64"><a href="#releasever"><span class="tocnumber">38</span> <span class="toctext">releasever</span></a></li>
<li class="toclevel-1 tocsection-65"><a href="#R3.1_template_package_in_dom0_R3.2"><span class="tocnumber">39</span> <span class="toctext">R3.1 template package in dom0 R3.2</span></a></li>
<li class="toclevel-1 tocsection-66"><a href="#UEFI"><span class="tocnumber">40</span> <span class="toctext">UEFI</span></a></li>
<li class="toclevel-1 tocsection-67"><a href="#yubikey"><span class="tocnumber">41</span> <span class="toctext">yubikey</span></a></li>
<li class="toclevel-1 tocsection-68"><a href="#Qubes_VM_debug_mode"><span class="tocnumber">42</span> <span class="toctext">Qubes VM debug mode</span></a></li>
<li class="toclevel-1 tocsection-69"><a href="#salt"><span class="tocnumber">43</span> <span class="toctext">salt</span></a>
<ul>
<li class="toclevel-2 tocsection-70"><a href="#Qubes_R3.2_3"><span class="tocnumber">43.1</span> <span class="toctext">Qubes R3.2</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Qubes_R4_3"><span class="tocnumber">43.2</span> <span class="toctext">Qubes R4</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-72"><a href="#qvm-tags"><span class="tocnumber">44</span> <span class="toctext">qvm-tags</span></a>
<ul>
<li class="toclevel-2 tocsection-73"><a href="#Introduction_2"><span class="tocnumber">44.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-74"><a href="#anon-vm_tag"><span class="tocnumber">44.2</span> <span class="toctext">anon-vm tag</span></a></li>
<li class="toclevel-2 tocsection-75"><a href="#anon-gateway_tag"><span class="tocnumber">44.3</span> <span class="toctext">anon-gateway tag</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#whonix-updatevm_tag"><span class="tocnumber">44.4</span> <span class="toctext">whonix-updatevm tag</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#view_tags"><span class="tocnumber">44.5</span> <span class="toctext">view tags</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-78"><a href="#tags_inheritance"><span class="tocnumber">45</span> <span class="toctext">tags inheritance</span></a></li>
<li class="toclevel-1 tocsection-79"><a href="#qvm-features"><span class="tocnumber">46</span> <span class="toctext">qvm-features</span></a></li>
<li class="toclevel-1 tocsection-80"><a href="#Connection_through_Qubes_Updates_Proxy"><span class="tocnumber">47</span> <span class="toctext">Connection through Qubes Updates Proxy</span></a>
<ul>
<li class="toclevel-2 tocsection-81"><a href="#R3.2"><span class="tocnumber">47.1</span> <span class="toctext">R3.2</span></a></li>
<li class="toclevel-2 tocsection-82"><a href="#R4"><span class="tocnumber">47.2</span> <span class="toctext">R4</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-83"><a href="#See_Also"><span class="tocnumber">48</span> <span class="toctext">See Also</span></a></li>
<li class="toclevel-1 tocsection-84"><a href="#Footnotes"><span class="tocnumber">49</span> <span class="toctext">Footnotes</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="Qubes_Persistence">Qubes Persistence</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=1.html" title="Edit section: Qubes Persistence">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><b>Table:</b> <i>Qubes R4 Inheritance and Persistence</i>
</p>
<table class="wikitable">
<tbody><tr>
<th scope="col">
</th>
<th scope="col">Inheritance <sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup>
</th>
<th scope="col">Persistence <sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup>
</th></tr>
<tr>
<th scope="row">TemplateVM
</th>
<td>n/a
</td>
<td>Everything
</td></tr>
<tr>
<th>TemplateBasedVM
</th>
<td><i>/etc/skel/</i> to <i>/home/</i>
</td>
<td><i>/rw/</i> (includes <i>/home/</i> and <a class="external text" data-href="https://www.qubes-os.org/doc/bind-dirs/" href="https://www.qubes-os.org/doc/bind-dirs/" rel="noreferrer noopener" target="_blank"><code>bind-dirs</code></a>)
</td></tr>
<tr>
<th scope="row"><a class="external text" data-href="https://www.qubes-os.org/doc/glossary/#dvm-template" href="https://www.qubes-os.org/doc/glossary/" rel="noreferrer noopener" target="_blank">DVM Template</a> <sup class="reference" id="cite_ref-3"><a href="#cite_note-3">[3]</a></sup>
</th>
<td><i>/etc/skel/</i> to <i>/home/</i>
</td>
<td><i>/rw/</i> (includes <i>/home/</i> and <a class="external text" data-href="https://www.qubes-os.org/doc/bind-dirs/" href="https://www.qubes-os.org/doc/bind-dirs/" rel="noreferrer noopener" target="_blank"><code>bind-dirs</code></a>)
</td></tr>
<tr>
<th scope="row"><a class="external text" data-href="https://www.qubes-os.org/doc/dispvm/" href="https://www.qubes-os.org/doc/dispvm/" rel="noreferrer noopener" target="_blank">DisposableVM</a>
</th>
<td><i>/rw/</i> (includes <i>/home/</i> and <a class="external text" data-href="https://www.qubes-os.org/doc/bind-dirs/" href="https://www.qubes-os.org/doc/bind-dirs/" rel="noreferrer noopener" target="_blank"><code>bind-dirs</code></a>)
</td>
<td>Nothing
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Debian_Template">Debian Template</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=2.html" title="Edit section: Debian Template">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external free" data-href="https://groups.google.com/forum/#!topic/qubes-devel/EBxvtMlwp5k" href="https://groups.google.com/forum/" rel="noreferrer noopener" target="_blank">https://groups.google.com/forum/#!topic/qubes-devel/EBxvtMlwp5k</a>
</p>
<h1><span class="mw-headline" id="bind-dirs_vs_Tor">bind-dirs vs Tor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=3.html" title="Edit section: bind-dirs vs Tor">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Does bind-dirs will be run before /lib/systemd/system/tor@default.service?
</p><p>Yes.
</p><p>qubes-mount-dirs.service has Before=local-fs.target, which it ordered before sysinit.target. After=sysinit.target in turns is included by default (unless DefaultDependencies=noDefaultDependencies=no).
</p>
<h1><span class="mw-headline" id="Config_Files_Changes">Config Files Changes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=4.html" title="Edit section: Config Files Changes">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/RQlLPOn5yRsJ" href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/RQlLPOn5yRsJ" rel="noreferrer noopener" target="_blank">source</a>
</p><p>I don't know how rpm packaging works. However, the TorVM rpm packaging seems simpler to me and introduce less overhead than Debian packaging at first view. Is there something like config-package-dev for Fedora? config-package-dev is a package to overtake ownership of other
&gt; package's files. Such as, in Debian the Tor package owns /usr/share/tor/tor-service-defaults-torrc. Whonix needs to modify that file and keep it updated. config-package-dev can be used to avoid getting the file being overwritten when upstream releases and upgrade. Is there something like this for Fedora or is this even required? That would make a port much simpler, because for many parts, it is just diverted config files.
</p><p>qubes-tor pacakages provides own config file (tor --defaults-torrc option used), so no need to override the one provided by tor package.
</p><p>But to answer your question - no, rpm do not have option to take ownership of files from other packages, but to workaround this (rather sensible) limitation you can modify the config in triggers (so the file will be modified after each original package update).
</p>
<h1><span class="mw-headline" id="IPs">IPs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=5.html" title="Edit section: IPs">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-devel/jxr89--oGs0/IcA4pia70-0J" href="https://groups.google.com/d/msg/qubes-devel/jxr89--oGs0/IcA4pia70-0J" rel="noreferrer noopener" target="_blank">source</a>
</p><p>Qubes uses non-fixed LAN IPs? How do internal LAN IPs get assigned to TorVM / AppVMs?
</p><p>QubesVm IP address is generated based on its netvm ID (subnet number) and the said VM static ID, so unless user is switching netvm, the IP is pretty static. We've chosen 10.137.&lt;subnet-id&gt;.&lt;vm-id&gt; which is quite exotic so conflicts with real LAN are very rare (even if rather harmless in isolated network).
</p>
<h1><span class="mw-headline" id="Tor_Browser">Tor Browser</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=6.html" title="Edit section: Tor Browser">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-devel/Dd0MVbIam5I/9z6GblxYQHwJ" href="https://groups.google.com/d/msg/qubes-devel/Dd0MVbIam5I/9z6GblxYQHwJ" rel="noreferrer noopener" target="_blank">source</a>
</p><p>In your Torless TBB launcher script for use with Qubes' transparent Tor proxy, TOR_SOCKS_HOST=10.137.3.1. Is this supposed to be the same for all Qubes machines regardless of how many ProxyVMs users have created (or other user settings)? Or is the user supposed to change this before using the script?
</p><p>Perhaps it is good idea to add some firewall rule in TorVM to redirect traffic to any 10.137.0.0/16 IP + port 9050/9049 to the tor running in TorVM. This way AnonVM can use any IP as a sock proxy address.
</p>
<h1><span id="Run_updates_over_Proxy/Tor"></span><span class="mw-headline" id="Run_updates_over_Proxy.2FTor">Run updates over Proxy/Tor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=7.html" title="Edit section: Run updates over Proxy/Tor">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-devel/2vnGqsoM9p0/0YCltU-Qs-MJ" href="https://groups.google.com/d/msg/qubes-devel/2vnGqsoM9p0/0YCltU-Qs-MJ" rel="noreferrer noopener" target="_blank">source</a>
</p><p>Without wasting a lot space, having lots of standalone VMs... How could one persistently install software in QubesOS using package managers over Tor just for a specific VM? Routing all traffic over Tor is also an option, but not a ideal one either (having some clearnet traffic is better for various reasons).
</p><p>Set TorVM as netvm for the template. By default template updates are routed via "update proxy" (simple http proxy, which allow access only to
yum-repository-like sites). This proxy is running in netvm, so after TorVM. Because of that its you need to disable 'yum-proxy-setup' service for this
template and allow some traffic in the firewall settings. Or enable 'qubes-yum-proxy' service in TorVM and ensure that its traffic goes through tor.
</p>
<h1><span class="mw-headline" id="Time_Sync">Time Sync</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=8.html" title="Edit section: Time Sync">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=9.html" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Discussion about insecurity of NTP: <br/>
<a class="external free" data-href="https://groups.google.com/d/msg/qubes-devel/YHK_rAUm0s0/ARrBPHrf0fkJ" href="https://groups.google.com/d/msg/qubes-devel/YHK_rAUm0s0/ARrBPHrf0fkJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-devel/YHK_rAUm0s0/ARrBPHrf0fkJ</a>
</p><p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/Lh8T7ZL6tdIJ" href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/Lh8T7ZL6tdIJ" rel="noreferrer noopener" target="_blank">source</a>
</p><p>Can Qubes OS leave VM's clocks untouched and keep time sync to the VM or is there some forced-VM-timesync-with-dom-0 that can not be turned off? In that case, that would be a bad.
</p><p>Currently time synchronization is done in some silly way: qvm-sync-clock called each 6min from dom0 cron. That tool fetch the current time using
ntpdate in netvm (VM set as clockvm in qubes-prefs), then pass the result to 'date -s' in each VM.
</p><p>You can disable this mechanism globally by unsetting(*) clockvm (qubes-prefs -s clockvm none).
</p><p>(*) Which apparently was broken, fix will be included in updates soon.
</p>
<h2><span class="mw-headline" id="Instructions">Instructions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=10" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=10.html" title="Edit section: Instructions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>UNTESTED!</b>
</p><p>Install a comfortable editor (optional!).
</p>
<pre>sudo qubes-dom0-update kate
</pre>
<p>Edit your VM settings. (Feel free to drop 'EDITOR=kate' and/or to use an editor of your choice.)
</p>
<pre>sudo EDITOR=kate virsh edit whonix-ws
</pre>
<p>Find the following block.
</p>
<pre>&lt;clock offset='utc' adjustment='reset'&gt;
   &lt;timer name='tsc' mode='native'/&gt;
&lt;/clock&gt;
</pre>
<p>Replace it with the following.
</p>
<pre>  &lt;clock offset='utc'&gt;
    &lt;timer name='rtc' tickpolicy='catchup' track='guest'/&gt;
    &lt;timer name='xen' present='no'/&gt;
  &lt;/clock&gt;
</pre>
<h1><span id="How_big_is_Qubes_OS's_user_base?"></span><span class="mw-headline" id="How_big_is_Qubes_OS.27s_user_base.3F">How big is Qubes OS's user base?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=11" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=11.html" title="Edit section: How big is Qubes OS's user base?">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/Kib1jFLZanUJ" href="https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/Kib1jFLZanUJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/AqZV65yZLuU/Kib1jFLZanUJ</a>
</p>
<h1><span class="mw-headline" id="IP_Spoofing_Protection">IP Spoofing Protection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=12" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=12.html" title="Edit section: IP Spoofing Protection">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://groups.google.com/d/msg/qubes-devel/le7-Rrq6yxY/nhhpXX1QNRsJ" href="https://groups.google.com/d/msg/qubes-devel/le7-Rrq6yxY/nhhpXX1QNRsJ" rel="noreferrer noopener" target="_blank">source</a>
</p><p>AppVMs can't spoof each other in Qubes' network.
</p><p>Corollary: stream isolation cannot be circumvented.
</p>
<h1><span class="mw-headline" id="Inter-VM_Networking">Inter-VM Networking</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=13" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=13.html" title="Edit section: Inter-VM Networking">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><s>Current Qubes + Whonix implementation has both the Whonix-Gateway and Whonix-Workstation connected to the same backend FirewallVM and iptables forwarding is manually established between the Whonix IP addresses. This current method is really just an efficient hack for our initial Qubes + Whonix implementation. The native/proper way to network VMs in Qubes is via chaining their networking "backend" together, which is part of Xen networking structure. This is how other VMs in Qubes are networked, including TorVM. According to Qubes devs, these Xen backends provide simple point-to-point networking between VMs. So this would be advantageous for further isolation of inter-VM Whonix traffic, since, currently, all inter-VM traffic is routed through the internet-facing FirewallVM, which can also be shared by other VMs. This current implementation with a shared FirewallVM could be somewhat of a security concern for inter-VM traffic, and a reason to move to native/proper isolated point-to-point "backend" networking. Also, in the future, it is desirable to leverage full ProxyVM/ServiceVM networking between Whonix-Gateway and Whonix-Workstation, as the TorVM does. ProxyVM utilizes Xen "backend" networking but automates it with transparent Qubes GUI networking, making use of dynamically created virtual networking interfaces. Whonix may need to add onto or adjust its internal networking setup to be compatible with such native Qubes networking.</s>
</p><p>Older, perhaps outdated discussions related to this topic:
</p>
<ul><li><a class="external free" data-href="https://groups.google.com/d/topic/qubes-users/RFXoZ3zt-PE" href="https://groups.google.com/d/topic/qubes-users/RFXoZ3zt-PE" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/topic/qubes-users/RFXoZ3zt-PE</a></li>
<li><a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/0LU35M6GPecJ" href="https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/0LU35M6GPecJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/0LU35M6GPecJ</a></li>
<li><a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/96odaNoBVRwJ" href="https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/96odaNoBVRwJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/GhgWH5mHf2E/96odaNoBVRwJ</a></li></ul>
<p>Newer discussion:
</p>
<ul><li><a class="external free" data-href="https://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other" href="https://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/multiple-whonix-workstations-that-can-communicate-with-each-other</a></li>
<li><a class="external free" data-href="https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546#13546" href="https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546" rel="noreferrer noopener" target="_blank">https://tor.stackexchange.com/questions/13522/how-to-configure-whonix-gateway-for-communication-between-two-local-workstations/13546#13546</a></li></ul>
<h1><span class="mw-headline" id="Forum_Discussion">Forum Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=14" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=14.html" title="Edit section: Forum Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a class="external text" data-href="https://forums.whonix.org/t/qubes-whonix/374" href="https://forums.whonix.org/t/qubes-whonix/374" rel="noreferrer noopener" target="_blank">Qubes + Whonix</a>
</p>
<h1><span class="mw-headline" id="IP">IP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=15" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=15.html" title="Edit section: IP">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span id="grep_-r_10.152.152.10_*"></span><span class="mw-headline" id="grep_-r_10.152.152.10_.2A">grep -r 10.152.152.10 *</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=16" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=16.html" title="Edit section: grep -r 10.152.152.10 *">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>packages/anon-ws-leaktest/usr/lib/leaktest-workstation/simple_ping.py:target = "10.152.152.10"
</pre>
<p>Let's make a patch adding command line support implementing either --qubes or --ip?
</p>
<pre>packages/whonixcheck/usr/lib/whonixcheck/preparation:      GATEWAY_IP="10.152.152.10"
packages/whonixcheck/usr/lib/whonixcheck/preparation:      GATEWAY_IP="10.152.152.10"
</pre>
<p>Overruleable. These variables get only set there if they are not yet set. So they can be manipulated by using environment variables, or better by dropping a config snippet to <span style="border:1px dotted #005cb9">/etc/whonix.d/40_qubes</span>, <span style="border:1px dotted #005cb9">/etc/whonix.d/40_qubes</span> that contains: export GATEWAY_IP="&lt;qubes-ip&gt;" <br/> (Make that <span style="border:1px dotted #005cb9">40_qubes_autogenerated</span> if the file gets autogenerated.)
</p>
<pre>packages/anon-kde-streamiso/usr/share/anon-kde-streamiso/share/config/kioslaverc:socksProxy=http://10.152.152.10 9122
</pre>
<p>We could implement a package anon-kde-streamiso-qubes, that overrules anon-kde-streamiso and that gets only installed when using --qubes. (<a class="external text" data-href="http://lists.kde.org/?l=kde&amp;m=141130406809446&amp;w=2" href="http://lists.kde.org/?l=kde&amp;m=141130406809446&amp;w=2" rel="noreferrer noopener" target="_blank">KDE config files are stackable although debuging is a bit cumbersome</a>.) We'd just have to make sure the path to anon-kde-streamiso-qubes comes (before or after?) anon-kde-streamiso's path in the KDEDIRS envrionment variable.
</p><p>Or we could install either anon-kde-streamiso or anon-kde-streamiso-qubes (--qubes) depending on which build switch is being used.
</p>
<pre>packages/anon-kde-streamiso/debian/control: settings are set, for KDE applications to socks 10.152.152.10:9122.
packages/anon-kde-streamiso/README.md:settings are set, for KDE applications to socks 10.152.152.10:9122.
</pre>
<p>Just a package description strings doing nothing. Either nevermind or rewrite the comment.
</p>
<pre>packages/whonix-base-files/etc/apt/apt.conf.d/90whonix:## running on 127.0.0.1:9104 forwarding to 10.152.152.10:9104.
packages/whonix-base-files/etc/apt/apt.conf.d/90whonix:## running on 127.0.0.1:9104 forwarding to 10.152.152.10:9104.
packages/whonix-base-files/etc/apt/apt.conf.d/90whonix:## running on 127.0.0.1:9104 forwarding to 10.152.152.10:9104.
packages/whonix-base-files/etc/apt/apt.conf.d/90whonix:#Acquire::socks::proxy "socks://10.152.152.10:9104/";
</pre>
<p>These are just comments doing nothing. We can either nevermind or rewrite the comments.
</p>
<pre>packages/whonix-ws-firewall/usr/bin/whonix_firewall:[ -n "$GATEWAY_IP" ] || GATEWAY_IP="10.152.152.10"
packages/whonix-ws-firewall/etc/whonix_firewall.d/30_default.conf:GATEWAY_IP="10.152.152.10"
</pre>
<p>Overrulable. <br/>
File: /etc/whonix_firewall.d/40_qubes <br/>
Content: GATEWAY_IP="&lt;qubes-ip&gt;" <br/>
Note: Keep a possible race condiation in mind. Depending on how that config snippnett is created and when whonix_firewall starts. Should the config change after whonix_firewall was already loaded, reload Whonix's firewall ("sudo whonix_firewall").
</p>
<pre>packages/anon-shared-helper-scripts/usr/lib/anon-shared-helper-scripts/tor_bootstrap_check.bsh:            TOR_CONTROL_HOST="10.152.152.10"
packages/anon-shared-helper-scripts/usr/lib/anon-shared-helper-scripts/tor_bootstrap_check.bsh:            TOR_CONTROL_HOST="10.152.152.10"
</pre>
<p>Overruleable. These variables get only set there if they are not yet set. So they can be manipulated by using environment variables, or better by dropping a config snippet to <span style="border:1px dotted #005cb9">/etc/whonix.d/40_qubes</span>, <span style="border:1px dotted #005cb9">/etc/whonix.d/40_qubes</span> and <span style="border:1px dotted #005cb9">/etc/torbrowser.d/40_qubes</span> that contains: export TOR_CONTROL_HOST="&lt;qubes-ip&gt;" <br/>
(Make that <span style="border:1px dotted #005cb9">40_qubes_autogenerated</span> if the file gets autogenerated.)
</p>
<pre>packages/uwt/usr/bin/uwt:        echo "         sudo $NAME -i 10.152.152.10 -p 9104 /usr/bin/apt-get --yes dist-upgrade"
</pre>
<p>Just an output string when using "uwt -h". Not overrulable at the moment. We can either put both IPs in there. Or would it be worth sourcing the /etc/uwt.d folder to make that IP configurable? (It is also a performance question.)
</p>
<pre>packages/uwt/etc/uwt.d/30_uwt_default:      uwtwrapper_gateway_ip="10.152.152.10"
</pre>
<p>Overrulable. Create a file /etc/uwt.d/40_qubes with content: uwtwrapper_gateway_ip="&lt;qubes-ip&gt;".
</p>
<pre>packages/uwt/man/uwt.1.ronn:`sudo uwt -t 5 -i 10.152.152.10 -p 9104 /usr/bin/apt-get.anondist-orig --yes dist-upgrade`
packages/uwt/man/uwt.1.ronn:    uwt -t 5 -i 10.152.152.10 -p 9109 /usr/bin/wget ${1+"$@"}
</pre>
<p>Just a man page documentation string. We could modify the man page to cover both use cases.
</p>
<pre>packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:TransPort 10.152.152.10:9040
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:DnsPort 10.152.152.10:53 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9050
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9100
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:#SocksPort 10.152.152.10:9100 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9101 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9102 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9103 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9104
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9105 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9106 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9107 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9108 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9109 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9110 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9111
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9112
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9113
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9114 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9115 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9116 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9117 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9118 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9119
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9120 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9121 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9122
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9123
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9124
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:##  127.0.0.1:9150 to 10.152.152.10:9150 [as part of the
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9150
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9152
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9153
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9154
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9155
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9156
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9157
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9158
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9159
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9160 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9161 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9162 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9163 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9164 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9165 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9166 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9167 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9168 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9169 IsolateDestAddr
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9170 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9171 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9172 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9173 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9174 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9175 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9176 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9177 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9178 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9179 IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9180 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9181 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9182 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9183 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9184 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9185 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9186 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9187 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9188 IsolateDestAddr IsolateDestPort
packages/anon-gw-anonymizer-config/usr/share/tor/tor-service-defaults-torrc.anondist:SocksPort 10.152.152.10:9189 IsolateDestAddr IsolateDestPort
</pre>
<p>Not overrulable. Unfortunatly Tor does not support variables in config files. Should I (Patrick) make a feature request against Tor?
</p><p>If you could use static IPs, we could fall back to use Debian packaging's patching mechanism. But that would be burdensome maintenance wise. Because there would be need for a separate qubes repository, that always has the patch applied. Or users would always have to upgrade from source code, which seems inconvenient. Or can we think of something else?
</p>
<pre>packages/tb-updater/usr/bin/update-torbrowser:      [ -n "$GATEWAY_IP" ] || GATEWAY_IP="10.152.152.10"
</pre>
<p>Overrulable. Create a file <span style="border:1px dotted #005cb9">/etc/torbrowser.d/40_qubes</span> with content: GATEWAY_IP="&lt;qubes-ip&gt;".
</p>
<pre>packages/whonix-legacy/debian/whonix-legacy.preinst:         sed -i 's/192.168.0.10/10.152.152.10/g' "/home/user/.torchat/torchat.ini" || true
packages/whonix-legacy/debian/whonix-legacy.preinst:         sed -i 's/192.168.0.10/10.152.152.10/g' "/home/user/.xchat2/xchat.conf" || true
</pre>
<p>No change required here. Only applies to Whonix 8.3.
</p>
<pre>packages/{{whonix-gw}}-network-conf/etc/network/interfaces.whonix:       address 10.152.152.10
</pre>
<p>TODO research: Does ifupdown support variables? If not... We have to think of something.
</p>
<pre>packages/anon-ws-dns-conf/etc/resolv.conf.anondist:nameserver 10.152.152.10
</pre>
<p>TODO research: Does /etc/resolv.conf support variables? If not... We have to think of something.
</p>
<pre>packages/anon-ws-dns-conf/debian/control: 10.152.152.10, where an Anon-Gateway is supposed to provide a DnsPort on port
packages/anon-ws-dns-conf/README.md:10.152.152.10, where an Anon-Gateway is supposed to provide a DnsPort on port
</pre>
<p>Just documentation strings. Either nevermind or patch documentation.
</p>
<pre>packages/sdwdate-plugin-anon-shared-streamiso/etc/sdwdate.d/31_anon_dist_stream_isolation_plugin:PROXY="10.152.152.10:9108"
</pre>
<p>Overrulable. Create a file /etc/sdwdate.d/40_qubes with content: PROXY="&lt;qubes-ip&gt;"
</p>
<pre>packages/sdwdate-plugin-anon-shared-streamiso/debian/control: Sets sdwdate's proxy settings to socks 10.152.152.10:9108.
packages/sdwdate-plugin-anon-shared-streamiso/README.md:Sets sdwdate's proxy settings to socks 10.152.152.10:9108.
</pre>
<p>Just documentation strings. Either nevermind or patch documentation.
</p>
<pre>packages/anon-ws-disable-stacked-tor/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh:##   127.0.0.1:9050 to Whonix-Gateway 10.152.152.10:9050 and
packages/anon-ws-disable-stacked-tor/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh:##   127.0.0.1:9150 to Whonix-Gateway 10.152.152.10:9150.
packages/anon-ws-disable-stacked-tor/usr/lib/anon-ws-disable-stacked-tor/torbrowser.sh:#export TOR_SOCKS_HOST="10.152.152.10"
</pre>
<p>Just documentation strings. Either nevermind or patch documentation.
</p>
<pre>packages/anon-ws-disable-stacked-tor/etc/rinetd.conf.anondist:127.0.0.1        9050      10.152.152.10    9050
packages/anon-ws-disable-stacked-tor/etc/rinetd.conf.anondist:127.0.0.1        9150      10.152.152.10    9150
packages/anon-ws-disable-stacked-tor/etc/rinetd.conf.anondist:127.0.0.1        11109     10.152.152.10    9119
packages/anon-ws-disable-stacked-tor/etc/rinetd.conf.anondist:127.0.0.1        9051      10.152.152.10    9052
packages/anon-ws-disable-stacked-tor/etc/rinetd.conf.anondist:127.0.0.1        9151      10.152.152.10    9052
</pre>
<p>Maybe <a class="external text" data-href="https://github.com/Whonix/Whonix/issues/341" href="https://github.com/Whonix/Whonix/issues/341" rel="noreferrer noopener" target="_blank">anon-ws-disable-stacked-tor: consider replacing rinetd with rlinetd</a> (probably not a great idea).
</p><p>TODO research: does /etc/rinetd.conf support variables? If not, we have to think of something.
</p>
<pre>packages/whonix-ws-network-conf/etc/network/interfaces.whonix:       gateway 10.152.152.10
</pre>
<p>Same comment as whonix-gw-14-network-conf/etc/network/interfaces.whonix.
</p>
<pre>packages/anon-torchat/usr/share/anon-torchat/.torchat/torchat.ini:tor_server = 10.152.152.10
packages/anon-torchat/usr/share/anon-torchat/.torchat/torchat.ini:tor_server = 10.152.152.10
</pre>
<p>Probably requires a package anon-torchat-qubes that conflicts with anon-torchat that gets installed when using --qubes.
</p>
<pre>packages/xchat-improved-privacy/usr/share/xchat-improved-privacy/.xchat2/xchat.conf:# /set net_proxy_host 10.152.152.10
</pre>
<p>Just documentation strings. Either nevermind or patch documentation.
</p>
<pre>packages/xchat-improved-privacy/usr/share/xchat-improved-privacy/.xchat2/xchat.conf:net_proxy_host = 10.152.152.10
</pre>
<p>Just documentation strings. Either nevermind or patch documentation.
</p>
<h2><span id="grep_-r_10.152.152.11_*"></span><span class="mw-headline" id="grep_-r_10.152.152.11_.2A">grep -r 10.152.152.11 *</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=17" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=17.html" title="Edit section: grep -r 10.152.152.11 *">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>packages/whonix-ws-firewall/usr/bin/whonix_firewall:##     From 10.152.152.11 icmp_seq=1 Destination Port Unreachable
</pre>
<p>These are just comments doing nothing. We can either nevermind or rewrite the comments. 
</p>
<pre>packages/anon-gw-anonymizer-config/usr/local/etc/torrc.d/50_user.conf.examples:HiddenServicePort 80 10.152.152.11:80
packages/anon-gw-anonymizer-config/usr/local/etc/torrc.d/50_user.conf.examples:HiddenServicePort 11009 10.152.152.11:11009
packages/anon-gw-anonymizer-config/usr/local/etc/torrc.d/50_user.conf.examples:HiddenServicePort 80 10.152.152.11:80
</pre>
<p>These are just comments doing nothing. We can either nevermind or rewrite the comments. 
</p>
<pre>packages/whonix-legacy/debian/whonix-legacy.preinst:         sed -i 's/192.168.0.11/10.152.152.11/g' "/home/user/.torchat/torchat.ini" || true
</pre>
<p>Same comment as for packages/whonix-legacy/debian/whonix-legacy.preinst.
</p>
<pre>packages/whonix-ws-network-conf/etc/network/interfaces.whonix:       address 10.152.152.11
</pre>
<p>Same comment as for packages/whonix-gw-14-network-conf/etc/network/interfaces.whonix above.
</p>
<pre>packages/anon-torchat/usr/share/anon-torchat/.torchat/torchat.ini:listen_interface = 10.152.152.11
</pre>
<p>Same comment as for packages/anon-torchat/usr/share/anon-torchat/.torchat/torchat.ini above.
</p>
<h1><span class="mw-headline" id="Misc">Misc</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=18" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=18.html" title="Edit section: Misc">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Random facts.
</p>
<ul><li><i><span style="background-color:#FBFBFB">AdminVM</span></i> is a synonym for <i><span style="background-color:#FBFBFB">dom0</span></i> <sup class="reference" id="cite_ref-4"><a href="#cite_note-4">[4]</a></sup>.</li>
<li><i><span style="background-color:#FBFBFB">AdminVM</span></i> is not based on Fedora Template VM. More like a standalone VM.</li>
<li>Qubes Q3 RC1 <i><span style="background-color:#FBFBFB">AdminVM</span></i> is based on Fedora 20. <sup class="reference" id="cite_ref-5"><a href="#cite_note-5">[5]</a></sup></li>
<li>Qubes Q3 RC1 <i><span style="background-color:#FBFBFB">Fedora Template VM</span></i> is based on Fedora 21.</li></ul>
<h1><span class="mw-headline" id="Time">Time</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=19" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=19.html" title="Edit section: Time">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<pre>sudo mv /etc/qubes-rpc/qubes.SetDateTime /etc/qubes-rpc/qubes.SetDateTime.disabled
</pre>
<h1><span class="mw-headline" id="tb-updater_vs_TemplateVM">tb-updater vs TemplateVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=20" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=20.html" title="Edit section: tb-updater vs TemplateVM">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="prerequisite_knowledge">prerequisite knowledge</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=21" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=21.html" title="Edit section: prerequisite knowledge">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>TPO stands for The Tor Project</li>
<li>The /home folder of a TemplateVM is copied to a TemplateBasedVM at creation time of the TemplateBasedVM. From then, TemplateBasedVM's /home folder is left untouched. (Source: <a class="external free" data-href="https://groups.google.com/forum/#!topic/qubes-users/WwVJhGA-Xnc" href="https://groups.google.com/forum/" rel="noreferrer noopener" target="_blank">https://groups.google.com/forum/#!topic/qubes-users/WwVJhGA-Xnc</a>)</li>
<li>Tor Browser installation path in Whonix 12 will change to ~/.tb. (<a class="external free" data-href="https://phabricator.whonix.org/T338" href="https://phabricator.whonix.org/T338" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T338</a>)</li>
<li>Since Qubes-Whonix 11, Tor Browser gets installed by default for new images. (Not for in place upgrades.)</li>
<li><a data-href="/wiki/Tor_Browser#Tor_Browser_Updater_.28Whonix.29" href="../Tor_Browser.html" title="Tor Browser">Tor Browser Updater (Whonix)</a> (((<a class="external free" data-href="https://github.com/Whonix/tb-updater" href="https://github.com/Whonix/tb-updater" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/tb-updater</a>))) vs</li>
<li><a data-href="/wiki/Tor_Browser#Tor_Browser_Internal_Updater" href="../Tor_Browser.html" title="Tor Browser">Tor Browser Internal Updater</a></li>
<li>Tor Browser Updater (Whonix) is unable to keep user settings (modifications such as bookmarks). It renames the old folder. Adds ".old.$(date)". So nothing is lost. Then installs a fresh one. Something important to know. This limitation can probably not be lifted in tb-updater. Upgrading Tor Browser is hard. (TPO often changed the folder layout in past.) That's what Tor Browser's internal updater is for.</li>
<li>No one has demonstrated yet, that it is possible to install &amp; run and/or update TBB to either /usr/*, /opt/* or anything of that sort. This is because within the TBB folder, by TPO default, binaries and user data is mixed. (It is a portable application. [Portable with a meaning similar to portableapps.com. Portable on USB drives or similar. Not platform, arm + anything portable.])</li>
<li>By TPO default, users are supposed to have TBB in their home folder.</li>
<li>It is very unlikely, that TBB will be available as regular deb package anytime soon. <sup class="reference" id="cite_ref-6"><a href="#cite_note-6">[6]</a></sup></li>
<li>A quick an dirty packaging of TBB would likely require too much maintenance effort. [Needs keeping up with upstream releases.]</li>
<li>Packaging TBB is further complicated, because TBB abuses Firefox's user settings mechanism for configuring anonymity related settings. (Firefox prefs) Therefore separation of binaries and user data is difficult.</li>
<li>Once TBB is in user's home folder...  [as TPO wants it] [and it does not work otherwise]... And once the user used it... And once the user stored settings there that the user cares about... [bookmarks, etc...] It gets very difficult for the TemplateVM and/or tb-updater to keep the TBB folder up to date. That's what Tor Browser Internal Updater is for.
<ul><li>Unfortunately, this means, if a user had for example 5 different Qubes-Whonix-Workstation based AppVMs where Tor Browser is in use, the user would have to update each of its 5 TBBs using Tor Browser Internal Updater.</li>
<li>This is an issue, because Qubes updates are already complicated. (Various templates and dom0 needs to be updated.) This adds another layer of complexity. Users also have to care about updating stuff from within their AppVMs, which is counter intuitive.</li>
<li>TBB stable has automatic updates enabled by default. <sup class="reference" id="cite_ref-7"><a href="#cite_note-7">[7]</a></sup></li></ul></li></ul>
<h2><span class="mw-headline" id="Implementation_as_of_Qubes-Whonix_11">Implementation as of Qubes-Whonix 11</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=22" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=22.html" title="Edit section: Implementation as of Qubes-Whonix 11">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>As of Qubes-Whonix 11 it is confusing. Running tb-updater in the TemplateVM and restarting AppVM won't result in up to date TBB's. [Since if the TemplateVM modifies /home, this will not propagate to AppVM's /home.]</li></ul>
<h2><span class="mw-headline" id="Brainstorming">Brainstorming</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=23" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=23.html" title="Edit section: Brainstorming">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Headless_TBB_Internal_Updater_Updates_in_AppVMs">Headless TBB Internal Updater Updates in AppVMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=24" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=24.html" title="Edit section: Headless TBB Internal Updater Updates in AppVMs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>We could call a qrexec service that starts TBB in each individual AppVM heedlessly (without / with hidden gui, using xvfb or similar) so it will be fetching updates.
</p>
<h3><span class="mw-headline" id="up_to_date_versions_of_Tor_Browsers_in_newly_created_AppVMs_inherited_from_updated_TemplateVMs">up to date versions of Tor Browsers in newly created AppVMs inherited from updated TemplateVMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=25" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=25.html" title="Edit section: up to date versions of Tor Browsers in newly created AppVMs inherited from updated TemplateVMs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>ship Tor Browser tarballs in Qubes TemplateVMs in /var/cache/tb-binary and extract in AppVMs at boot time to user's home folder:<br/>
<a class="external free" data-href="https://phabricator.whonix.org/T417" href="https://phabricator.whonix.org/T417" rel="noreferrer noopener" target="_blank">https://phabricator.whonix.org/T417</a>
</p>
<h3><span class="mw-headline" id="keep_as_is">keep as is</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=26" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=26.html" title="Edit section: keep as is">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Newly created Qubes-Whonix-Workstation AppVMs inherit the TBB version that came pre-installed in the Qubes-Whonix-Workstation TemplateVM. From there, TBB's internal updater keeps care of updating it.
</p>
<h2><span class="mw-headline" id="Forum_Discussion_2">Forum Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=27" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=27.html" title="Edit section: Forum Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a class="external free" data-href="https://forums.whonix.org/t/what-should-tor-browser-updater-whonix-do-in-a-templatevm" href="https://forums.whonix.org/t/what-should-tor-browser-updater-whonix-do-in-a-templatevm" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/what-should-tor-browser-updater-whonix-do-in-a-templatevm</a></li>
<li><a class="external free" data-href="https://forums.whonix.org/t/idea-for-aqrexec-service-to-install-new-versions-of-tor-browser-to-a-list-of-vms" href="https://forums.whonix.org/t/idea-for-aqrexec-service-to-install-new-versions-of-tor-browser-to-a-list-of-vms" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/idea-for-aqrexec-service-to-install-new-versions-of-tor-browser-to-a-list-of-vms</a></li></ul>
<h1><span class="mw-headline" id="UpdateVM">UpdateVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=28" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=28.html" title="Edit section: UpdateVM">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Moved to <a data-href="/wiki/Next#Torified_dom0_Updates" href="../Next.html" title="Next">Next#Torified_dom0_Updates</a>.
</p>
<h1><span class="mw-headline" id="Upgrade_through_Clearnet">Upgrade through Clearnet</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=29" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=29.html" title="Edit section: Upgrade through Clearnet">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Qubes_R3.2">Qubes R3.2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=30" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=30.html" title="Edit section: Qubes R3.2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Just a note about upgrading a Whonix-Gateway TemplateVM through Clearnet. Untorified! This is easily possible by setting the following environment variable.
</p>
<pre>export UWT_DEV_PASSTHROUGH="1"
</pre>
<h2><span class="mw-headline" id="Qubes_R4">Qubes R4</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=31" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=31.html" title="Edit section: Qubes R4">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Undocumented.
</p>
<h1><span class="mw-headline" id="Build">Build</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=32" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=32.html" title="Edit section: Build">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Build_Single_Qubes_Package">Build Single Qubes Package</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=33" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=33.html" title="Edit section: Build Single Qubes Package">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Debian_dev">Debian dev</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=34" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=34.html" title="Edit section: Debian dev">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Source: <a class="external free" data-href="https://groups.google.com/forum/#!topic/qubes-devel/o6pn-kV7cU0" href="https://groups.google.com/forum/" rel="noreferrer noopener" target="_blank">https://groups.google.com/forum/#!topic/qubes-devel/o6pn-kV7cU0</a>
</p>
<pre>BACKEND_VMM=xen dpkg-buildpackage -b 
</pre>
<h3><span class="mw-headline" id="Fedora_rpm">Fedora rpm</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=35" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=35.html" title="Edit section: Fedora rpm">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Source: <a class="external free" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/15#issuecomment-408371583" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/15" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/15#issuecomment-408371583</a>
</p>
<blockquote>
<p>the easiest way is to use qubes-builder, you can build a single by `make mgmt-salt-dom0-virtual-machines`. Otherwise, you need to manually:
</p>
<ul><li>create tarball from the source dir</li>
<li>fill version in `.spec.in` (writing it into `.spec` file)</li>
<li>build it with `rpmbuild -bb &lt;path-to-spec&gt;`</li></ul>
</blockquote>
<h2><span class="mw-headline" id="Build_Qubes-Whonix_Templates">Build Qubes-Whonix Templates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=36" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=36.html" title="Edit section: Build Qubes-Whonix Templates">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>git clone https://github.com/QubesOS/qubes-builder.git
</pre>
<p>(<a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/3441#issuecomment-359447019" href="https://github.com/QubesOS/qubes-issues/issues/3441" rel="noreferrer noopener" target="_blank">source of the following instructions</a>)
</p>
<pre>cd qubes-builder
</pre>
<p><code>~/qubes-builder/builder.conf</code>
</p>
<pre style="white-space: pre-wrap;">GIT_BASEURLÂ ?= https://github.com
GIT_PREFIXÂ ?= QubesOS/qubes-
NO_SIGNÂ ?= 1
VERBOSEÂ ?= 2
BACKEND_VMM = xen
DIST_DOM0Â ?= 
DISTS_VMÂ ?= whonix-gateway whonix-workstation
USE_QUBES_REPO_VERSIONÂ ?= 4.0
USE_QUBES_REPO_TESTINGÂ ?= 1
BRANCHÂ ?= master
COMPONENTSÂ ?= \
              linux-template-builder \
              builder \
              builder-debian \
              template-whonix

BUILDER_PLUGINSÂ ?= \
                   builder-debian \
                   template-whonix

GIT_URL_template_whonix = https://github.com/adrelanos/qubes-template-whonix


import-whonix-keys:
	ifÂ ! [ -d "$(KEYRING_DIR_GIT)" ]; then \
		export GNUPGHOME="$(KEYRING_DIR_GIT)"; \
		scripts/verify-git-tag; \
		gpg --keyserver pgp.mit.edu --recv-key 916B8D99C38EAF5E8ADC7A2A8D66066A2EEACCDA || exit 1; \
		echo '916B8D99C38EAF5E8ADC7A2A8D66066A2EEACCDA:6:' | gpg --import-ownertrust; \
	fi

get-sources: import-whonix-keys
</pre>
<pre>make get-sources
</pre>
<pre>make template
</pre>
<h2><span class="mw-headline" id="Official_Builds">Official Builds</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=37" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=37.html" title="Edit section: Official Builds">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><sup class="reference" id="cite_ref-8"><a href="#cite_note-8">[8]</a></sup></li>
<li><sup class="reference" id="cite_ref-9"><a href="#cite_note-9">[9]</a></sup></li>
<li><sup class="reference" id="cite_ref-10"><a href="#cite_note-10">[10]</a></sup></li>
<li><a class="external text" data-href="https://github.com/qubesos/qubes-builder-github#build-template-command" href="https://github.com/qubesos/qubes-builder-github" rel="noreferrer noopener" target="_blank">build command format</a></li>
<li><a class="external text" data-href="https://github.com/QubesOS/updates-status/issues/566" href="https://github.com/QubesOS/updates-status/issues/566" rel="noreferrer noopener" target="_blank">Place for build template commands</a></li>
<li><a class="external free" data-href="https://github.com/QubesOS/updates-status/issues" href="https://github.com/QubesOS/updates-status/issues" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/updates-status/issues</a></li>
<li><a class="external free" data-href="https://github.com/QubesOS/build-issues/issues" href="https://github.com/QubesOS/build-issues/issues" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/build-issues/issues</a></li>
<li><a class="external free" data-href="https://github.com/QubesOS/qubes-template-configs/blob/master/R3.2/templates-community/whonix-14.conf" href="https://github.com/QubesOS/qubes-template-configs/blob/master/R3.2/templates-community/whonix-14.conf" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-template-configs/blob/master/R3.2/templates-community/whonix-14.conf</a></li>
<li><a class="external free" data-href="https://github.com/QubesOS/qubes-template-configs/blob/master/R4.0/templates-community/whonix-14.conf" href="https://github.com/QubesOS/qubes-template-configs/blob/master/R4.0/templates-community/whonix-14.conf" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-template-configs/blob/master/R4.0/templates-community/whonix-14.conf</a></li></ul>
<pre>make DISTS_VM="whonix-gateway-14 whonix-workstation-14" template-github
</pre>
<h1><span class="mw-headline" id="Test">Test</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=38" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=38.html" title="Edit section: Test">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>works as UpdateVM</li>
<li>can be used as ProxyVM for Fedora and Debian templates</li>
<li>whonixcheck (--verbose) in sys-whonix, whonix, whonix-gw-14, whonix-ws</li>
<li>Does qubes whonix network / firewall service run after qubes-sysinit.service? Check full systemd dependency resolution.</li></ul>
<h1><span class="mw-headline" id="Qubes_VM_Manger_Firewall_Tab_Settings">Qubes VM Manger Firewall Tab Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=39" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=39.html" title="Edit section: Qubes VM Manger Firewall Tab Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>(<a class="external text" data-href="https://www.qubes-os.org/attachment/wiki/QubesFirewall/r2b1-manager-firewall.png" href="https://www.qubes-os.org/attachment/wiki/QubesFirewall/r2b1-manager-firewall.png" rel="noreferrer noopener" target="_blank">screenshot</a>)
</p><p>Short:<br/>
Have no effect for Qubes-Whonix VMs. Can be ignored.
</p><p>Long <sup class="reference" id="cite_ref-11"><a href="#cite_note-11">[11]</a></sup>:<br/>
All that settings are in separate file in the VM directory - dom0 /var/lib/qubes/appvms/whonix/firewall.xml. If the VM is running, those settings are converted to iptables syntax and loaded into QubesDB of directly connected ProxyVM. The qubes-firewall service in the ProxyVM watch for such changes and applies the rules.
</p><p>I.e. in case of Whonix, the connected ProxyVM is sys-whonix. Since in Whonix qubes-firewall service is disabled (Whonix 12 <sup class="reference" id="cite_ref-12"><a href="#cite_note-12">[12]</a></sup>), these settings do not affect Whonix. (<a class="external text" data-href="https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-whonix-firewall.service" href="https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-whonix-firewall.service" rel="noreferrer noopener" target="_blank">qubes-whonix-firewall.service</a> is what Whonix uses.)
</p>
<h1><span class="mw-headline" id="Qubes_Upstream_Bugs">Qubes Upstream Bugs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=40" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=40.html" title="Edit section: Qubes Upstream Bugs">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Usability:
</p>
<ul><li><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/889" href="https://github.com/QubesOS/qubes-issues/issues/889" rel="noreferrer noopener" target="_blank">Centralized Tray Notifications</a></li></ul>
<h1><span class="mw-headline" id="stable_vs_testing">stable vs testing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=41" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=41.html" title="Edit section: stable vs testing">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Building R3 vs R3.1. Comments on which branch / config to build.
</p><p><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/1318#issuecomment-147133115" href="https://github.com/QubesOS/qubes-issues/issues/1318" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/1318#issuecomment-147133115</a>
</p>
<h1><span class="mw-headline" id="Handling_of_file_system_in_TemplateVMs_vs_TemplateBasedVMs">Handling of file system in TemplateVMs vs TemplateBasedVMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=42" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=42.html" title="Edit section: Handling of file system in TemplateVMs vs TemplateBasedVMs">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Qubes_R3">Qubes R3</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=43" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=43.html" title="Edit section: Qubes R3">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table class="wikitable" style="background-color: #fff;text-align: center">
<tbody><tr>
<td>
</td>
<td>root
</td>
<td>home
</td></tr>
<tr>
<td>create new AppVM
</td>
<td style="background-color: #90FF90">Yes
</td>
<td style="background-color: #90FF90">Yes
</td></tr>
<tr>
<td>modifications in TemmplateVMs for existing AppVMs
</td>
<td style="background-color: #90FF90">Yes
</td>
<td style="background-color: #FF9090">No
</td></tr></tbody></table>
<ul><li>when you create a new AppVM, it inherits the TemplateVMs root and home folder</li>
<li>when you make changes in your TemplateVM root such as installing new packages, those will be available to existing AppVMs after TemplateVM shutdown + AppVM (re)start</li>
<li>when you make changes in your TemplateVM home, those will be not be available to existing AppVMs</li></ul>
<h2><span class="mw-headline" id="Qubes_Proposal">Qubes Proposal</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=44" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=44.html" title="Edit section: Qubes Proposal">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table class="wikitable" style="background-color: #fff;text-align: center">
<tbody><tr>
<td>
</td>
<td>root
</td>
<td>home
</td></tr>
<tr>
<td>create new AppVM
</td>
<td style="background-color: #90FF90">Yes
</td>
<td style="background-color: #FF9090">No
</td></tr>
<tr>
<td>modifications in TemmplateVMs for existing AppVMs
</td>
<td style="background-color: #90FF90">Yes
</td>
<td style="background-color: #FF9090">No
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Split_GPG">Split GPG</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=45" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=45.html" title="Edit section: Split GPG">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>See <a data-href="/wiki/Dev/Split_GPG" href="../Dev/Split_GPG.html" title="Dev/Split GPG">Dev/Split_GPG</a>.
</p>
<h1><span class="mw-headline" id="sys-whonix_as_Qubes_FirewallVM">sys-whonix as Qubes FirewallVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=46" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=46.html" title="Edit section: sys-whonix as Qubes FirewallVM">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Goals:<br/>
</p>
<ul><li>any TemplateVM behind sys-whonix should be restricted to torified updates proxy only</li>
<li>Whonix TemplateVMs behind sys-whonix should be restricted to torified updates proxy only</li>
<li>Whonix TemplateVMs connected to a ProxyVM other than sys-whonix should refuse to connect and show a warning [done]</li></ul>
<p>Qubes tickets:<br/>
</p>
<ul><li><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1815" href="https://github.com/QubesOS/qubes-issues/issues/1815" rel="noreferrer noopener" target="_blank">Implement new firewall dom0-&gt;VM interface</a></li>
<li><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1323" href="https://github.com/QubesOS/qubes-issues/issues/1323" rel="noreferrer noopener" target="_blank">mechanism to hide Qubes VM Manager 'Firewall rules' tab</a></li>
<li><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1637" href="https://github.com/QubesOS/qubes-issues/issues/1637" rel="noreferrer noopener" target="_blank">Template policy, services-&gt;features, core plugins</a></li></ul>
<p>Tickets:<br/>
</p>
<ul><li><a class="external text" data-href="https://phabricator.whonix.org/T372" href="https://phabricator.whonix.org/T372" rel="noreferrer noopener" target="_blank">Qubes-Whonix Whonix-Workstation TemplateVMs block access to (torified) open internet</a></li></ul>
<h1><span class="mw-headline" id="Connection_Issues">Connection Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=47" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=47.html" title="Edit section: Connection Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>icmp mtu connection issues?</li></ul>
<h1><span class="mw-headline" id="Matrix_of_Qubes_VM_Types">Matrix of Qubes VM Types</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=48" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=48.html" title="Edit section: Matrix of Qubes VM Types">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>ProxyVM
NetVM
AppVM
</p><p>StandaloneVM
TemplateBasedVM
DisposableVM
</p><p>HVM
HVM Template
</p>
<h1><span class="mw-headline" id="Network_in_TemplateVMs">Network in TemplateVMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=49" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=49.html" title="Edit section: Network in TemplateVMs">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>As default setting, any TemplateVM (including Whonix) in Qubes R4.0 and above have their NetVM set to <code>none</code>.
</p><p>Networking and <a class="mw-redirect" data-href="/wiki/Update" href="../Update.html" title="Update">update</a> of TemplateVMs is possible through Qubes Updates Proxy.
</p>
<h1><span class="mw-headline" id="Torified_Updates_Proxy">Torified Updates Proxy</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=50" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=50.html" title="Edit section: Torified Updates Proxy">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="sys-whonix">sys-whonix</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=51" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=51.html" title="Edit section: sys-whonix">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>File /usr/share/tinyproxy/default.html gets <a class="external text" data-href="https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/init/qubes-whonix-sysinit" href="https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/init/qubes-whonix-sysinit" rel="noreferrer noopener" target="_blank">modified</a>. The following is the original.
</p>
<pre>&lt;head&gt;
&lt;title&gt;{errno} {cause}&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;/head&gt;
</pre>
<p>Modified to the following.
</p>
<pre>&lt;head&gt;
&lt;title&gt;{errno} {cause}&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;meta name="application-name" content="tor proxy"/&gt;
&lt;/head&gt;
</pre>
<h2><span class="mw-headline" id="Whonix_TemplateVMs">Whonix TemplateVMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=52" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=52.html" title="Edit section: Whonix TemplateVMs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Inside Whonix TemplateVMs, <a class="external text" data-href="https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/utility_functions.sh" href="https://github.com/Whonix/qubes-whonix/blob/master/usr/lib/qubes-whonix/utility_functions.sh" rel="noreferrer noopener" target="_blank">the following command is run will be run</a>.
</p>
<h3><span class="mw-headline" id="Qubes_R3.2_2">Qubes R3.2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=53" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=53.html" title="Edit section: Qubes R3.2">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>curl_output="$(UWT_DEV_PASSTHROUGH="1" curl --silent --connect-timeout 10 "${PROXY_SERVER}")" || true
</pre>
<p>After the variables are substituted, the command actually run will be the following.
</p>
<pre>curl_output="$(UWT_DEV_PASSTHROUGH="1" curl --silent --connect-timeout 10 "http://10.137.255.254:8082/" || true
</pre>
<p>To simulate (test) this, run the following command.
</p>
<pre>UWT_DEV_PASSTHROUGH="1" curl --silent --connect-timeout 10 "http://10.137.255.254:8082/"Â ; echo $?
</pre>
<p>Should output the following.
</p>
<pre>&lt;?xml version="1.0" encoding="UTF-8"Â ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;

&lt;head&gt;
&lt;title&gt;403 Filtered&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;meta name="application-name" content="tor proxy"/&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h1&gt;Filtered&lt;/h1&gt;

&lt;p&gt;The request you made has been filtered&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;Generated by &lt;a href="https://banu.com/tinyproxy/"&gt;tinyproxy&lt;/a&gt; version 1.8.3.&lt;/em&gt;&lt;/p&gt;

&lt;/body&gt;

&lt;/html&gt;
0
</pre>
<p>That output gets `grep`ed for PROXY_META, i.e. for.
</p>
<pre>&lt;meta name="application-name" content="tor proxy"/&gt;
</pre>
<p>If that matches, the <code>whonix-secure-proxy</code> Qubes service is activated. In other words, the <code>/var/run/qubes-service/whonix-secure-proxy</code> status file is being created.
</p>
<h3><span class="mw-headline" id="Qubes_R4_2">Qubes R4</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=54" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=54.html" title="Edit section: Qubes R4">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>TODO
</p>
<pre>UWT_DEV_PASSTHROUGH="1" curl --silent --connect-timeout 10 "http://127.0.0.1:8082/"
</pre>
<h2><span class="mw-headline" id="Related">Related</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=55" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=55.html" title="Edit section: Related">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1957" href="https://github.com/QubesOS/qubes-issues/issues/1957" rel="noreferrer noopener" target="_blank">Cache updates #1957, qubes-updates-cache, qubes-updates-proxy</a></li>
<li>design decision: <a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/1880" href="https://github.com/QubesOS/qubes-issues/issues/1880" rel="noreferrer noopener" target="_blank">Difficulty to upgrade Whonix TemplateVMs over clearnet considered a bug or feature?</a></li>
<li>bug: <a class="external text" data-href="https://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway" href="https://forums.whonix.org/t/templates-incorrectly-think-theyre-not-connected-to-a-whonix-gateway" rel="noreferrer noopener" target="_blank">Templates incorrectly think they're not connected to a Whonix gateway.</a></li></ul>
<h1><span class="mw-headline" id="Updates_Proxy_Debugging">Updates Proxy Debugging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=56" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=56.html" title="Edit section: Updates Proxy Debugging">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>qubes-updates-proxy (and its deprecated name: qubes-yum-proxy) - a service providing a proxy for templates - by default enabled in NetVMs (especially: sys-net)</li>
<li>updates-proxy-setup (and its deprecated name: yum-proxy-setup) - use a proxy provided by another VM (instead of downloading updates directly), enabled by default in all templates</li></ul>
<h1><span class="mw-headline" id="Troubleshooting">Troubleshooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=57" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=57.html" title="Edit section: Troubleshooting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>See <a data-href="/wiki/Troubleshooting#Qubes_specific" href="../Troubleshooting.html" title="Troubleshooting">Troubleshooting#Qubes_specific</a>.
</p>
<h2><span class="mw-headline" id="Connectivity_Issues">Connectivity Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=58" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=58.html" title="Edit section: Connectivity Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>See <a data-href="/wiki/Troubleshooting#Qubes_specific" href="../Troubleshooting.html" title="Troubleshooting">Troubleshooting#Qubes_specific</a>.
</p>
<h1><span class="mw-headline" id="bind-dirs_flow_chart">bind-dirs flow chart</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=59" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=59.html" title="Edit section: bind-dirs flow chart">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>qubes-mount-dirs.service -&gt; /usr/lib/qubes/init/mount-dirs.sh -&gt; /usr/lib/qubes/bind-dirs.sh
</p>
<h1><span class="mw-headline" id="qubes-whonix-postinit.service_flow_chart">qubes-whonix-postinit.service flow chart</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=60" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=60.html" title="Edit section: qubes-whonix-postinit.service flow chart">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>qubes-whonix-postinit.service -&gt; /usr/lib/qubes-whonix/init/qubes-whonix-postinit -&gt;
</p>
<ul><li>/usr/lib/qubes-whonix/bind-directories</li>
<li>/usr/lib/qubes-whonix/replace-ips</li>
<li>enable / disable Tor through qvm-service</li></ul>
<h1><span class="mw-headline" id="Qubes-Whonix_14_release_testing">Qubes-Whonix 14 release testing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=61" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=61.html" title="Edit section: Qubes-Whonix 14 release testing">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>make sure /etc/systemd/system/multi-user.target.wants/qubes-whonix-firewall.service is gone</li>
<li>sudo service qubes-whonix-firewall status</li>
<li>sudo service whonix-firewall status</li>
<li><a data-href="/wiki/Onion_Services" href="../Onion_Services.html" title="Onion Services">Onion Services</a></li></ul>
<h1><span class="mw-headline" id="lightdm_autologin">lightdm autologin</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=62" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=62.html" title="Edit section: lightdm autologin">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<pre>sudo kate /etc/lightdm/lightdm.conf.d/user.conf
</pre>
<pre>[SeatDefaults]
user-session=xfce
autologin-user=user
</pre>
<pre>sudo systemctl enable lightdm
</pre>
<h1><span class="mw-headline" id="ssh_into_Qubes_dom0">ssh into Qubes dom0</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=63" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=63.html" title="Edit section: ssh into Qubes dom0">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In dom0. Install socat.
</p>
<pre>sudo qubes-dom0-update socat
</pre>
<p>In dom0. Install server software.
</p>
<pre>sudo qubes-dom0-update openssh-server
</pre>
<pre>sudo systemctl enable sshd
</pre>
<pre>sudo systemctl start sshd
</pre>
<pre>sudo systemctl status sshd
</pre>
<p>In dom0. Setup qrexec rpc.
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/qubes-rpc/local.ssh</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/qubes-rpc/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/qubes-rpc/local.ssh</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/qubes-rpc/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/qubes-rpc/local.ssh</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/qubes-rpc/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/qubes-rpc/local.ssh</textarea>
</div>
</div>
</div>
<p>Add.
</p>
<pre>#!/bin/sh
exec socat STDIO TCP-CONNECT:localhost:22
</pre>
<p>Save.
</p><p>In dom0. Setup qrexec policy.
</p><p>Open <i><span style="background-color:#FBFBFB">/etc/qubes-rpc/policy/local.ssh</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /etc/qubes-rpc/policy/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /etc/qubes-rpc/policy/local.ssh</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /etc/qubes-rpc/policy/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /etc/qubes-rpc/policy/local.ssh</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /etc/qubes-rpc/policy/local.ssh</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /etc/qubes-rpc/policy/local.ssh</textarea>
</div>
</div>
</div>
<p>Add.
</p>
<pre>sys-net dom0 allow
</pre>
<p>Save.
</p><p>Start listener in server VM.
</p><p>Open <i><span style="background-color:#FBFBFB">/rw/config/rc.local</span></i> in an editor with root rights.
</p>
<div style="background: #F8F8F8; border: 2px; padding: 5px; margin: 10px; border-style: solid; border-color: black; width: 100%">
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>KDE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo kwrite /rw/config/rc.local</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo kwrite /rw/config/rc.local</textarea>
</div>
</div>
<p><u>If you are using a graphical Whonix or <a data-href="/wiki/Qubes" href="../Qubes.html" title="Qubes">Qubes-Whonix</a></u> with <b>XFCE</b>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>kdesudo mousepad /rw/config/rc.local</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">kdesudo mousepad /rw/config/rc.local</textarea>
</div>
</div>
<p><u>If you are using a terminal-only Whonix</u>, run.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo nano /rw/config/rc.local</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo nano /rw/config/rc.local</textarea>
</div>
</div>
</div>
<p>Add only required when doing this in sys-net for servers that should be reachable directly from outside world.
</p>
<pre>iptables -I INPUT -p tcp --dport 22 -j ACCEPT
</pre>
<p>Add.
</p>
<pre>socat TCP-LISTEN:22,fork EXEC:"qrexec-client-vm dom0 local.ssh"
</pre>
<p>Save.
</p><p>Done.
</p>
<h1><span class="mw-headline" id="releasever">releasever</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=64" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=64.html" title="Edit section: releasever">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Where/how does one set <code>$relesever</code>?
</p><p>It is a yum/dnf magic variable - version of package providing system-release.
</p>
<h1><span class="mw-headline" id="R3.1_template_package_in_dom0_R3.2">R3.1 template package in dom0 R3.2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=65" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=65.html" title="Edit section: R3.1 template package in dom0 R3.2">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In UpdateVM.
</p>
<pre>sudo rm -r /var/lib/qubes/dom0-updates/*
</pre>
<p>dom0.
</p>
<pre>sudo dnf remove qubes-template-whonix-ws
</pre>
<p>dom0.
</p>
<pre>sudo qubes-dom0-update --clean qubes-template-whonix-ws-3.0.6-201612190633
</pre>
<p>R3.2: *0628
R3.1: *0633
</p>
<h1><span class="mw-headline" id="UEFI">UEFI</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=66" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=66.html" title="Edit section: UEFI">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li><a class="external free" data-href="https://www.qubes-os.org/doc/uefi-troubleshooting/" href="https://www.qubes-os.org/doc/uefi-troubleshooting/" rel="noreferrer noopener" target="_blank">https://www.qubes-os.org/doc/uefi-troubleshooting/</a></li>
<li><a class="external free" data-href="https://groups.google.com/forum/#!topic/qubes-users/Er10fhAR1Ro" href="https://groups.google.com/forum/" rel="noreferrer noopener" target="_blank">https://groups.google.com/forum/#!topic/qubes-users/Er10fhAR1Ro</a></li></ul>
<h1><span class="mw-headline" id="yubikey">yubikey</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=67" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=67.html" title="Edit section: yubikey">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>yubico tested with Qubes R4 RC1.
</p><p>1. Install dependencies.
</p><p>In <code>debian-8</code> / <code>debian-stretch</code> / <code>whonix-ws</code> TemplateVMs:
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo apt-get install qubes-usb-proxy libu2f-host0</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo apt-get install qubes-usb-proxy libu2f-host0</textarea>
</div>
</div>
<p><code>Fedora</code> TemplateVM:
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>sudo dnf install qubes-usb-proxy libu2f-host</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">sudo dnf install qubes-usb-proxy libu2f-host</textarea>
</div>
</div>
<p>2. Shut down TemplateVMs.
</p><p>3. Reboot TemplateBasedVMs that shall use the yubico.
</p><p>4. Attach yubikey.
</p><p>It should show up in Qubes USB systray widget. Use that to assign it to a VM that shall use the yubikey.
</p><p>Otherwise run on dom0 to see if Qubes knows about it.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-usb</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-usb</textarea>
</div>
</div>
<p>Attach. Read command usage help and use from command line.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-usb attach</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-usb attach</textarea>
</div>
</div>
<p>5. Browser support.
</p>
<ul><li>For Firefox: An add-on would be required. (Untested)</li>
<li>Chromium (<code>debian-stretch</code> TemplateBased AppVM): out of the box. (Tested.)</li></ul>
<p>6. Testing:
</p><p><a class="external free" data-href="https://demo.yubico.com/u2f" href="https://demo.yubico.com/u2f" rel="noreferrer noopener" target="_blank">https://demo.yubico.com/u2f</a>
</p><p>7. Tested services:
</p>
<ul><li>Googlemail (multiple yubikey's can be added as backups)</li></ul>
<h1><span class="mw-headline" id="Qubes_VM_debug_mode">Qubes VM debug mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=68" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=68.html" title="Edit section: Qubes VM debug mode">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Quote Marek <a class="external free" data-href="https://forums.whonix.org/t/whonix-live-mode/3894/36" href="https://forums.whonix.org/t/whonix-live-mode/3894/36" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/whonix-live-mode/3894/36</a>
</p>
<blockquote>
<p>Works only with HVM (on PVH or PV you donât have emulated VGA). Also it enables more verbose logging - shouldnât affect performance, but syslog in the VM may be hard to read in some cases. No other disadvantages.
</p>
</blockquote>
<p>See table at the bottom of <a class="external free" data-href="https://www.qubes-os.org/news/2018/01/24/qsb-37-update/" href="https://www.qubes-os.org/news/2018/01/24/qsb-37-update/" rel="noreferrer noopener" target="_blank">https://www.qubes-os.org/news/2018/01/24/qsb-37-update/</a>
</p>
<pre>VM type \ Qubes OS version         | 3.2 | 4.0-rc1-3 | 4.0-rc4 |
---------------------------------- | --- | --------- | ------- |
Default VMs without PCI devices    | PV  |    HVM    |   PVH   |
</pre>
<p>Conclusion: Qubes VM debug mode is not the way to go since in Qubes R4 the default for most VMs (that is VMs without PCI devices) (which includes Whonix) is PHV, since these don't have emulated VGA.
</p>
<h1><span class="mw-headline" id="salt">salt</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=69" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=69.html" title="Edit section: salt">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Qubes_R3.2_3">Qubes R3.2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=70" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=70.html" title="Edit section: Qubes R3.2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>TODO: document
</p>
<h2><span class="mw-headline" id="Qubes_R4_3">Qubes R4</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=71" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=71.html" title="Edit section: Qubes R4">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This is what<code>sudo qubesctl state.sls qvm.anon-whonix</code> does in effect. <sup class="reference" id="cite_ref-13"><a href="#cite_note-13">[13]</a></sup> It does not only do what <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/anon-whonix.sls" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/anon-whonix.sls" rel="noreferrer noopener" target="_blank"><code>qvm.anon-whonix</code></a> does, since salt resolves <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/tree/master/qvm" rel="noreferrer noopener" target="_blank">dependencies</a>. In other words, <code>qvm.anon-whonix</code> starts a chain reaction that includes all of the following.
</p>
<ul><li>install packages from <code>qubes-templates-community</code>
<ul><li>install <code>qubes-template-{{{{whonix-gw}}}}</code></li>
<li>install  <code>qubes-template-whonix-ws-14</code></li></ul></li></ul>
<ul><li>create VM called  <code>sys-whonix</code>
<ul><li>with label:  <code>black</code></li>
<li>with  <code>500</code> MB memory</li>
<li>with <code>provides_network</code></li>
<li>enables autostart</li></ul></li></ul>
<ul><li>create a VM called  <code>anon-whonix</code>
<ul><li>with label:  <code>red</code></li>
<li>with netvm:  <code>sys-whonix</code></li>
<li>default-dispvm:  <code>whonix-ws-dvm</code></li>
<li>add tag <code>anon-vm</code></li></ul></li></ul>
<ul><li>create a VM called <code> whonix-ws-dvm</code>
<ul><li>as DispVM Template <sup class="reference" id="cite_ref-14"><a href="#cite_note-14">[14]</a></sup></li>
<li>with label:  <code>red</code></li>
<li>with netvm:  <code>sys-whonix</code></li>
<li>default-dispvm:  <code>whonix-ws-dvm</code></li>
<li>add tag <code>anon-vm</code></li></ul></li></ul>
<ul><li>dom0 config changes
<ul><li>prepend <code>/etc/qubes-rpc/policy/qubes.UpdatesProxy</code> with the following text</li></ul></li></ul>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>whonix-ws $default allow,target=sys-whonix
whonix-ws $anyvm deny
whonix-gw-14 $default allow,target=sys-whonix
whonix-gw-14 $anyvm deny</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">whonix-ws $default allow,target=sys-whonix
whonix-ws $anyvm deny
whonix-gw-14 $default allow,target=sys-whonix
whonix-gw-14 $anyvm deny</textarea>
</div>
</div>
<ul><li><ul><li>prepend <code>/etc/qubes-rpc/policy/qubes.GetDate</code> with</li></ul></li></ul>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>$tag:anon-vm $anyvm deny</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">$tag:anon-vm $anyvm deny</textarea>
</div>
</div>
<p><span id="anon-vm_tag"></span>
</p>
<h1><span class="mw-headline" id="qvm-tags">qvm-tags</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=72" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=72.html" title="Edit section: qvm-tags">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=73" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=73.html" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Qubes R4.0 and above only.
</p><p>Qubes dom0 package <a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin-addon-whonix" href="https://github.com/QubesOS/qubes-core-admin-addon-whonix" rel="noreferrer noopener" target="_blank"><code>qubes-core-admin-addon-whonix</code></a> (<a class="external text" data-href="https://github.com/marmarek/qubes-core-admin-addon-whonix/blob/master/qubeswhonix/__init__.py" href="https://github.com/marmarek/qubes-core-admin-addon-whonix/blob/master/qubeswhonix/__init__.py" rel="noreferrer noopener" target="_blank"><code>__init__.py</code></a>) (<a class="external text" data-href="https://forums.whonix.org/t/qubes-core-admin-addon-whonix-for-qubes-r4-testers-wanted" href="https://forums.whonix.org/t/qubes-core-admin-addon-whonix-for-qubes-r4-testers-wanted" rel="noreferrer noopener" target="_blank">forum discussion</a>) is responsible for:
</p>
<ul><li>set NetVM to <code>sys-whonix</code> [...]</li>
<li>set default DispVM set to <code>whonix-ws-dvm</code> [...]</li>
<li>set tag <code>anon-vm</code></li>
<li>set tag <code>anon-gateway</code></li></ul>
<p>Qubes dom0 package <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines" rel="noreferrer noopener" target="_blank"><code>qubes-mgmt-salt-dom0-virtual-machines</code></a> <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/9" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/pull/9" rel="noreferrer noopener" target="_blank">will</a> depend on <code>qubes-core-admin-addon-whonix</code>, therefore ensuring it will be installed. (<a class="external text" data-href="https://phabricator.whonix.org/T792" href="https://phabricator.whonix.org/T792" rel="noreferrer noopener" target="_blank">T792</a>) (<a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/3881" href="https://github.com/QubesOS/qubes-issues/issues/3881" rel="noreferrer noopener" target="_blank">#3881</a>)
</p><p>The template package <a class="external text" data-href="https://github.com/Whonix/qubes-whonix" href="https://github.com/Whonix/qubes-whonix" rel="noreferrer noopener" target="_blank"><code>qubes-whonix</code></a> ships script <a class="external text" data-href="https://github.com/Whonix/qubes-whonix/blob/master/etc/qubes/post-install.d/30-whonix-ws.sh" href="https://github.com/Whonix/qubes-whonix/blob/master/etc/qubes/post-install.d/30-whonix-ws.sh" rel="noreferrer noopener" target="_blank"><code>/etc/qubes/post-install.d/30-whonix-ws.sh</code></a>, which contains <code>qvm-features-request whonix-ws=1</code>, which is parsed by dom0 package <a class="external text" data-href="https://github.com/QubesOS/qubes-core-agent-linux" href="https://github.com/QubesOS/qubes-core-agent-linux" rel="noreferrer noopener" target="_blank"><code>qubes-core-agent-linux</code></a> <a class="external text" data-href="https://github.com/QubesOS/qubes-core-agent-linux/blob/master/qubes-rpc/qubes.PostInstall" href="https://github.com/QubesOS/qubes-core-agent-linux/blob/master/qubes-rpc/qubes.PostInstall" rel="noreferrer noopener" target="_blank">qubes RPC <code>qubes.PostInstall</code></a>.
</p><p>As per Marek, <code>qvm-features-request whonix-ws=1</code> should <a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/3765#issuecomment-386805491" href="https://github.com/QubesOS/qubes-issues/issues/3765" rel="noreferrer noopener" target="_blank">not be set by salt</a>.
</p><p>Missing Whonix tags anon-vm / anon-gateway <a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/pull/6" href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/pull/6" rel="noreferrer noopener" target="_blank">will be added</a>.
</p>
<h2><span class="mw-headline" id="anon-vm_tag">anon-vm tag</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=74" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=74.html" title="Edit section: anon-vm tag">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code>anon-vm</code> gets prepended to <a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin/blob/master/qubes-rpc-policy/qubes.GetDate.policy" href="https://github.com/QubesOS/qubes-core-admin/blob/master/qubes-rpc-policy/qubes.GetDate.policy" rel="noreferrer noopener" target="_blank"><code>/etc/qubes-rpc/policy/qubes.GetDate</code></a> by <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/template-whonix-ws.sls#L43" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/template-whonix-ws.sls" rel="noreferrer noopener" target="_blank">salt template-whonix-ws.sls</a>. Or <a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin/pull/221" href="https://github.com/QubesOS/qubes-core-admin/pull/221" rel="noreferrer noopener" target="_blank">maybe in future simpler by just adding it.</a>
</p><p>Tags are not reliably set yet. TODO: <a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/4155" href="https://github.com/QubesOS/qubes-issues/issues/4155" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/4155</a> - That is something doable. But it's not a big deal for now since Qubes VMs have many ways to ask dom0 for the non-randomized time.
</p>
<ul><li><a class="external text" data-href="https://phabricator.whonix.org/T389" href="https://phabricator.whonix.org/T389" rel="noreferrer noopener" target="_blank">make sure Qubes-Whonix has no access to clocksource=xen</a> (unlikely to be fixed anytime soon without external help) (It matters in context of <a data-href="/wiki/Dev/TimeSync#Clock_Correlation_Attack" href="../Dev/TimeSync.html" title="Dev/TimeSync">Clock Correlation Attack</a>.</li>
<li><a class="external text" data-href="https://phabricator.whonix.org/T440" href="https://phabricator.whonix.org/T440" rel="noreferrer noopener" target="_blank">set random clock offset for Qubes-Whonix VMs using mgmt to prevent clock correlation attacks</a></li>
<li><a class="external text" data-href="https://phabricator.whonix.org/T397" href="https://phabricator.whonix.org/T397" rel="noreferrer noopener" target="_blank">prevent dom0 telling Qubes-Whonix VMs the time by using the mgmt stack for that / disable Qubes dom0 /etc/qubes-rpc/qubes.SetDateTime</a></li></ul>
<p><a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/tree/master/qubes-rpc-policy" href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/tree/master/qubes-rpc-policy" rel="noreferrer noopener" target="_blank">Tags will be more important in future</a> for <a class="external text" data-href="https://phabricator.whonix.org/T534" href="https://phabricator.whonix.org/T534" rel="noreferrer noopener" target="_blank">sdwdate-gui-qubes</a> but that is more usability, not security.
</p>
<h2><span class="mw-headline" id="anon-gateway_tag">anon-gateway tag</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=75" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=75.html" title="Edit section: anon-gateway tag">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code>anon-gateway</code> tag will be used in future by sdwdate-gui-qubes.
</p>
<h2><span class="mw-headline" id="whonix-updatevm_tag">whonix-updatevm tag</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=76" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=76.html" title="Edit section: whonix-updatevm tag">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><code>whonix-updatevm</code> tag gets set by <a class="external text" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/template-whonix-ws.sls#L33" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/template-whonix-ws.sls" rel="noreferrer noopener" target="_blank">salt template-whonix-ws.sls</a> as well as by <a class="external text" data-href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/blob/master/qubeswhonix/__init__.py" href="https://github.com/QubesOS/qubes-core-admin-addon-whonix/blob/master/qubeswhonix/__init__.py" rel="noreferrer noopener" target="_blank">qubes-core-admin-addon-whonix __init__.py</a>. TODO: <code>/etc/qubes-rpc/policy/qubes.UpdatesProxy</code>
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>- $tag:whonix-updatevm $default allow,target=sys-whonix
      - $tag:whonix-updatevm $anyvm deny</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">- $tag:whonix-updatevm $default allow,target=sys-whonix
      - $tag:whonix-updatevm $anyvm deny</textarea>
</div>
</div>
<h2><span class="mw-headline" id="view_tags">view tags</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=77" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=77.html" title="Edit section: view tags">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>See also Qubes <a class="external text" data-href="https://dev.qubes-os.org/projects/core-admin-client/en/latest/manpages/qvm-tags.html" href="https://dev.qubes-os.org/projects/core-admin-client/en/latest/manpages/qvm-tags.html" rel="noreferrer noopener" target="_blank"><code>qvm-tags</code> man page</a>.
</p><p>To view tags.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-tags {{{{whonix-gw}}}}</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-tags {{{{whonix-gw}}}}</textarea>
</div>
</div>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-tags whonix-ws-14</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-tags whonix-ws-14</textarea>
</div>
</div>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-tags anon-whonix list</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-tags anon-whonix list</textarea>
</div>
</div>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-tags sys-whonix list</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-tags sys-whonix list</textarea>
</div>
</div>
<h1><span class="mw-headline" id="tags_inheritance">tags inheritance</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=78" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=78.html" title="Edit section: tags inheritance">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<blockquote>
<p>Tags are not inherited. Generally settings are not inherited from TemplateVM by TemplateBasedVM. Where needed, core-admin-addon can be made to copy selected settings from TemplateVM to TemplateBasedVM.
</p>
</blockquote>
<p><sup class="reference" id="cite_ref-15"><a href="#cite_note-15">[15]</a></sup>
</p>
<h1><span class="mw-headline" id="qvm-features">qvm-features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=79" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=79.html" title="Edit section: qvm-features">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>To view VM features.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-features {{{{whonix-gw}}}}</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-features {{{{whonix-gw}}}}</textarea>
</div>
</div>
<p>Should include <code>whonix-gw-14 1</code>.
</p><p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>qvm-features whonix-ws-14</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">qvm-features whonix-ws-14</textarea>
</div>
</div>
<p>Should include <code>whonix-ws 1</code>.
</p>
<h1><span class="mw-headline" id="Connection_through_Qubes_Updates_Proxy">Connection through Qubes Updates Proxy</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=80" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=80.html" title="Edit section: Connection through Qubes Updates Proxy">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In Qubes TemplateVM.
</p>
<h2><span class="mw-headline" id="R3.2">R3.2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=81" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=81.html" title="Edit section: R3.2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>curl.anondist-orig --proxy http://10.137.255.254:8082 https://check.torproject.org</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">curl.anondist-orig --proxy http://10.137.255.254:8082 https://check.torproject.org</textarea>
</div>
</div>
<h2><span class="mw-headline" id="R4">R4</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=82" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=82.html" title="Edit section: R4">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p></p><div class="codeContainerNew">
<div class="preDiv">
<pre>curl.anondist-orig --proxy https://127.0.0.1:8082 https://check.torproject.org</pre>
</div>
<div class="textareaDiv">
<textarea class="codeBoxAreaNew" onfocus="this.select()" readonly="readonly" rows="1">curl.anondist-orig --proxy https://127.0.0.1:8082 https://check.torproject.org</textarea>
</div>
</div>
<h1><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=83" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=83.html" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li><a data-href="/wiki/Dev/Test" href="../Dev/Test.html" title="Dev/Test">Dev/Test - How to "UnWhonix" - Instructions on how to remove Whonix Tor default networking for Whonix-Gateway. After applying these instructions, Whonix-Gateway will connect to clearnet.</a></li>
<li><a class="external text" data-href="https://forums.whonix.org/t/how-to-add-a-proxyvm-between-anon-whonix-and-sys-whonix-whonix-ws-email-sys-fw-whonix-whonix-gw-14-sys-firewall-sys-net" href="https://forums.whonix.org/t/how-to-add-a-proxyvm-between-anon-whonix-and-sys-whonix-whonix-ws-email-sys-fw-whonix-whonix-gw-14-sys-firewall-sys-net" rel="noreferrer noopener" target="_blank">How to add a ProxyVM between anon-whonix and sys-whonix? (whonix-ws-email -&gt; sys-fw-whonix -&gt; whonix-gw-14 -&gt; sys-firewall -&gt; sys-net)</a></li></ul>
<h1><span class="mw-headline" id="Footnotes">Footnotes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=84" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit&amp;section=84.html" title="Edit section: Footnotes">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div class="reflist" style="list-style-type: decimal;">
<div class="mw-references-wrap mw-references-columns"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">â</a></span> <span class="reference-text">Upon creation.</span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">â</a></span> <span class="reference-text">Following shutdown.</span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite_ref-3">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/4175" href="https://github.com/QubesOS/qubes-issues/issues/4175" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/4175</a></span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">â</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/1015" href="https://github.com/QubesOS/qubes-issues/issues/1015" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/1015</a></span>
</li>
<li id="cite_note-5"><span class="mw-cite-backlink"><a href="#cite_ref-5">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://groups.google.com/d/msg/qubes-users/zHdY6Oe58t0/qSFkLZdpng4J" href="https://groups.google.com/d/msg/qubes-users/zHdY6Oe58t0/qSFkLZdpng4J" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-users/zHdY6Oe58t0/qSFkLZdpng4J</a>
<blockquote>
<p>Actually you need rpmfusion-free-release-20.noarch.rpm, as Qubes dom0 is based on Fedora 20. 
</p>
</blockquote></span>
</li>
<li id="cite_note-6"><span class="mw-cite-backlink"><a href="#cite_ref-6">â</a></span> <span class="reference-text">
<ul><li><a class="external text" data-href="https://trac.torproject.org/projects/tor/ticket/3994" href="https://trac.torproject.org/projects/tor/ticket/3994" rel="noreferrer noopener" target="_blank">Get TorBrowser in Debian</a></li>
<li><a class="external text" data-href="https://trac.torproject.org/projects/tor/ticket/5236" href="https://trac.torproject.org/projects/tor/ticket/5236" rel="noreferrer noopener" target="_blank">Make a deb of the Torbrowser and add to repository</a></li></ul>
</span></li>
<li id="cite_note-7"><span class="mw-cite-backlink"><a href="#cite_ref-7">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://blog.torproject.org/blog/tor-browser-50-released" href="https://blog.torproject.org/blog/tor-browser-50-released" rel="noreferrer noopener" target="_blank">https://blog.torproject.org/blog/tor-browser-50-released</a>
<blockquote><p>Starting with this release, Tor Browser will now also download and apply upgrades in the background, to ensure that users upgrade quicker and with less interaction. This behavior is governed by the about:config pref app.update.auto, but we do not recommend disabling it unless you really know what you're doing.</p></blockquote></span>
</li>
<li id="cite_note-8"><span class="mw-cite-backlink"><a href="#cite_ref-8">â</a></span> <span class="reference-text"><a class="external text" data-href="https://github.com/QubesOS/qubes-issues/issues/3935" href="https://github.com/QubesOS/qubes-issues/issues/3935" rel="noreferrer noopener" target="_blank">Qubes issue ticket: Mechanism for triggering template build</a></span>
</li>
<li id="cite_note-9"><span class="mw-cite-backlink"><a href="#cite_ref-9">â</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/Whonix/whonix-developer-meta-files/blob/master/release/qubes-templates-offical-build-commands" href="https://github.com/Whonix/whonix-developer-meta-files/blob/master/release/qubes-templates-offical-build-commands" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/whonix-developer-meta-files/blob/master/release/qubes-templates-offical-build-commands</a></span>
</li>
<li id="cite_note-10"><span class="mw-cite-backlink"><a href="#cite_ref-10">â</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/QubesOS/qubes-issues/issues/4536" href="https://github.com/QubesOS/qubes-issues/issues/4536" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-issues/issues/4536</a></span>
</li>
<li id="cite_note-11"><span class="mw-cite-backlink"><a href="#cite_ref-11">â</a></span> <span class="reference-text"><a class="external free" data-href="https://groups.google.com/d/msg/qubes-devel/uzgN42uEJpE/hymUCMxoCwAJ" href="https://groups.google.com/d/msg/qubes-devel/uzgN42uEJpE/hymUCMxoCwAJ" rel="noreferrer noopener" target="_blank">https://groups.google.com/d/msg/qubes-devel/uzgN42uEJpE/hymUCMxoCwAJ</a></span>
</li>
<li id="cite_note-12"><span class="mw-cite-backlink"><a href="#cite_ref-12">â</a></span> <span class="reference-text"><a class="external free" data-href="https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-firewall.service.d/40_qubes-whonix.conf" href="https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-firewall.service.d/40_qubes-whonix.conf" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/qubes-whonix/blob/master/lib/systemd/system/qubes-firewall.service.d/40_qubes-whonix.conf</a></span>
</li>
<li id="cite_note-13"><span class="mw-cite-backlink"><a href="#cite_ref-13">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/" href="https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-mgmt-salt-dom0-virtual-machines/blob/master/qvm/</a></span>
</li>
<li id="cite_note-14"><span class="mw-cite-backlink"><a href="#cite_ref-14">â</a></span> <span class="reference-text"><code>template-for-dispvms: true</code></span>
</li>
<li id="cite_note-15"><span class="mw-cite-backlink"><a href="#cite_ref-15">â</a></span> <span class="reference-text">
<a class="external free" data-href="https://github.com/QubesOS/qubes-core-admin/pull/214#issuecomment-399698122" href="https://github.com/QubesOS/qubes-core-admin/pull/214" rel="noreferrer noopener" target="_blank">https://github.com/QubesOS/qubes-core-admin/pull/214#issuecomment-399698122</a></span>
</li>
</ol></div></div>
<hr/>
<p><font size="-1">Comments will be deleted after some time. Specifically after comments have been addressed in form of wiki enhancements. See <a data-href="/wiki/Wiki_Comments_Policy" href="../Wiki_Comments_Policy.html" title="Wiki Comments Policy">Wiki Comments Policy</a>.</font>
</p>
<div class="comments-body"><div class="c-order">
<div class="c-order-select">
<p class="mw-empty-elt"> </p><form action="" name="ChangeOrder">
<select name="TheOrder">
<option value="0">Sort by date</option>
<option value="1">Sort by score</option>
</select>
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="c-spy" id="spy">
<p> <a data-href="javascript:void(0)" href="javascript:void(0)">Enable comment auto-refresher</a>
</p>
</div>
<div class="visualClear"></div>
</div>
<p> <br/>
</p>
<div id="allcomments"></div><form action="" method="post" name="commentForm">
<div class="c-form-title">Add your comment</div>
<div class="c-form-reply-to" id="replyto"></div>
<div class="c-form-message">Whonix welcomes <b>all comments</b>. If you do not want to be anonymous, <a data-href="../Special:UserLogin/signup" href="../Special:UserLogin/signup">register</a> or <a data-href="../Special:UserLogin" href="../Special:UserLogin">log in</a>. It is free.</div>
<p><textarea cols="64" id="comment" name="commentText" rows="5"></textarea>
</p>
<div class="c-form-button"><input class="site-button" type="button" value="Post comment"/></div>
<p><input name="action" type="hidden" value="purge"/>
<input name="pageId" type="hidden" value="1376"/>
<input name="commentid" type="hidden"/>
<input name="lastCommentId" type="hidden" value="0"/>
<input name="commentParentId" type="hidden"/>
<input name="cpage" type="hidden" value="1"/>
<input name="token" type="hidden" value="+\"/></p></form>
<p class="mw-empty-elt"></p>
<a id="end" rel="nofollow"></a></div>
<hr/>
<div style="padding-bottom:1px; padding-top:6px; border:thin solid black; background:#EEEEEE; text-align:center;"><u>Random News:</u>
<p>Please help in testing <a data-href="/wiki/Contribute#Testing" href="../Contribute.html" title="Contribute">new features and bug fixes</a> in Whonix.
</p>
</div>
<hr/><p><font size="-1"><a class="external text" data-href="../Dev/Qubes" href="../Dev/Qubes" rel="noreferrer noopener" target="_blank">https</a> | (<a data-href="/wiki/Forcing_.onion_on_Whonix.org" href="../Forcing_.onion_on_Whonix.org.html" title="Forcing .onion on Whonix.org">forcing</a>) <a class="external text" data-href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Qubes" href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Qubes" rel="noreferrer noopener" target="_blank">onion</a><br/>
</font></p><font size="-1"></font><p><font size="-1">Share: <a data-href="https://twitter.com/intent/tweet?url=../Dev/Qubes&amp;text=&amp;via=Whonix" href="https://twitter.com/intent/tweet?url=../Dev/Qubes&amp;text=&amp;via=Whonix">Twitter</a>
|
<a data-href="https://facebook.com/sharer.php?u=../Dev/Qubes" href="https://facebook.com/sharer.php?u=../Dev/Qubes">Facebook</a></font>
</p><p><font size="-1">This is a wiki. Want to improve this page? Help is welcome and volunteer contributions are happily considered! See <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" rel="noreferrer noopener" target="_blank">Conditions for Contributions to Whonix</a>, then <a data-href="/w/index.php?title=Dev/Qubes&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;action=edit">Edit</a>! IP addresses are scrubbed, but editing over Tor is recommended. Edits are held for moderation.</font>
</p><p><font size="-1">Whonix is a <a class="external text" data-href="http://www.openinventionnetwork.com/licensees.php" href="http://www.openinventionnetwork.com/licensees.php" rel="noreferrer noopener" target="_blank">licensee</a> of the Open Invention Network. Unless otherwise noted, the content of this page is <a data-href="/wiki/Whonix:Copyrights" href="../Whonix:Copyrights.html" title="Whonix:Copyrights">copyrighted</a> and licensed under the same Libre Software <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" rel="noreferrer noopener" target="_blank">license</a> as Whonix itself. (<a data-href="/wiki/Why_Whonix_is_Free_Software" href="../Why_Whonix_is_Free_Software.html" title="Why Whonix is Free Software">Why?</a>)</font>
</p><p><font size="-1">Whonix is provided by ENCRYPTED SUPPORT LP. See <a class="mw-redirect" data-href="/wiki/Impressum" href="../Impressum.html" title="Impressum">Imprint</a>.</font>
</p>
<!-- 
NewPP limit report
Cached time: 20190109175650
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.344 seconds
Real time usage: 0.399 seconds
Preprocessor visited node count: 1652/1000000
Preprocessor generated node count: 3709/1000000
Postâexpand include size: 10308/2097152 bytes
Template argument size: 2719/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postâexpand size: 27972/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  216.270      1 -total
 50.47%  109.162     24 Template:CodeSelect
 36.16%   78.205      3 Template:Open_with_root_rights
 34.37%   74.337      3 Template:Box
 10.23%   22.122      1 Template:Footer
  7.77%   16.812      1 Template:Reflist
  2.62%    5.665      1 Template:Header
  2.51%    5.433      1 Template:Share
  2.45%    5.293      1 Template:Edit_it
  2.40%    5.190      1 Template:Qubes_persistence
-->
</div></div><div class="printfooter">
Retrieved from "<a data-href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;oldid=39880" dir="ltr" href="https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;oldid=39880">https://www.whonix.org/w/index.php?title=Dev/Qubes&amp;oldid=39880</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a data-href="/wiki/Special:Categories" href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a data-href="/wiki/Category:Design" href="../Category:Design.html" title="Category:Design">Design</a></li></ul></div></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 1 December 2018, at 00:36.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="../Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="/wiki/Privacy_Policy" href="../Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Disclaimer"><a class="mw-redirect" data-href="/wiki/Disclaimer" href="../Disclaimer.html" title="Disclaimer">Disclaimer</a></li>
<li id="footer-Terms_of_Service"><a class="mw-redirect" data-href="/wiki/Terms_of_Service" href="../Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="../Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="../Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="../Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
<!-- Cached/compressed 20190109175650 -->
</html>
