<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Dev/grsecurity - Whonix
 url: ../Dev/grsecurity
 date: Thu Aug 20 07:43:37 2020
-->
<head>
<meta charset="utf-8"/>
<title>Dev/grsecurity - Whonix</title>
<link rel="stylesheet" type="text/css" href="../style.css">



<meta content="" name="ResourceLoaderDynamicStyles"/>
<meta content="MediaWiki 1.34.1" name="generator"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Dev/grsecurity&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Dev/grsecurity&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/w/images/favicon.ico" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOPj4wC5q6j/xba0/8W2tP+3qab/4+PiBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+6rKr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8CohP/VnhL/1Z4S/8CohP/Ku7n/yru5/7mrqf8AAAAAAAAAAAAAAAAAAAAAAAAAAI6Mi//Ku7n/yru5/8GRHP/iqhL/////////////////wJEd/8q7uf/Ku7n/xsXE/wAAAAAAAAAAAAAAAAAAAAC5q6n/yru5/8q7uf/hqRH//////0bcy/9G3Mv//////+GpEf/Ku7n/yru5/7qsqv8AAAAAAAAAAAAAAAAAAAAAxLW0/8q7uf/Ku7n/4qoS/////////////////0bcy//iqhL/yru5/8q7uf/Gt7T/AAAAAAAAAAAAAAAAAAAAAMKzsP/Ku7n/yru5/96lFf//////RtzL/0bcy///////3qUV/8q7uf/Ku7n/wrWy/wAAAAAAAAAAAAAAAAAAAACvo6D/yru5/8q7uf/Ku7n/4akQ//fnvP/57tD/4akQ/8q7uf/Ku7n/yru5/7Gkov8AAAAAAAAAAAAAAAAAAAAAAAAAAMq7uf/Ku7n/yru5/8q7uf/hqRD/4akQ/8q7uf/Ku7n/yru5/8q7uf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACOjIv/yru5/8q7uf/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+Mioj/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAISDgf/Iurj/yru5/8q7uf/Ku7n/yru5/8i5uP+EgoH/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6rKr/q56c/wAAAACOjIv/joyL/wAAAACom5r/taim/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuqyp/66hnv8AAAAAAAAAAAAAAAAAAAAAqp2b/7SnpP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKmcm/+9r6z/AAAAAAAAAAAAAAAAAAAAALmrqf+jl5b/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwLOw/6uenP8AAAAAAAAAAKqenP+/sq//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACtoJ7/vK2r/72vrP+sn57/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/D8AAPAPAADgBwAAwAMAAMADAADAAwAAwAMAAMADAADgBwAA4AcAAPAPAADyTwAA888AAPPPAAD5nwAA/D8AAA==" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="//www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="Dev/grsecurity - Whonix" property="og:title"/>
<meta content="Whonix" property="og:site_name"/>
<meta content="../Dev/grsecurity" property="og:url"/>
<meta content="" property="og:image"/>
<meta content="2019-05-27T10:07:15Z" property="article:modified_time"/>
<meta content="2019-05-27T10:07:15Z" property="article:published_time"/>
<meta content="@Whonix" property="twitter:site"/>
<meta content="Dev/grsecurity - Whonix" property="twitter:title"/>
<meta content="" property="twitter:image"/>
<meta content="summary_large_image" property="twitter:card"/>

<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Dev_grsecurity rootpage-Dev skin-foreground action-view"><div class="mw-cookiewarning-container banner-container"><div class="mw-cookiewarning-text"><span>By using our website, you acknowledge that you have read, understood and agreed to our Privacy Policy, Cookie Policy, Terms of Service, and E-Sign Consent.</span> <a data-href="/wiki/Terms_of_Service" href="../Terms_of_Service">More information</a><form method="POST"><input class="mw-cookiewarning-dismiss" name="disablecookiewarning" type="submit" value="OK"/></form></div></div><div id="navwrapper">

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<div class="mw-indicators mw-body-content">
</div>
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><p>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Donate" href="../Donate.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
<span>Please Donate!</span>
</div>
</a>
</div>
<p>
</p></div></div> </div>
</div>
<div id="mw-js-message" style="display:none;"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up"> Actions</span></i></a>
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="grsecurity" href="../Dev/grsecurity.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Dev/grsecurity&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Dev/grsecurity&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Dev/grsecurity&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Dev/grsecurity&amp;action=history" href="https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<div id="content">
<h1 class="title" id="firstHeading">Dev/grsecurity</h1>
<h3 id="tagline">From Whonix</h3> <h5 class="subtitle" id="siteSub"><span class="subpages">&lt; <a class="mw-redirect" data-href="/wiki/Dev" href="../Dev.html" title="Dev">Dev</a></span></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>original idea:
</p><p>grsecurity compilation VM, so we would not decrease usability too much, by taking a lot compilation time per updated per TemplateVM. Doing it per VM, would be even worse usability wise (takes even longer to update).
</p><p>We would like to have a Debian source grsecurity package in offical Debian repository, that we can use to compile a grsecurity kernel. Compilation would happen on user's machines in a yet to be invented grsecurity compilation VM. The purpose of that VM is to spare the user from having to compile its kernel multiple times for multiple templates. Compiling the kernel on the user's machine provides better security due to grsecurity compile time features such as randomization. User upgrades → new grsecurity source package upgrade found by apt-get → grsecurity compilation VM starts → downloads upgraded grsecurity source package → perhaps minor automated configuration changes (Xen...) → grsecurity kernel gets compiled → sent to dom0 → used after dom0 / VM restart respectively.
</p><p>contra:
</p><p>grsecurity compilation VM could be compromised:
</p><p>Two ways:
</p>
<ul><li>bug / backdoor in compilation scripts itself (unlikely, but still possible)</li>
<li>template used for that compilation VM is already compromised</li></ul>
<p>The later one is especially tricky. In theory you could use "the most trusted template". But in some cases there may be no such thing. For example you trust one template for some activities (like Fedora, for business stuff, where X is not your adversary), but with other activities not and use Debian/Archlinux there.
</p><p>Having one compilation VM means compromising one of this template will give you access to every VM.
</p><p>This should not be overrated. If you use the same kernel binary in all the VMs, compromised VM can learn those randomized parts and use this knowledge in attack to other VMs. Or leak this to some external attacker for future use. This still makes harder to prepare an exploit for all Qubes installation, but not as hard as for non-Qubes threat model. To get the security benefits as in non-Qubes, you'd need to compile the kernel for each VM (not only template) separately...
</p><p>Maybe it worth to do it for selected VMs? And for others use binary package from repository.
</p><p>Another idea... Perhaps rather than a grsecurity compilation VM, it
could be a grsecurity administrator VM?
</p><p>- it would orchestrate starting VM by VM, one at a time
</p><p>- compile grsecurity kernel VM by VM inside the target VM, not inside
the grsecurity administration VM
</p><p>- What in case of TemplateBasedVMs... Store the grsecurity kernel
somewhere... - Using bind-dirs or have it stored in a per VM folder in dom0?
</p><p>- all automated, event based, non-blocking, and in background [to not
block the actual update process] → may not be great, user upgrades but
the grsecurity kernel upgrade is not guaranteed to be installed after
apt-get finished, but at some later point
</p><p>- would still result in lots of CPU [and hdd] usage over a long time
[perhaps for 5 - 20 VMs for average users] [user wondering about
mysterious systemd load, loud cpu fan]
</p><p>- somewhat a compilation farm that generates not one but many grsecurity
kernels and put them into a savings stock for later use
</p><p>- shutdown-or-not of
VM-just-automatically-started-for-grsecurity-compilation would be
troublesome (if the user manually interacted with that VM in meanwhile),
perhaps solvable by introducing states
</p><p>In summary, it sounds rather hacky and complex. Anyhow, perhaps it is
worth something as inspiration.
</p>
</div></div><div class="printfooter">
Retrieved from "<a data-href="/w/index.php?title=Dev/grsecurity&amp;oldid=47584" dir="ltr" href="https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;oldid=47584">https://www.whonix.org/w/index.php?title=Dev/grsecurity&amp;oldid=47584</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 27 May 2019, at 12:07.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="../Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="/wiki/Privacy_Policy" href="../Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Cookie_Policy"><a data-href="/wiki/Cookie_Policy" href="../Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-Terms_of_Service"><a data-href="/wiki/Terms_of_Service" href="../Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-DMCA"><a class="mw-redirect" data-href="/wiki/DMCA" href="../DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-E_Sign_Consent"><a data-href="/wiki/E-Sign_Consent" href="../E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="../Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="../Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="../Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
</html>
