<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Dev/Qubes Remote Support - Whonix
 url: ../Dev/Qubes_Remote_Support
 date: Sat Apr  4 07:37:32 2020
-->
<head>
<meta charset="utf-8"/>
<title>Dev/Qubes Remote Support - Whonix</title>
<link rel="stylesheet" type="text/css" href="../style.css">
<style>#banner{position:relative;overflow:hidden;margin-bottom:.5em!important;margin-top:.5em!important;background-color:#d03232;border:solid 1px #aaa;height:66px}#banner a.cn-full-banner-click{display:block;height:100%;width:100%;cursor:pointer}#banner-logo{position:absolute;top:8px;left:15px;background-image:url(data:image/png;base64,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);height:50px;width:100%;background-repeat:no-repeat}#banner #black-text{font-size:1.1em;color:#fff;padding:.5em 40px .4em 60px;line-height:1.3em;text-align:center}</style>


<meta content="" name="ResourceLoaderDynamicStyles"/>
<meta content="MediaWiki 1.33.1" name="generator"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/w/images/favicon.ico" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOPj4wC5q6j/xba0/8W2tP+3qab/4+PiBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+6rKr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALyurP/Ku7n/yru5/8CohP/VnhL/1Z4S/8CohP/Ku7n/yru5/7mrqf8AAAAAAAAAAAAAAAAAAAAAAAAAAI6Mi//Ku7n/yru5/8GRHP/iqhL/////////////////wJEd/8q7uf/Ku7n/xsXE/wAAAAAAAAAAAAAAAAAAAAC5q6n/yru5/8q7uf/hqRH//////0bcy/9G3Mv//////+GpEf/Ku7n/yru5/7qsqv8AAAAAAAAAAAAAAAAAAAAAxLW0/8q7uf/Ku7n/4qoS/////////////////0bcy//iqhL/yru5/8q7uf/Gt7T/AAAAAAAAAAAAAAAAAAAAAMKzsP/Ku7n/yru5/96lFf//////RtzL/0bcy///////3qUV/8q7uf/Ku7n/wrWy/wAAAAAAAAAAAAAAAAAAAACvo6D/yru5/8q7uf/Ku7n/4akQ//fnvP/57tD/4akQ/8q7uf/Ku7n/yru5/7Gkov8AAAAAAAAAAAAAAAAAAAAAAAAAAMq7uf/Ku7n/yru5/8q7uf/hqRD/4akQ/8q7uf/Ku7n/yru5/8q7uf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACOjIv/yru5/8q7uf/Ku7n/yru5/8q7uf/Ku7n/yru5/8q7uf+Mioj/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAISDgf/Iurj/yru5/8q7uf/Ku7n/yru5/8i5uP+EgoH/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6rKr/q56c/wAAAACOjIv/joyL/wAAAACom5r/taim/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuqyp/66hnv8AAAAAAAAAAAAAAAAAAAAAqp2b/7SnpP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKmcm/+9r6z/AAAAAAAAAAAAAAAAAAAAALmrqf+jl5b/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwLOw/6uenP8AAAAAAAAAAKqenP+/sq//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACtoJ7/vK2r/72vrP+sn57/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/D8AAPAPAADgBwAAwAMAAMADAADAAwAAwAMAAMADAADgBwAA4AcAAPAPAADyTwAA888AAPPPAAD5nwAA/D8AAA==" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="Dev/Qubes Remote Support - Whonix" property="og:title"/>
<meta content="../Dev/Qubes_Remote_Support" property="og:url"/>
<meta content="" property="og:image"/>
<meta content="2020-03-10T17:09:32Z" property="article:modified_time"/>
<meta content="2020-03-10T17:09:32Z" property="article:published_time"/>
<meta content="@Whonix" property="twitter:site"/>
<meta content="Dev/Qubes Remote Support - Whonix" property="twitter:title"/>
<meta content="" property="twitter:image"/>
<meta content="summary" property="twitter:card"/>

<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Dev_Qubes_Remote_Support rootpage-Dev skin-foreground action-view"><div class="mw-cookiewarning-container banner-container"><div class="mw-cookiewarning-text"><span>By using our website, you acknowledge that you have read, understood and agreed to our Privacy Policy, Cookie Policy, Terms of Service, and E-Sign Consent.</span>Â <a data-href="/wiki/Terms_of_Service" href="../Terms_of_Service">More information</a><form method="POST"><input class="mw-cookiewarning-dismiss" name="disablecookiewarning" type="submit" value="OK"/></form></div></div><div id="navwrapper">

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<div class="mw-indicators mw-body-content">
</div>
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><p>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Donate" href="../Donate.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Please Donate!
</div>
</a>
</div>
</div></div> </div>
</div>
<div id="mw-js-message" style="display:none"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up">Â Actions</span></i></a>
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="Qubes_Remote_Support" href="../Dev/Qubes_Remote_Support.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Dev/Qubes_Remote_Support&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Dev/Qubes_Remote_Support&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=history" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<div id="content">
<h1 class="title" id="firstHeading">Dev/Qubes Remote Support</h1>
<h3 id="tagline">From Whonix</h3> <h5 class="subtitle" id="siteSub"><span class="subpages">&lt; <a class="mw-redirect" data-href="/wiki/Dev" href="../Dev.html" title="Dev">Dev</a></span></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>QubesOS to be remotely manageable from on-demand, ephemeral, hidden onion service to dom0/AdminVM.
</p>
<div class="toc" id="toc"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#challenges"><span class="tocnumber">1</span> <span class="toctext">challenges</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#goals"><span class="tocnumber">2</span> <span class="toctext">goals</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#desired_security_properties"><span class="tocnumber">3</span> <span class="toctext">desired security properties</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#implementation"><span class="tocnumber">4</span> <span class="toctext">implementation</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#sys-whonix_GUI"><span class="tocnumber">5</span> <span class="toctext">sys-whonix GUI</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Missing_parts"><span class="tocnumber">6</span> <span class="toctext">Missing parts</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Idea"><span class="tocnumber">7</span> <span class="toctext">Idea</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#general"><span class="tocnumber">7.1</span> <span class="toctext">general</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Draft_Concept"><span class="tocnumber">8</span> <span class="toctext">Draft Concept</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#remote_support_provider"><span class="tocnumber">8.1</span> <span class="toctext">remote support provider</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#remote_support_receiver"><span class="tocnumber">8.2</span> <span class="toctext">remote support receiver</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#qubes-remote-support-provider-gui"><span class="tocnumber">8.3</span> <span class="toctext">qubes-remote-support-provider-gui</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#notes"><span class="tocnumber">8.4</span> <span class="toctext">notes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#ssh_keys"><span class="tocnumber">9</span> <span class="toctext">ssh keys</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#send_access_into_to_gpg_agent"><span class="tocnumber">10</span> <span class="toctext">send access into to gpg agent</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Preliminary_Work_Done"><span class="tocnumber">11</span> <span class="toctext">Preliminary Work Done</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#See_also"><span class="tocnumber">12</span> <span class="toctext">See also</span></a></li>
</ul>
</div>
<h1><span class="mw-headline" id="challenges">challenges</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=1.html" title="Edit section: challenges">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>There are no Open Source remote support tools which are usable by laymen.
<ul><li>There is teamviewer but it's proprietary and therefore the teamviewer company could take over any users who use it.</li></ul></li>
<li>The existing Open Source tools do not account for that most users nowadays are behind common NAT routers which make it hard to receive unsolicited incoming connections, i.e. hard to run servers. Would require port forwardings which are difficult for users. The internet is full of users seeking help how and failing to create port forwardings. Users are also often on networks (3/4G) that do not even support incoming (server) connections.</li>
<li>Even if some remote support instructions use Open Source software and work on Linux, these won't work easily in Qubes dom0 since non-networked by default.</li>
<li>Most if not all existing remote support Open Source software does not use encryption by default.
<ul><li>Therefore any man-in-the-middle could take over the connection and compromise the remote support receiver.
<ul><li>It's possible to run VNC over encrypted/authenticated SSH but this is not something which laymen users that need remote support are capable to use.</li></ul></li></ul></li></ul>
<h1><span class="mw-headline" id="goals">goals</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=2.html" title="Edit section: goals">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>functional for users with reasonable slow internet connections</li>
<li>reasonable security</li>
<li>Open Source</li>
<li>work behind NAT</li></ul>
<h1><span class="mw-headline" id="desired_security_properties">desired security properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=3.html" title="Edit section: desired security properties">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>encrypted</li>
<li>authenticated</li>
<li>clear and reliable signaling to the user whether remote admin is enabled and whether it is currently in use</li>
<li>Even after sys-whonix compromise the attacker should not be able to access dom0 through VNC.</li></ul>
<h1><span class="mw-headline" id="implementation">implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=4.html" title="Edit section: implementation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Command line tools (which can be called by any GUI).</li>
<li>Whonix-Workstation script. (GUI and command line tools would run here.)</li>
<li>Whonix-Gateway script. (Tor onion service)</li>
<li>dom0 package (Qubes dom0 configuration, SSH/VNC server)</li>
<li>Packaging of a (python) GUI [1] (the GUI itself to be written by Marek)</li></ul>
<h1><span class="mw-headline" id="sys-whonix_GUI">sys-whonix GUI</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=5.html" title="Edit section: sys-whonix GUI">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>able to see already existing hidden services per <code>sys-whonix</code> in a widget.
</p><p>Adding remote support thought requirements:
</p>
<ul><li>List configured onion services.</li>
<li>Delete them.</li>
<li>Create new remote support related hidden onion service. When done, output onion address, port and shared secret for the user to copy paste to chosen secured communication channel.</li>
<li>create time based or persistent remote support</li>
<li><s>multiple remote support onions at the same time</s> remove?</li>
<li>optionally a feature to send access info to the support agent from the GUI</li></ul>
<h1><span class="mw-headline" id="Missing_parts">Missing parts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=6.html" title="Edit section: Missing parts">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Avoidable?
</p>
<ul><li>Qubes dom0 salt</li>
<li>Qubes dom0 GUI</li></ul>
<h1><span class="mw-headline" id="Idea">Idea</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=7.html" title="Edit section: Idea">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="general">general</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=8.html" title="Edit section: general">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>x2go supports SSH.
<ul><li>(Needless to say that SSH or any extra encryption complicates things.)</li>
<li>TODO: test if x2go can work in acceptable speed over a Tor onion. FreeNX (maybe outdated), SPICE, x2go... x2go [in packages.debian.org: yes] seems most promising.</li></ul></li>
<li>Run an SSH server in dom0.</li>
<li>magic-wormhole?
<ul><li>[in packages.debian.org: yes]</li>
<li>(<a data-href="/wiki/File_Sharing#Magic-Wormhole" href="../File_Sharing.html" title="File Sharing">File_Sharing#Magic-Wormhole</a>)</li>
<li>These code words are quite usable. Example: <code>7-crossover-clockwork</code> We'd need two of these.</li></ul></li></ul>
<p>questions:
</p>
<ul><li>SSH server running in dom0 is OK?</li>
<li>I guess running VNC (and perhaps SSH) in dom0 is OK?</li>
<li>Things can always be more compartmentalized, secure but also getting more and more complicated, fragile.</li></ul>
<p>I am considering to script this entirely from dom0 using `qvm-run`. Only expectation: installed (use salt?) and non-broken <code>sys-whonix</code>
</p>
<h1><span class="mw-headline" id="Draft_Concept">Draft Concept</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=9.html" title="Edit section: Draft Concept">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="remote_support_provider">remote support provider</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=10" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=10.html" title="Edit section: remote support provider">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>On remote support provider machine.
</p>
<ul><li>dom0 <code>qvm-start</code> <code>sys-whonix</code></li>
<li>dom0 <code>qvm-run</code> <code>sys-whonix</code> create <code>.onion</code> service config file in <code>/usr/local/etc/torrc.d/40_remote_support.conf</code>
<ul><li><a class="external text" data-href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" rel="noreferrer noopener" target="_blank"><code>anon-auth-autogen</code></a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li></ul></li>
<li>dom0 <code>qvm-run</code> <code>sys-whonix</code> reload Tor</li>
<li>dom0 <code>qvm-start</code> <code>remote-support-provider-server-vm</code></li>
<li>dom0 <code>qvm-run</code> <code>remote-support-provider-server-vm</code> install openssh-server</li>
<li>make openssh-server reachable through <code>.onion</code> running in <code>sys-whonix</code></li>
<li>dom0 <code>wormhole send</code> <code>connection.zip</code>
<ul><li>write wormhole code into script variable</li></ul></li>
<li><code>connection.zip</code> contains
<ul><li><code>.onion</code> hostname of remote support provider</li>
<li><code>~/.ssh/known_hosts</code></li>
<li><code>.auth_private</code> file (private key) for authenticated Tor onion service</li>
<li>ssh key</li></ul></li>
<li>tell remote support receiver out of band (telephone, chat, e-mail) the wormhole code</li>
<li>wait for remote support receiver to start the remote support receiver tool and to enter the wormhole code</li>
<li>in <code>remote-support-provider-server-vm</code>: x2go connect to remote support receiver localhost:port [reverse ssh]</li></ul>
<h2><span class="mw-headline" id="remote_support_receiver">remote support receiver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=11" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=11.html" title="Edit section: remote support receiver">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>On remote support receiver machine.
</p>
<ul><li>dom0 <code>sudo dnf install x2go-server</code></li>
<li>dom0 <code>qvm-start</code> <code>sys-whonix</code></li>
<li>dom0 <code>wormhole receive</code> <code>connection.zip</code>
<ul><li>Must be done in dom0. Not <code>sys-whonix</code>. Because goal is <code>sys-whonix</code> to be untrusted.</li></ul></li>
<li>dom0 install <code>~/.ssh/known_hosts</code></li>
<li>dom0 <code>qvm-run</code> <code>sys-whonix</code> install <code>.auth_private</code> file (private key)
<ul><li><code>sudo sourcefile=~/user.auth_private anon-server-to-client-install</code> (adjust path)</li></ul></li>
<li>dom0 <code>qvm-run</code> <code>sys-whonix</code> test connection to <code>.onion</code></li>
<li>dom0 test connection to <code>.onion</code></li>
<li>dom0 reverse ssh connect to remote support provider <code>.onion</code></li>
<li>There is now an open port on remote support receiver machine over ssh and over <code>.onion</code> available to remote support provider.</li></ul>
<h2><span class="mw-headline" id="qubes-remote-support-provider-gui">qubes-remote-support-provider-gui</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=12" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=12.html" title="Edit section: qubes-remote-support-provider-gui">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Not needed. Remote support provider can use CLI tools for connection setup. Would be encapsulated into a simple CLI call and telling the remote support receiver the wormhole code. Once the remote support receiver connected to the remote support provider (reverse SSH), the remote support provider can use a $VNC viewer (which is graphical) to connect.)
</p>
<h2><span class="mw-headline" id="notes">notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=13" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=13.html" title="Edit section: notes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Can use two wormhole codes if not avoidable.</li>
<li>Automatically re-connect if reverse SSH is down.</li></ul>
<h1><span class="mw-headline" id="ssh_keys">ssh keys</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=14" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=14.html" title="Edit section: ssh keys">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>challenges:
</p>
<ul><li>Have to manage file <code>/root/.ssh/authorized_keys</code> using scripts.
<ul><li>Use secure, long, script generated passwords instead?</li></ul></li></ul>
<h1><span class="mw-headline" id="send_access_into_to_gpg_agent">send access into to gpg agent</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=15" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=15.html" title="Edit section: send access into to gpg agent">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>&gt; optionally a feature to send access info to the support agent from the GUI (for example GPG encrypted email)
</p><p>Patrick said: I would discourage that. Challanges:
</p>
<ul><li>calling e-mail / gpg from command line</li>
<li>calling e-mail / gpg from dom0 or adminVM?</li></ul>
<h1><span class="mw-headline" id="Preliminary_Work_Done">Preliminary Work Done</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=16" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=16.html" title="Edit section: Preliminary Work Done">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li><a class="external free" data-href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn</a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-auth-autogen.8.ronn" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li>
<li><a class="external free" data-href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen" href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen</a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen" href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-auth-autogen" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li>
<li><a class="external free" data-href="https://forums.whonix.org/t/onion-services-authentication/975/4" href="https://forums.whonix.org/t/onion-services-authentication/975/4" rel="noreferrer noopener" target="_blank">https://forums.whonix.org/t/onion-services-authentication/975/4</a> <sup><a data-href="https://web.archive.org/web/https://forums.whonix.org/t/onion-services-authentication/975/4" href="https://web.archive.org/web/https://forums.whonix.org/t/onion-services-authentication/975/4" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li>
<li><a class="external free" data-href="/wiki/Onion_Services#Configure_Onion_Services_Authentication" href="../Onion_Services" rel="noreferrer noopener" target="_blank">../Onion_Services#Configure_Onion_Services_Authentication</a> <sup><a data-href="https://web.archive.org/web/../Onion_Services#Configure_Onion_Services_Authentication" href="https://web.archive.org/web/../Onion_Services" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li>
<li><a class="external free" data-href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install" href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install</a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install" href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/usr/bin/anon-server-to-client-install" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li>
<li><a class="external free" data-href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn" href="https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn</a> <sup><a data-href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn" href="https://web.archive.org/web/https://github.com/Whonix/anon-gw-anonymizer-config/blob/master/man/anon-server-to-client-install.8.ronn" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li></ul>
<h1><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=17" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;action=edit&amp;section=17.html" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li><a data-href="Qubes#ssh_into_Qubes_dom0" href="../Dev/Qubes.html" title="Dev/Qubes">Dev/Qubes#ssh_into_Qubes_dom0</a></li>
<li><a class="external free" data-href="https://github.com/fepitre/qubes-remote-desktop" href="https://github.com/fepitre/qubes-remote-desktop" rel="noreferrer noopener" target="_blank">https://github.com/fepitre/qubes-remote-desktop</a> <sup><a data-href="https://web.archive.org/web/https://github.com/fepitre/qubes-remote-desktop" href="https://web.archive.org/web/https://github.com/fepitre/qubes-remote-desktop" rel="noreferrer noopener" target="_blank">[archive]</a></sup></li></ul>
</div></div><div class="printfooter">
Retrieved from "<a data-href="/w/index.php?title=Dev/Qubes_Remote_Support&amp;oldid=55229" dir="ltr" href="https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;oldid=55229">https://www.whonix.org/w/index.php?title=Dev/Qubes_Remote_Support&amp;oldid=55229</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 10 March 2020, at 18:09.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="../Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="/wiki/Privacy_Policy" href="../Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Cookie_Policy"><a data-href="/wiki/Cookie_Policy" href="../Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-Terms_of_Service"><a data-href="/wiki/Terms_of_Service" href="../Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-DMCA"><a class="mw-redirect" data-href="/wiki/DMCA" href="../DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-E_Sign_Consent"><a data-href="/wiki/E-Sign_Consent" href="../E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="../Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="../Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="../Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
</html>
