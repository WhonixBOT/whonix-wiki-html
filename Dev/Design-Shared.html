<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Dev/Design-Shared - Whonix
 url: ../Dev/Design-Shared
 date: Wed Dec 26 07:42:31 2018
-->
<head>
<meta charset="utf-8"/>
<title>Dev/Design-Shared - Whonix</title>
<link rel="stylesheet" type="text/css" href="../style.css">




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.31.1" name="generator"/>
<meta content="" name="google-site-verification"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="image"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" name="twitter:image:src"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@Whonix" name="twitter:site"/>
<meta content="Whonix" name="twitter:domain"/>
<meta content="@Whonix" name="twitter:creator"/>
<meta content="Detailed Technical Design Shared by Whonix-Gateway and Whonix-Workstation" name="description"/>
<meta content="Detailed Technical Design Shared by Whonix-Gateway and Whonix-Workstation" name="twitter:description"/>
<meta content="width=device-width, user-scalable=yes, initial-scale=1.0" name="viewport"/>
<link data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/favicon.ico" href="https://www.whonix.org/favicon.ico" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.whonix.org/w/opensearch_desc.php" rel="search.html" title="Whonix (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.whonix.org/w/api.php?action=rsd" href="https://www.whonix.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.whonix.org/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Whonix Atom feed" type="application/atom+xml"/>
<meta content="article" property="og:type"/>
<meta content="Whonix" property="og:site_name"/>
<meta content="Dev/Design-Shared" property="og:title"/>
<meta content="../Dev/Design-Shared" property="og:url"/>
<meta content="https://www.whonix.org/w/images/4/47/Whonix_Facebook_Social_Share.png" property="og:image"/>
<meta content="Detailed Technical Design Shared by Whonix-Gateway and Whonix-Workstation" property="og:description"/>

<meta content="" property="fb:app_id"/>
<meta content="" property="fb:admins"/>
<meta content="https://www.facebook.com/Whonix" property="article:author"/>
<meta content="https://www.facebook.com/Whonix" property="article:publisher"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=foreground&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dev_Design-Shared rootpage-Dev skin-foreground action-view"><div id="navwrapper"><!-- START FOREGROUNDTEMPLATE -->

</div>
<div id="page-content">
<div class="row">
<div class="large-12 columns">
<!-- Output page indicators -->
<div class="mw-indicators mw-body-content">
</div>
<!-- If user is logged in output echo location -->
<!--[if lt IE 9]>
				<div id="siteNotice" class="sitenotice panel radius">Whonix may not look as expected in this version of Internet Explorer. We recommend you upgrade to a newer version of Internet Explorer or switch to a browser like Firefox or Chrome.</div>
				<![endif]-->
<div class="sitenotice" id="siteNotice"><div dir="ltr" id="localNotice" lang="en"><div class="mw-parser-output"><p><style type="text/css">

#banner {
 position: relative;
 overflow: hidden;
 margin-bottom: 0.5em !important;
 margin-top: 0.5em !important;
 background-color:#D03232;
 border: solid 1px #aaaaaa; 
 height:66px;
}

#banner a.cn-full-banner-click {
 display:block;
 height:100%;
 width:100%;
 cursor: pointer;
}


#banner-logo {
 position: absolute;
 top: 8px;
 left: 15px;
 background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAArCAYAAAA65tviAAANxklEQVRo3rWae3Ad1X3HP2d3r65elmz5KcvyA0u2MQYbcIyhNgNI40wcHAdKIDjM5EFC0oaB0nTS0Jl22ukj09CmnaRNJ7QpTMorpQWSQoITiRjimNi4NTa2ZVvGT0m2JEuWru5D997d8+sf5+zdvZJsnHS6M5rV2bv39/t9f+/zO1cxxdUGdJp7nYKPAXcLrAEWAnkFx4E3gVc74KcA7UAHV3a12bvlMVfBBoGNClYCswFf4CSwD9ip4JcdoC/HQ031sN3cPifwPftIAKViC0AUKPv/VmVA6SsF1AazgBcUtEmMx4TX4s++ADzdCX6o6EsCCV9oNxpfKoCL4VgD1NYkmdEwjZHRDCdSOUZBHAtQ4JyClg7IXs4S1gqdwO1WEQKoGZZHwkpfAMbsX+zKKVjRAWcuaZFQk+3QDbRooAlomlHDnffdQuPCWVTVJEELIkIhm2fw/Agdb3Wx/cCZUABfwbYOeHEqrbXBastmlg/SXFWhPr7uKhbOrqW2sgLXUSjR5Md9xtLj9A2k2LHvDKNaOAcikdAPdMBzk4CEINqgU8EdClgErFvfyub7bkGs8IhAoBGtES2gBc9RnD45wJM/fIczF9LiGpqPdMC32ywDq6C7gJc0SLXnqE/d3MJNKxopFAMkCOkZ2mhBtEZpcBB2vtfDO8cH6QfS1qWBrR3wo1BhcYt8FHhVLIgbb1jC1gc2orUxvmEQAQjXBOb/hOvwrWd38t8nBnAMycc64O+tJTYreE2DLG6oVX/8iQ8ZACEtMSDQIBICMYoTLagg4PxgipffPkEvkDJgAoEZnZAGUDawqwVGgMQcYHnjDB786laUgNaC0trcRaM1pTWWWSiM0gE/+Mk+fvruaVEmdr4osNtmH3XT0jl89o5rEMczfhIqRkIwEoHQgkIsf0EXCwz1D/GDX52iBxOIAqMYMBK61j0CL7rAEuAP/vx+KuumWUEjZsQ0KFaDaF0SQkRw/IDnfryb7QfOigdFBa6Ae9vVjXxyw9VQWRvRjLuspuRWEIKJ0RfQmTF27TvO3p5RjofCw291wtvKmj4FTGsC1t+4hLse3IwOiAlcrjWxWgqFmChUopDlb5/bwf4zwyigdW4dj915A279bBCrgDg9kUk8jDsbRZZ4APT38a87DtNb0NJvQqO3ExaoNlim4KiALAL1xUe3sODqlijgxPit6BiDmE9PLRDI0Dm+9tTPyRV8/vq+dVQ0LkIpJxKqRKfcPc3nhm75c/MsyKTZt2svO86m5ERU21pUG9wDvOgBS4E/ffIxiiRQlogWo/0yAGHsxC1S0pplHmgGDu7DVTB98TLcZFUkUJlLWR4SKUVKtGN8LN3ssS4yg4M89V4/p8EPwAPuUW3wd8CjM0FtWNnE/Y9/nmIhiOLDMii5lAiC1VqoTSItx10kGB0m33uaqmWrSxoWGw9l67LvESkj5A3oXJb0u3vR2QyegmcPDnLa18EQuAq+pdpsCVkM3Pup21nzkXa07xuBY24wyX9DjYYgofRZFDcayY+jKipj7xMJiZQDiNEUAeW4+BeHyR49SHHgHIICLTgi7OpL8+7FcX0KHOAN1Q6nBBYtAx78w200r15t0yI20JhCiNhayn14olCircBhZiq5CdaSsc/F1GjRmuJgP7ljhyj09YByI7cOTPB3j+TlF/1ZjpkY6VVtMKqgrgX48l/8LnNbW21miQnIhAAsgZta+Agg5WvibgSClJot8X2kWCB79DDZg/tCj40KZKCjVBwIg7kir/VlpdsAyag28B1wlwKPfOMxZi9tMSlXImZl2itxIEqJZaBCoSc/FxHTSihT+8X3yR0/QrbrAH4qBcWCLbQ25etY6xLoMpcdzPm81j8u3da+qt3WkBbg4b96hMY1NyK+T5BNQ7GI9ouGsOOilAuuh/ISKC8BjhMJGsZJ6Cl+ET2eQ+dyBOkU/uhFgpGLFEcuojNjBOkxdDYTKaOs9bH3QGItS9QOIZqBXMBPLhSwFrmo2swGZnEr8NnPtTGzvpIgO2aratQHSSCgTX8kQWCaR+vTSimjdN83nxV9xA/KqrYxUMyScW3HG8aSsBMa1NgaLZzOaXaMFEMgx1QbbAc2LQK2fewGFi1oQIcNYhBv5MK1BRcjOnEdarC0tt3tRH/H+nvIL/pe6F7lTWpIz1WKPakiezOaHgPkZdUOTwh8pQHUh1cv5LabW/F9P2pBAo3WGhVmMh2tdWDrimVatg50qeGMgEosYCPBDL1yt5JYrEj4LgqlwFPw7/0FugNhzPRcf6Ta4eMCLzvA6soEX/7MRvL5YlmrLjoKMuNSsVY7ZCJi3U+X/FiCqP0vuadE75i1pR/o8iY1iIFCULHNbF4Lz/QXOBltqm5TbbBAwVkBaQb1O7+9lrqaihITYkxEYj5sgcWzzCRNxvJ+6bMy4LH3YlYr21wRnxaYxHIsq3kz5XM6AlIZtvFngQVzgU3XNbPu2qYyJhN9dvJurnw9dUxMVMTkTZoBbmJSiZQDsMki4SheGSjQ5Qsp8/j7HfDpEMhGgbcc4Lqkx5c+sZZCvoiUNlGRayixwWmFDdcqiKwjsc3YxLWJLR19T8uk9UQAIQg3WUFfpsB/XShwygw+RGC+gn5l99VJgRzAHFCbr23i+ta5UUxom2qDmOaEqNpewjIywcWiLjm+jqw8lRXiV8OmtTz1zC6OBsYaCo53QOvEKcrDwLcdYJXn8IUt1+H7QVlMXFJAmZgM4rVHXzobaX1FACTQ1K5azClVwX90HqLHWANgVgcMl4DE5lm9Ao11oDY01rFpTbN1o8jfQwHD2lIW/GJS8AfVBDfQjAaaM55mSU6hqgKCGo3ruUhRcMcdvHEHsw/TVC2dT2L5Qr7z9E7eFyEwIJ7tgAemnGsJtCv4mYBcBWrb+iU01FbYGhHb8gaxAhZbhxlHTWoton19Rgf8W33AS+th0eKAh+bUcO/tH6a+ehEnuodQY/0Mv/8e+aODsF2Y0dxMdUsTz7y6n/8ZTDFuhO7vgHmXHZm2wz8LfN4BrgI+fctiqjynlE0+qCZQEAb8AskV4+STASrr4A079J1x+UarT9PmDaxddyNVlZVsa/guS5s2QDpF14FBBntS1JMnfSFPX1+BG2a4nOtqYs/eAXafHmIoEnhlB3R94Mi0zUwbl1aAWlXhsm1tc6kah5U5KlpmrQrC6Kocrb+3glmt13C8u0CtCiiOpRjuOU/63FlSmSSvL7+J/MxqChmfx5v/k2leLe54kQt9gjMODY5LrXZpUB6jvT5/9p0Mp/qD0ngWuKsDXvnAIbbNYjOBfgG3BlhdneCuVXPLKnB54Gvy84p86McuycJGcoMj+OkM3YeGkGweP1VgdCigSmBa1ueha6+hKqlZevYEH6kfYdEMl+uaPLycS5BSDPcJR44GPH80zytKqDwJc0agZoQn3oKvXvE03rpYo8BpIFENLE843LtyDo5M0RCKMNRU4OZnAsZ6k1T4PvmLmvSwIp9ymFPh0lTjQdph554MW1oqSSQ0dZWaRE4z60SOm6qEGRqCPLw7BscbwFsCugqyBeh/H0lfROkxzjHOz+jlbXz208WviGZck48V7Lx2OXBEQCpAtTqKbcsbcEVKk8fQxfJFYfvmDNs+6VAvCZqmuZB2IOtAxmGgJ2DnngzfPKv55a2gqmB6JdQloaYCqj2o8MCz/iNiDknyPmSLkC4io+Oo1Lgd1x/G53VaSXPqshaJxctKBYcEJAFqmaPYvKCWhoQzqf0eKWoOJjUXmjXzlgvzZgEZuNAD/3hSOFMJ2fnA9YZHpQczqmBaAqoroNKFhGv2a5gOn2IAOR8yRUjlYfQCFE4BDfTzHL/PKNuBEXUlJ0zt0GLnt7WANIHaNKuS5TUuxVjqVUoRCGS1kCpC1u50k47R7gsP+Lx6UEPSzGad2VBfC/UVUJuAqgRUuOCGVsEMrvIBZAMYPGuUQjNQARziNC9xPwHdVwTEJgAHOGrPTmQmqNVJh1uneyQcs0O8THFmZExo2ac43zWdh54foGtAoA4qF0PDfKithOoEVFn3KllFQ1HDuRNwpgej0jzQhzAdxZPcTZbdVwRkQvX/EbBFMCO+RcBHGxLMSSozyhFjmUkNX6DYf2+RNZshWXAZueiw5fk8qWpQLjSvhbrp1ioOePagRRR07YKBgmXWC0zHbJ8HKfIid5L7NYBMOBC6XcEbYg9dpgPXJBTtMxN4qtw6IoJyHZyqJIHn0eWNs2dBhqXL4I6Vis7DIo8fQWkXKucizU2oucvMLlAVYPebkJ0N1GE2G/OB83a9nb/kKE9R5MSvBWQCqOnA08BWAfFAzQLWV7tcX+fhKTsScx2cigSugsMX8+wfydOt4YI9J3SAcfj6gXUo6vkajeZMscaF3Djoq8zJDg5QQHBRnOUX/JBvAnuBPkD/X4CEKfo+gX9QMEuDVIFqAG6d5tFS7eB6Lj3jATuGCgwBw7EDVODnHtz9ujlkgnpWsJ4dNDKXuTag+4F6hGEUVfTyPb5OjjeAc4Tfu1z6/Q1i52+AR8WEDgnrBa71hGx09idihLi+EwbKDk0TQJF6NrOHFpYhCEUUHgHbeYJu/gVjzNErruy/CRj7A4M/EfhKnLhEIN7B/Pigp5NL/MigGTiLyx28wGru4Qjf5xgP8z5piGaA/y9ApgA2D/gSBlAS+K6Cf+qAw1dE4GngM0ArK+nm8JQ/JZhw/S9dtEONwVO5dQAAAABJRU5ErkJggg==);
 height: 50px;
 width: 100%;
 background-repeat: no-repeat;
}

#banner #black-text {
 font-size: 1.1em;
 color: white;
 padding: 0.5em 40px 0.4em 60px;
 line-height: 1.3em;
 text-align: center;
}
</style>
</p><div id="banner">
<a class="cn-full-banner-click" data-href="/wiki/Payments" href="../Payments.html" title="">
<div id="banner-logo"></div>
<div id="black-text">
Whonix requires money to stay alive.
     </div>
</a>
</div>
</div></div></div> </div>
</div>
<div id="mw-js-message" style="display:none;"></div>
<div class="row">
<div class="large-12 columns" id="p-cactions">
<a class="button small secondary radius" data-dropdown="actions" data-options="align:left; is_hover: true; hover_timeout:700" href="#" id="actions-button"><i class="fa fa-cog"><span class="show-for-medium-up"> Actions</span></i></a>
<!--RTL -->
<ul class="f-dropdown" data-dropdown-content="" id="actions">
<li class="selected" id="ca-nstab-main"><a accesskey="c" data-href="/wiki/Dev/Design-Shared" href="../Dev/Design-Shared.html" title="View the content page [c]">Page</a></li><li class="new" id="ca-talk"><a accesskey="t" data-href="/w/index.php?title=Talk:Dev/Design-Shared&amp;action=edit&amp;redlink=1" href="https://www.whonix.org/w/index.php?title=Talk:Dev/Design-Shared&amp;action=edit&amp;redlink=1" rel="discussion.html" title="Discussion about the content page (page does not exist) [t]">Discussion</a></li><li id="ca-edit"><a accesskey="e" data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit.html" title="Edit this page [e]">Edit</a></li><li id="ca-history"><a accesskey="h" data-href="/w/index.php?title=Dev/Design-Shared&amp;action=history" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=history.html" title="Past revisions of this page [h]">History</a></li> </ul>
<!--RTL -->
<div id="content">
<h1 class="title" id="firstHeading">Dev/Design-Shared</h1>
<h5 class="subtitle" id="siteSub"><span class="subpages">&lt; <a class="mw-redirect" data-href="/wiki/Dev" href="../Dev.html" title="Dev">Dev</a></span></h5>
<div class="clear_both" id="contentSub"></div>
<div class="mw-bodytext" id="bodyContent">
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output">
<p><br/>
<br/>
</p>
<div class="toc" id="toc"><div class="toctitle" dir="ltr" lang="en"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#"><span class="tocnumber">1</span> <span class="toctext"></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Last_updated_git"><span class="tocnumber">2</span> <span class="toctext">Last updated git</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Get_Build_Dependencies"><span class="tocnumber">3</span> <span class="toctext">Get Build Dependencies</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Get_Base_Operating_System"><span class="tocnumber">4</span> <span class="toctext">Get Base Operating System</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Backup_Base_Operating_System"><span class="tocnumber">5</span> <span class="toctext">Backup Base Operating System</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Mount_Image"><span class="tocnumber">6</span> <span class="toctext">Mount Image</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Copy_Files_Into_Image"><span class="tocnumber">7</span> <span class="toctext">Copy Files Into Image</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Chrooting"><span class="tocnumber">8</span> <span class="toctext">Chrooting</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Running_Scripts_inside_Chroot"><span class="tocnumber">9</span> <span class="toctext">Running Scripts inside Chroot</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Unchrooting"><span class="tocnumber">10</span> <span class="toctext">Unchrooting</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Unmounting"><span class="tocnumber">11</span> <span class="toctext">Unmounting</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Creating_a_Virtual_Machine_package"><span class="tocnumber">12</span> <span class="toctext">Creating a Virtual Machine package</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Files"><span class="tocnumber">13</span> <span class="toctext">Files</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Essential"><span class="tocnumber">13.1</span> <span class="toctext">Essential</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Username.2C_FQDN.2C_hostname"><span class="tocnumber">13.1.1</span> <span class="toctext">Username, FQDN, hostname</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Operating_System_Updates"><span class="tocnumber">13.1.2</span> <span class="toctext">Operating System Updates</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#TimeSync"><span class="tocnumber">13.1.3</span> <span class="toctext">TimeSync</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Banned_Packages"><span class="tocnumber">13.1.4</span> <span class="toctext">Banned Packages</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Stream_Isolation_Wrapper"><span class="tocnumber">13.1.5</span> <span class="toctext">Stream Isolation Wrapper</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="#Extra"><span class="tocnumber">13.2</span> <span class="toctext">Extra</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#Time_Privacy"><span class="tocnumber">13.2.1</span> <span class="toctext">Time Privacy</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#hdd_configuration_.2F_swap_.2F_Disk_uuid_.2F_dbus_machine-id"><span class="tocnumber">13.2.2</span> <span class="toctext">hdd configuration / swap / Disk uuid / dbus machine-id</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Base_Files"><span class="tocnumber">13.2.3</span> <span class="toctext">Base Files</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24"><a href="#Usability"><span class="tocnumber">13.3</span> <span class="toctext">Usability</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#check_mechanism"><span class="tocnumber">13.3.1</span> <span class="toctext">check mechanism</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Desktop_Environment"><span class="tocnumber">13.3.2</span> <span class="toctext">Desktop Environment</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#sudoers"><span class="tocnumber">13.3.3</span> <span class="toctext">sudoers</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Console_Autologin"><span class="tocnumber">13.3.4</span> <span class="toctext">Console Autologin</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Console_Default_Password_Hint"><span class="tocnumber">13.3.5</span> <span class="toctext">Console Default Password Hint</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Console_Welcome_Message"><span class="tocnumber">13.3.6</span> <span class="toctext">Console Welcome Message</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Deactivate_display_power_saving_in_Virtual_Machines"><span class="tocnumber">13.3.7</span> <span class="toctext">Deactivate display power saving in Virtual Machines</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#boot_manager_configuration"><span class="tocnumber">13.3.8</span> <span class="toctext">boot manager configuration</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="#update_command_not_found"><span class="tocnumber">13.3.9</span> <span class="toctext">update command not found</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#Secure.2FSSL_Command_Line_Downloader"><span class="tocnumber">13.3.10</span> <span class="toctext">Secure/SSL Command Line Downloader</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#Slim_Down"><span class="tocnumber">13.3.11</span> <span class="toctext">Slim Down</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Icons"><span class="tocnumber">13.3.12</span> <span class="toctext">Icons</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-37"><a href="#Debugging"><span class="tocnumber">13.4</span> <span class="toctext">Debugging</span></a>
<ul>
<li class="toclevel-3 tocsection-38"><a href="#Sanity_Checks"><span class="tocnumber">13.4.1</span> <span class="toctext">Sanity Checks</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Misc"><span class="tocnumber">13.4.2</span> <span class="toctext">Misc</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Variables"><span class="tocnumber">13.4.3</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Package_Cache"><span class="tocnumber">13.4.4</span> <span class="toctext">Package Cache</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Prevent_daemons_from_starting_inside_chroot"><span class="tocnumber">13.4.5</span> <span class="toctext">Prevent daemons from starting inside chroot</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Indicate_last_chroot_script"><span class="tocnumber">13.4.6</span> <span class="toctext">Indicate last chroot script</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Lower_priority_while_building"><span class="tocnumber">13.4.7</span> <span class="toctext">Lower priority while building</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#Enable_debugging"><span class="tocnumber">13.4.8</span> <span class="toctext">Enable debugging</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#Error_handling"><span class="tocnumber">13.4.9</span> <span class="toctext">Error handling</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Delete_Virtual_Machine_files"><span class="tocnumber">13.4.10</span> <span class="toctext">Delete Virtual Machine files</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="#Interactive_Chroot"><span class="tocnumber">13.4.11</span> <span class="toctext">Interactive Chroot</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-49"><a href="#Licensing"><span class="tocnumber">13.5</span> <span class="toctext">Licensing</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#Build_Automation"><span class="tocnumber">14</span> <span class="toctext">Build Automation</span></a></li>
<li class="toclevel-1 tocsection-51"><a href="#Release_Automation"><span class="tocnumber">15</span> <span class="toctext">Release Automation</span></a></li>
<li class="toclevel-1 tocsection-52"><a href="#Other_important_things"><span class="tocnumber">16</span> <span class="toctext">Other important things</span></a></li>
</ul>
</div>
<h5><span class="mw-headline" id=""></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=1" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=1.html" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Authoring Notes:
</p>
<ul><li>Start with a general description below each headline. Be as general as possible and try to avoid using terms like 'Tor'.</li>
<li>Next, carefully describe the Whonix Example Implementation. Show exactly how Whonix implements the goals stated above.</li>
<li>See <a data-href="/wiki/Dev/Documentation_Guidelines" href="../Dev/Documentation_Guidelines.html" title="Dev/Documentation Guidelines">Dev/Documentation_Guidelines</a> for the preferred formatting style and grammatical considerations.</li></ul>
<p><br/>
</p>
<h1><span class="mw-headline" id="Last_updated_git">Last updated git</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=2" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=2.html" title="Edit section: Last updated git">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>4a70f4868d683a08b73c6236b36684220d704d97
</p>
<h1><span class="mw-headline" id="Get_Build_Dependencies">Get Build Dependencies</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=3" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=3.html" title="Edit section: Get Build Dependencies">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Install a tool to create Virtual Machine images (such as grml-debootstrap) and tools for mouting and apply other useful build configurations.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Configure apt-get and dpkg, to ask no questions while installing the build dependencies.</li>
<li>Update the build machine's operating system.</li>
<li>Configure apt-cacher-ng to speed up downloading when building multiple times (for debugging).</li>
<li>Install tools used in the build process.
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/15_prepare-build-machine" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/15_prepare-build-machine" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/15_prepare-build-machine</a></li></ul></li></ul>
<h1><span class="mw-headline" id="Get_Base_Operating_System">Get Base Operating System</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=4" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=4.html" title="Edit section: Get Base Operating System">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Use a tool to create a Virtual Machine base installation, which contains a secure operating system and which is bootable.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Used Debian for reasons explained on the <a data-href="/wiki/Dev/Operating_System" href="../Dev/Operating_System.html" title="Dev/Operating System">Dev/Operating System</a> design page.</li>
<li>Whonix uses grml-debootstrap to build .img Virtual Machine images. The .img images are still virtualizer agnostic, can be run in a variety of virtualizers such as Qemu or Qubes OS. They can (and will in Whonix-Example-Implementation case) be converted to other formats to support other virtualizers (such as the .img format, which VirtualBox uses in case of Whonix).
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/Whonix-Gateway_packages" href="https://github.com/Whonix/Whonix/blob/master/Whonix-Gateway_packages" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/Whonix-Gateway_packages</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/Whonix-Workstation_packages" href="https://github.com/Whonix/Whonix/blob/master/Whonix-Workstation_packages" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/Whonix-Workstation_packages</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/grml_config" href="https://github.com/Whonix/Whonix/blob/master/grml_config" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/grml_config</a></li></ul></li></ul>
<p>Other Implementations:
</p>
<ul><li>Old Whonix versions up to 0.3.0 used Ubuntu as base operating system.</li>
<li>Old Whonix versions up to 0.3.0 used <a class="external text" data-href="https://en.wikipedia.org/wiki/Preseed" href="https://en.wikipedia.org/wiki/Preseed" rel="noreferrer noopener" target="_blank">Preseed</a>, installed the operating system from DVD inside a Virtual Machine.</li>
<li>This step can also be done manually, i.e. the user could be told to manually install some operating system.</li>
<li>Whonix with <a class="mw-redirect" data-href="/wiki/Physical_Isolation" href="../Physical_Isolation.html" title="Physical Isolation">Physical Isolation</a>.</li></ul>
<h1><span class="mw-headline" id="Backup_Base_Operating_System">Backup Base Operating System</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=5" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=5.html" title="Edit section: Backup Base Operating System">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Make a backup of that image. This is not strictly required, but you will want to modify that image often and want to start fresh often.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/25_backup-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/25_backup-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/25_backup-img</a></li></ul>
<h1><span class="mw-headline" id="Mount_Image">Mount Image</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=6" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=6.html" title="Edit section: Mount Image">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Mount the image, so files can be copied into it.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/mount-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/mount-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/mount-img</a></li></ul>
<h1><span class="mw-headline" id="Copy_Files_Into_Image">Copy Files Into Image</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=7" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=7.html" title="Edit section: Copy Files Into Image">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Copy configuration files and chroot scripts into the Virtual Machine image to transform it into a Gateway or Workstation.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Copying script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/30_copy-into-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/30_copy-into-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/30_copy-into-img</a></li>
<li>Verification script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files</a></li>
<li>All files from whonix_gateway will get copied into Whonix-Gateway.</li>
<li>All files from whonix_workstation will get copied into Whonix-Workstation.</li>
<li>All files from whonix_shared will get copied into Whonix-Gateway and Whonix-Workstation.</li></ul>
<h1><span class="mw-headline" id="Chrooting">Chrooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=8" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=8.html" title="Edit section: Chrooting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>As preparation for the next step, there must be a method to chroot the mounted image.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img</a></li></ul>
<h1><span class="mw-headline" id="Running_Scripts_inside_Chroot">Running Scripts inside Chroot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=9" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=9.html" title="Edit section: Running Scripts inside Chroot">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The base operating system has to be modified. Some scripts need to be executed inside the virtual machines. This is called running chroot scripts.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img</a></li></ul>
<h1><span class="mw-headline" id="Unchrooting">Unchrooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=10" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=10.html" title="Edit section: Unchrooting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The process of chrooting must be undone after the chroot scripts were executed.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img</a></li></ul>
<h1><span class="mw-headline" id="Unmounting">Unmounting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=11" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=11.html" title="Edit section: Unmounting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The image must be unmounted after the copying files into it or after chrooting, running chroot scripts and unchrooting.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/unmount-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/unmount-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/unmount-img</a></li></ul>
<h1><span class="mw-headline" id="Creating_a_Virtual_Machine_package">Creating a Virtual Machine package</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=12" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=12.html" title="Edit section: Creating a Virtual Machine package">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>It is useful to deploy the Virtual Machine images through a package format, which makes it easy to import them for users.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Uses VirtualBox.</li>
<li>VirtualBox does not support .img images, only .vdi (and others).
<ul><li>Therefore the .img image has to be converted to .vdi.
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/40_convert-img-to-vdi" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/40_convert-img-to-vdi" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/40_convert-img-to-vdi</a></li></ul></li>
<li>The next step is to create a virtual machine description file.
<ul><li>After creating it, the Virtual Machine could be started.</li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm</a></li></ul></li>
<li>An easy way to deploy Virtual Machine images is through the <a class="external text" data-href="https://en.wikipedia.org/wiki/Open_Virtualization_Format" href="https://en.wikipedia.org/wiki/Open_Virtualization_Format" rel="noreferrer noopener" target="_blank">Open Virtualization Format</a> format (.ova images)
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/50_export-vbox-vm" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/50_export-vbox-vm" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/50_export-vbox-vm</a></li></ul></li></ul></li></ul>
<h1><span class="mw-headline" id="Files">Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=13" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=13.html" title="Edit section: Files">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Essential">Essential</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=14" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=14.html" title="Edit section: Essential">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="Username,_FQDN,_hostname"></span><span class="mw-headline" id="Username.2C_FQDN.2C_hostname">Username, FQDN, hostname</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=15" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=15.html" title="Edit section: Username, FQDN, hostname">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Hosts file. Use non-identifying values for FQDN and hostname, because some applications may leak it. (Mixmaster is known to leak it.) Set FQDN to "host.localdomain" and set hostname to "host". <a class="external text" data-href="https://mailman.boum.org/pipermail/tails-dev/2013-January/002457.html" href="https://mailman.boum.org/pipermail/tails-dev/2013-January/002457.html" rel="noreferrer noopener" target="_blank">It is best when they are shared among anonymity focused distributions.</a>
</p><p>It is recommended to work as non-privileged user and not using one will get into usability trouble (desktop environments don't like running as root). For usability, consistency, defence in depth, name it "user". It is better to say non-saying operating system user account names and ideally share them among anonymity focused distributions since the user could accidentally leak it (ex: ssh).
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Set FQDN to "host.localdomain" and set hostname to "host": <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hosts" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hosts" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hosts</a></li>
<li>adding user account "user": <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/30_adduser_user" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/30_adduser_user" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/30_adduser_user</a></li>
<li>configuring hostname "host": <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/20_create-debian-img</a></li>
<li>Even though grml-debootstrap already creates /etc/hostname with content "host", it is useful for physical isolation users, who set up the wrong host while installing: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hostname" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hostname" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/hostname</a></li>
<li>More information about the shared user name "user": <a data-href="/wiki/Protocol-Leak-Protection_and_Fingerprinting-Protection" href="../Protocol-Leak-Protection_and_Fingerprinting-Protection.html" title="Protocol-Leak-Protection and Fingerprinting-Protection">Protocol-Leak-Protection and Fingerprinting-Protection</a></li></ul>
<h3><span class="mw-headline" id="Operating_System_Updates">Operating System Updates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=16" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=16.html" title="Edit section: Operating System Updates">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Configure the package manager.
</p><p>Configure software repositories.
</p><p>Do not use the default automatic updates mechanism and use higher timeouts. It is better to disable the operating system's default automatic update mechanism, because times of automatic run are too predictable. The network fingerprint (not web fingerprint) could help an ISP guessing, that there is a network hidden operating system.
</p><p>Notify about operating system updates in a safe way.
</p><p>Misc settings, higher timeouts, more retries when package download or DNS resolution fails. This is useful because anonymity networks are slow and otherwise updating would occasionally fail due to network problems.
</p><p>Must have a secure operating system updater (package manager), i.e. must not fall through the <a class="external text" data-href="https://www.updateframework.com/wiki/Docs/Security#AttacksandWeaknesses" href="https://www.updateframework.com/wiki/Docs/Security" rel="noreferrer noopener" target="_blank">TUF Threat Model</a> (<a class="external text" data-href="http://www.webcitation.org/6F7Io2ncN" href="http://www.webcitation.org/6F7Io2ncN" rel="noreferrer noopener" target="_blank">w</a>). Additionally, downloading should go thought an anonymity network, with changing exit relays. This makes an adversary less likely to interfere with the update process, because updates go through different ISPs, which makes it much more difficult to mount a man-in-the-middle attack over an extended amount of time.
</p><p>The package manager shouldn't confuse the user with questions to keep the locally installed configuration file or to install the new version from the upstream package maintainer.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Gateway and Workstation updates go through Tor. (Due to Firewall, Network Configuration and Stream Isolation Wrapper, details in Design-Shared/Gateway/Workstation.)</li>
<li>Whonix uses Debian ftp.us.debian.org and security.debian.org repositories.
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/sources.list" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/sources.list" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/sources.list</a></li></ul></li>
<li>Disable the operating system's default automatic update mechanism.
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/20whonix-noperiodic" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/20whonix-noperiodic" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/20whonix-noperiodic</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/apper" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/apper" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/apper</a></li></ul></li>
<li>Higher timeouts, more retries.
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/90whonix-timeout" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/90whonix-timeout" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/apt.conf.d/90whonix-timeout</a></li></ul></li>
<li>For the safe update notification, see check mechanism (whonixcheck) below.</li>
<li>Disable Apper (packagekit) automatic download of package lists (due to upstream bugs <a class="external free" data-href="https://bugs.freedesktop.org/show_bug.cgi?id=62575" href="https://bugs.freedesktop.org/show_bug.cgi?id=62575" rel="noreferrer noopener" target="_blank">https://bugs.freedesktop.org/show_bug.cgi?id=62575</a> and <a class="external free" data-href="https://bugs.freedesktop.org/show_bug.cgi?id=62576" href="https://bugs.freedesktop.org/show_bug.cgi?id=62576" rel="noreferrer noopener" target="_blank">https://bugs.freedesktop.org/show_bug.cgi?id=62576</a>)
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/apper" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/apper" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/apper</a></li></ul></li></ul>
<h3><span class="mw-headline" id="TimeSync">TimeSync</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=17" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=17.html" title="Edit section: TimeSync">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add a secure method with distributed trust to obtain date and time, because a clock which is drift, is bad for anonymity.
</p><p>Whonix-Example-Implementation:
</p><p>General Information
</p>
<ul><li><a class="mw-redirect" data-href="/wiki/TimeSync" href="../TimeSync.html" title="TimeSync">TimeSync</a></li>
<li>tails_htp configuration file: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/default/htpdate" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/default/htpdate" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/default/htpdate</a></li>
<li>When timesync is run by cron, it adds a random delay to prevent having a predictable network (not web) fingerprint. Essentially runs tails_htp every hour at a random time.</li></ul>
<p>Start Hooks
</p>
<ul><li>tails_htp init script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/init.d/htpdate" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/init.d/htpdate" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/init.d/htpdate</a></li>
<li>Using cron to start it every hour: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync</a></li>
<li>The file <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync_hourly" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync_hourly" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync_hourly</a> gets run by <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/30_timesync</a> cron every hour.</li>
<li>Auto start Boot Clock Randomization: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/etc/init.d/bootclockrandomization" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/etc/init.d/bootclockrandomization" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/etc/init.d/bootclockrandomization</a></li>
<li>Auto start timesync status notification after (auto) login Whonix-Gateway: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/30_timesync.sh" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/30_timesync.sh" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/30_timesync.sh</a></li>
<li>Workstation specific
<ul><li>Auto start timesync status notification after (auto) login Whonix-Workstation: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/timesync.desktop" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/timesync.desktop" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/timesync.desktop</a></li></ul></li></ul>
<p>Install Hooks
</p>
<ul><li>Adding tails_htp daemon user account and init script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_htp" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_htp" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_htp</a></li>
<li>Install Boot Clock Randomization init script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_bootclockrandomization" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_bootclockrandomization" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_bootclockrandomization</a></li>
<li>Install Time Sanity Check init script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_timesanitycheck" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_timesanitycheck" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_timesanitycheck</a></li></ul>
<p>Supporting Files
</p>
<ul><li>/etc/sudoers.d/
<ul><li>Allow Network Time Synchronization (tails htpdate) without password: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/htpdate" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/htpdate" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/htpdate</a></li>
<li>Allow "sudo service bootclockrandomization status" without a password: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/bootclockrandomization" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/bootclockrandomization" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/bootclockrandomization</a></li>
<li>Allow "sudo service timesanitycheck status" and "restart" without a password: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/timesanitycheck" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/timesanitycheck" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/timesanitycheck</a></li></ul></li>
<li>Delay console output a bit when run after login. This ensures /etc/motd is shown earlier and introduces the status notifications gracefully. Better look and feel: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/delay" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/delay" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/delay</a></li>
<li>Icon. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/timesync.ico" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/timesync.ico" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/timesync.ico</a></li></ul>
<p>Script
</p>
<ul><li>htpdate (tails_htp) itself: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/sbin/htpdate" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/sbin/htpdate" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/sbin/htpdate</a></li>
<li>Combined graphical and text user interface "timesync" main script. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync</a></li>
<li>Combined graphical and text user interface "timesync" scripts folder. <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/timesync-scripts" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/timesync-scripts" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/timesync-scripts</a> and some from <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts</a> (which are sourced becomes clear by reading the main <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timesync</a> script)</li></ul>
<h3><span class="mw-headline" id="Banned_Packages">Banned Packages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=18" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=18.html" title="Edit section: Banned Packages">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Some packages aren't suited for an anonymous operating system. Reasons are privacy issues or messing with network settings. Ensure, that those get removed, if they got installed by the virtual machine image creation tool. This shouldn't be the case because of the hand selected package selection. Just in case upstream dependencies change or custom packages get added by users who build from source code. Ensure that those packages won't get installed by accident. Since it is documented, advanced users can overwrite these recommendations if they know better.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_banned_packages" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_banned_packages" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_banned_packages</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/preferences.d/50_banned-packages" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/preferences.d/50_banned-packages" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/apt/preferences.d/50_banned-packages</a></li></ul>
<h3><span class="mw-headline" id="Stream_Isolation_Wrapper">Stream Isolation Wrapper</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=19" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=19.html" title="Edit section: Stream Isolation Wrapper">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Stream isolate different applications to prevent identity correlation through circuit sharing. To my knowledge, only the anonymizer Tor supports this feature.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>See <a data-href="/wiki/Stream_Isolation" href="../Stream_Isolation.html" title="Stream Isolation">Stream Isolation</a>.</li>
<li><a class="external text" data-href="https://trac.torproject.org/projects/tor/wiki/doc/torsocks" href="https://trac.torproject.org/projects/tor/wiki/doc/torsocks" rel="noreferrer noopener" target="_blank">uwt</a> is a wrapper arround torsocks: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwt" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwt" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwt</a></li>
<li>uwt / timeprivacy master wrapper: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper</a></li>
<li>uwt configuration folder (.d-style): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/</a></li>
<li>Application wrapper symlinks to the master wrapper (If the application is not installed, the wrapper doesn't do anything. So having one more installed than necessary, doesn't matter.): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt</a></li></ul>
<h2><span class="mw-headline" id="Extra">Extra</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=20" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=20.html" title="Edit section: Extra">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Time_Privacy">Time Privacy</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=21" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=21.html" title="Edit section: Time Privacy">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Applications such as gpg and git embed time stamps in their output. For improved privacy it may make sense to fake this data. The user should enable it oneself, otherwise it could be very surprising and may not do what the user wants. Experimental design and implementation. Disabled by default.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Disabled by default.</li>
<li>timeprivacy script: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timeprivacy" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timeprivacy" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/timeprivacy</a></li>
<li>uwt / timeprivacy master wrapper: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/uwtwrapper</a></li>
<li>Time Privacy configuration folder (.d-style): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/whonix.d/</a></li>
<li>Application wrapper symlinks to the master wrapper (If the application is not installed, the wrapper doesn't do anything. So having one more installed than necessary, doesn't matter.): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_uwt</a></li></ul>
<h3><span id="hdd_configuration_/_swap_/_Disk_uuid_/_dbus_machine-id"></span><span class="mw-headline" id="hdd_configuration_.2F_swap_.2F_Disk_uuid_.2F_dbus_machine-id">hdd configuration / swap / Disk uuid / dbus machine-id</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=22" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=22.html" title="Edit section: hdd configuration / swap / Disk uuid / dbus machine-id">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Since the virtual machine creation tool won't create a swap partition (which is actually good because it simplifies the setup) but the system could run out of memory, add a swap file. The is optional depending on the operating system and available RAM. Configure swap to be used as little as possible to improve speed.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Swap file creation. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create_swap_file" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create_swap_file" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create_swap_file</a></li>
<li>Activating swap in fstab. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab</a></li>
<li>Only swap to disk if really necessary. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/etc/sysctl.d/whonix.conf" href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/etc/sysctl.d/whonix.conf" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_gateway/etc/sysctl.d/whonix.conf</a></li>
<li>Less Important Identifies (Defined as per <a data-href="/wiki/Protocol-Leak-Protection_and_Fingerprinting-Protection" href="../Protocol-Leak-Protection_and_Fingerprinting-Protection.html" title="Protocol-Leak-Protection and Fingerprinting-Protection">Protocol-Leak-Protection and Fingerprinting-Protection</a>.)
<ul><li>Share Disk UUIDs.
<ul><li>In /etc/fstab. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/fstab</a></li>
<li>Also share uuid for swap file. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create-swap-file" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create-swap-file" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_create-swap-file</a></li></ul></li>
<li>Chang partition uuid. "<i>tune2fs /dev/mapper/loop0p1 -U 26ada0c0-1165-4098-884d-aafd2220c2c6</i>" <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/35_run-chroot-scripts-img</a></li>
<li>Change disk uuid: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/45_create-vbox-vm</a></li>
<li>Share dbus machine-id: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/var/lib/dbus/machine-id" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/var/lib/dbus/machine-id" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/var/lib/dbus/machine-id</a></li></ul></li></ul>
<h3><span class="mw-headline" id="Base_Files">Base Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=23" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=23.html" title="Edit section: Base Files">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Perhaps only required for Debian and derivatives. Whonix was asked to replace the default dpkg origin symlink.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/dpkg/origins/whonix" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/dpkg/origins/whonix" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/dpkg/origins/whonix</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_symlinks" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_symlinks" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_symlinks</a></li></ul>
<h2><span class="mw-headline" id="Usability">Usability</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=24" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=24.html" title="Edit section: Usability">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="check_mechanism">check mechanism</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=25" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=25.html" title="Edit section: check mechanism">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Recommended, not strictly required.
</p><p>Whonix-Example-Implementation:
</p><p>General Information
</p>
<ul><li><a data-href="/wiki/Whonixcheck" href="../Whonixcheck.html" title="Whonixcheck">whonixcheck</a></li>
<li>Whonixcheck essentially runs whonixcheck at least once very day.</li>
<li>Whonixcheck, although run on each boot and every hour by cron, itself is rate limited and stops running checks, if it was run less than one day ago. The user can always manually perform all whonixcheck checks.</li></ul>
<p>Start Hooks
</p>
<ul><li>The file <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck_hourly" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck_hourly" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck_hourly</a> gets run by cron.hourly <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/40_whonixcheck" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/40_whonixcheck" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/cron.hourly/40_whonixcheck</a></li>
<li>Allowing messages to tty (setting "mesg y") while an application was started in background (by cron): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_mesg.sh" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_mesg.sh" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_mesg.sh</a></li>
<li>Whonix-Gateway specific
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/40_whonixcheck.sh" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/40_whonixcheck.sh" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/40_whonixcheck.sh</a> gets run on every (automatic) login.</li></ul></li>
<li>Whonix-Workstation specific
<ul><li>Since Whonix-Workstation is graphical, it is better to use the event by the desktop environment than using profile.d for autostart. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/whonixcheck.desktop" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/whonixcheck.desktop" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/home/user/.config/autostart/whonixcheck.desktop</a></li></ul></li></ul>
<p>Supporting Files
</p>
<ul><li>Allows running apt-get update as user (non-root): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/apt-get-update" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/apt-get-update" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/apt-get-update</a></li>
<li>Allow wall (with -nobanner option) without password: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/wall" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/wall" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/wall</a></li>
<li>Version file to let the whonixcheck find out which version of Whonix is locally installed. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/version" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/version" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/version</a></li>
<li>apt-get-update (which has an sudoers exception) runs apt-get update. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-get-update" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-get-update" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-get-update</a></li>
<li>When automatically run by autostart or cron, whonixcheck adds a random delay (to prevent having a predictable network (not web) fingerprint.</li>
<li>gpg key of Whonix maintainer adrelanos to verify Whonix News. <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/gpg-pubkeys" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/gpg-pubkeys" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/gpg-pubkeys</a></li>
<li>Icon. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/whonix.ico" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/whonix.ico" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/icons/whonix.ico</a></li>
<li>xhost exception. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X0.hosts" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X0.hosts" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X0.hosts</a></li></ul>
<p>Script
</p>
<ul><li>The whonixcheck main script. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/whonixcheck</a></li>
<li>The folder with the various checks. <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/bin/whonixcheck-scripts</a></li></ul>
<h3><span class="mw-headline" id="Desktop_Environment">Desktop Environment</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=26" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=26.html" title="Edit section: Desktop Environment">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>It is useful to have a desktop preconfigured to make it as easy as possible for users who use Linux for the first time.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>shared
<ul><li>Based on KDE.</li>
<li><a data-href="/wiki/Dev/KDE" href="../Dev/KDE.html" title="Dev/KDE">Dev/KDE</a></li>
<li>Desktop usability improvements
<ul><li>kdm auto login: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/kde4/kdm/kdmrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/kde4/kdm/kdmrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/kde4/kdm/kdmrc</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_kde" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_kde" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_kde</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/dolphinrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/dolphinrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/dolphinrc</a></li>
<li>Hiding unwanted knetattach shortcut: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_knetattach" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_knetattach" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_knetattach</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/konsolerc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/konsolerc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/konsolerc</a></li></ul></li>
<li>Performance (kde-lowfat)
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdedrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdedrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdedrc</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdeglobals" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdeglobals" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kdeglobals</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/krunnerrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/krunnerrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/krunnerrc</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/ksmserverrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/ksmserverrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/ksmserverrc</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kwinrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kwinrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/kwinrc</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/nepomukserverrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/nepomukserverrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/nepomukserverrc</a></li></ul></li>
<li>Security
<ul><li>No sounds: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/knotifyrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/knotifyrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/kde/share/config/knotifyrc</a></li></ul></li>
<li>Supporting Files
<ul><li>Icons Files: <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons</a></li>
<li>Desktop Icons: <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/kde/share/applications" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/kde/share/applications" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/kde/share/applications</a></li>
<li>Setting KDEDIRS variable: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X11/Xsession.d/50whonix" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X11/Xsession.d/50whonix" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/X11/Xsession.d/50whonix</a></li></ul></li></ul></li>
<li>gateway specific
<ul><li>Changing default skin and wallpaper: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js" href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js</a></li>
<li>Start menu favorites: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/config/kickoffrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/config/kickoffrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/kde/share/config/kickoffrc</a></li>
<li>Desktop Icons: TODO</li>
<li>Creating desktop icons: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/chroot-scripts/70_desktopicons" href="https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/chroot-scripts/70_desktopicons" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_gateway/usr/local/share/whonix/chroot-scripts/70_desktopicons</a></li></ul></li>
<li>workstation specific
<ul><li>Changing default skin and wallpaper: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/apps/plasma-desktop/init/00-defaultLayout.js</a></li>
<li>Start menu favorites: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/kickoffrc" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/kickoffrc" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/kde/share/config/kickoffrc</a></li>
<li>Desktop Icons: <a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_workstation/usr/local/share/whonix/kde/share/applications" href="https://github.com/Whonix/Whonix/tree/master/whonix_workstation/usr/local/share/whonix/kde/share/applications" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_workstation/usr/local/share/whonix/kde/share/applications</a></li>
<li>Creating desktop icons: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/chroot-scripts/70_desktopicons" href="https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/chroot-scripts/70_desktopicons" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_workstation/usr/local/share/whonix/chroot-scripts/70_desktopicons</a></li></ul></li></ul>
<h3><span class="mw-headline" id="sudoers">sudoers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=27" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=27.html" title="Edit section: sudoers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. For convenience. Only recommended for Virtual Machines.
</p><p>Allow shutdown, reboot and poweroff without a password. Allow starting Tor Controller arm without password. (No effect on Workstation, since arm is only Gateway.) Allow mixmaster-update without password. (No effect on Gateway, since mixmaster is only installed on Gateway.)
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/reboot" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/reboot" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/reboot</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/arm" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/arm" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/arm</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/mixmaster-update" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/mixmaster-update" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/sudoers.d/mixmaster-update</a></li></ul>
<h3><span class="mw-headline" id="Console_Autologin">Console Autologin</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=28" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=28.html" title="Edit section: Console Autologin">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Only recommended for virtual machines.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/inittab" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/inittab" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/inittab</a></li></ul>
<h3><span class="mw-headline" id="Console_Default_Password_Hint">Console Default Password Hint</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=29" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=29.html" title="Edit section: Console Default Password Hint">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>The system will be shipped with a default password (which users are suggested to change in documentation). To prevent user frustration when not knowing the password it greatly reduced (from Whonix experience) support requests if the default password is displayed right above the password prompt.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/issue" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/issue" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/issue</a></li></ul>
<h3><span class="mw-headline" id="Console_Welcome_Message">Console Welcome Message</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=30" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=30.html" title="Edit section: Console Welcome Message">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>Contains general information about derivative, licensing, default passwords, how to open the help file.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/motd" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/motd" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/motd</a></li></ul>
<h3><span class="mw-headline" id="Deactivate_display_power_saving_in_Virtual_Machines">Deactivate display power saving in Virtual Machines</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=31" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=31.html" title="Edit section: Deactivate display power saving in Virtual Machines">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Since it is confusing and not useful and not saving any energy. (Needs to be applied on host.)
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_disable_powersaving.sh" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_disable_powersaving.sh" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/profile.d/20_disable_powersaving.sh</a></li></ul>
<h3><span class="mw-headline" id="boot_manager_configuration">boot manager configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=32" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=32.html" title="Edit section: boot manager configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. For higher boot resolution, it is required to run update-grub after changing grub configuration files.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Not yet functional.</li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/grub.d/50_whonix" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/grub.d/50_whonix" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/etc/grub.d/50_whonix</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_grub" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_grub" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_grub</a></li></ul>
<h3><span class="mw-headline" id="update_command_not_found">update command not found</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=33" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=33.html" title="Edit section: update command not found">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>Initially update the command not found database, to prevent showing "please run update-command-not-found" in case a non-existent command gets entered in console.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_update_command_not_found" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_update_command_not_found" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_update_command_not_found</a></li></ul>
<h3><span id="Secure/SSL_Command_Line_Downloader"></span><span class="mw-headline" id="Secure.2FSSL_Command_Line_Downloader">Secure/SSL Command Line Downloader</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=34" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=34.html" title="Edit section: Secure/SSL Command Line Downloader">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add a command line downloader, which enforces using https (SSL).
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>A simple curl wrapper. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/scurl" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/scurl" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/scurl</a></li>
<li>Documented under <a data-href="/wiki/Software#scurl_-_SSL_command_line_downloader" href="../Software.html" title="Software">scurl - SSL command line downloader</a></li>
<li>The user starts scurl, the wrapper will run the curl uwt wrapper (/usr/bin/curl), which stream isolates and finally calls curl.</li></ul>
<h3><span class="mw-headline" id="Slim_Down">Slim Down</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=35" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=35.html" title="Edit section: Slim Down">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. To safe space and to prevent (some) development related leaks, remove cache, temporary files, dhcp leases, package manager cache, logs, history.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/80_slimdown" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/80_slimdown" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/80_slimdown</a></li></ul>
<h3><span class="mw-headline" id="Icons">Icons</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=36" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=36.html" title="Edit section: Icons">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>Some pretty icons for the start menu and the desktop for custom applications, which are only useful in a Gateway/Workstation design.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons" href="https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/tree/master/whonix_shared/usr/local/share/whonix/icons</a></li></ul>
<h2><span class="mw-headline" id="Debugging">Debugging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=37" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=37.html" title="Edit section: Debugging">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Sanity_Checks">Sanity Checks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=38" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=38.html" title="Edit section: Sanity Checks">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Recommended, not strictly required.
</p><p>Some simple tests to check for example, if all files have been correctly copied into the image, if the package manager is fully functional, because some virtual machine creation tools build broken images. Package integrity checks.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files" href="https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/build-steps.d/32_verify_copied_files</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/10_root_check" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/10_root_check" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/10_root_check</a></li>
<li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/20_sanity_checks" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/20_sanity_checks" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/20_sanity_checks</a></li></ul>
<h3><span class="mw-headline" id="Misc">Misc</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=39" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=39.html" title="Edit section: Misc">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Chroot Script Skeleton, not strictly required, might just be useful to explain how to create chroot-scripts: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_skeleton" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_skeleton" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_skeleton</a></li>
<li>Create a list of all files inside Whonix source folder. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/list_source_files" href="https://github.com/Whonix/Whonix/blob/master/release/list_source_files" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/list_source_files</a></li>
<li>List of all files inside Whonix source code with comments: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/development/files_list" href="https://github.com/Whonix/Whonix/blob/master/development/files_list" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/development/files_list</a></li>
<li>Commented list of files inside Whonix source code that may require special treatment when creating a Whonix-Gateway/Workstation.deb (which is planned): <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/development/files_list_short" href="https://github.com/Whonix/Whonix/blob/master/development/files_list_short" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/development/files_list_short</a></li></ul>
<h3><span class="mw-headline" id="Variables">Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=40" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=40.html" title="Edit section: Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Recommended, not strictly required.
</p><p>It is useful to configure the system, not to ask any questions which require user interaction such as when you plan to run the package manager from within chroot. This is because interaction is not useful when automating things.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/variables" href="https://github.com/Whonix/Whonix/blob/master/help-steps/variables" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/variables</a></li></ul>
<h3><span class="mw-headline" id="Package_Cache">Package Cache</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=41" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=41.html" title="Edit section: Package Cache">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>If the package manager is used inside chroot, it makes sense to run it though a cache, so debugging steps can be done faster.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>apt.conf which can be used in case apt-get gets used inside chroot. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/apt.conf" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/apt.conf" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/apt.conf</a></li></ul>
<p>What is <i>/usr/local/share/whonix/apt.conf</i> good for?
</p><p>This apt.conf is only used inside chroot and currently only in effect for "<i>./debug-steps/download-source -tg</i>" and "<i>./debug-steps/download-source -tw</i>".
</p><p>It points to <i><a class="external free" data-href="http://10.152.152.11" href="http://10.152.152.11" rel="noreferrer noopener" target="_blank">http://10.152.152.11</a> :3142</i>, which is expected to be a Whonix-Workstation with apt-cacher-ng running. It is useful for running "<i>apt-get install</i>" and "<i>apt-get source</i>" inside chroot, because downloads are cached, which speeds up the build process when building several times in a row. (Debugging with only minor changes.)
</p><p>In case you don't want to use it or to use another proxy, edit <i>/home/user/Whonix/whonix_shared/usr/local/share/whonix/apt.conf</i> (comment out with a # or change proxy settings). Don't forget "<i>sudo ./build-steps.d/30_copy-into-img -tX</i>" after modifying the file.
</p>
<ul><li>Script to run apt-cacher-ng through uwt for Stream Isolation. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-cacher-ng_uwt" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-cacher-ng_uwt" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/bin/apt-cacher-ng_uwt</a></li></ul>
<h3><span class="mw-headline" id="Prevent_daemons_from_starting_inside_chroot">Prevent daemons from starting inside chroot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=42" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=42.html" title="Edit section: Prevent daemons from starting inside chroot">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional.
</p><p>Only in case you want to install something inside chroot for debugging purposes. Otherwise they can lock the chroot folder and you won't be able to unchroot.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>policy-rc.d blocks daemons from starting. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/policy-rc.d" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/policy-rc.d" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/policy-rc.d</a></li>
<li>policy-rc.d gets copied into chroot when chrooting. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/chroot-img</a></li>
<li>policy-rc.d gets deleted inside chroot when leaving chroot. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img" href="https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/unchroot-img</a></li></ul>
<h3><span class="mw-headline" id="Indicate_last_chroot_script">Indicate last chroot script</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=43" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=43.html" title="Edit section: Indicate last chroot script">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Not strictly required. A chroot script, which indicates that all went well.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/90_end" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/90_end" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/90_end</a></li></ul>
<h3><span class="mw-headline" id="Lower_priority_while_building">Lower priority while building</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=44" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=44.html" title="Edit section: Lower priority while building">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Not strictly required.
</p><p>Using ionice and renice.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/pre</a></li></ul>
<h3><span class="mw-headline" id="Enable_debugging">Enable debugging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=45" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=45.html" title="Edit section: Enable debugging">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Not strictly required.
</p><p>When using bash, set -x to show each command that gets executed.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/pre</a></li></ul>
<h3><span class="mw-headline" id="Error_handling">Error handling</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=46" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=46.html" title="Edit section: Error handling">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Not strictly required.
</p><p>It is important to ensure that there are no error while copying files into the images or while running the chroot scripts because many steps are essential. Stop and loudly complain if any unexpected error occurs.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>general trap: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" href="https://github.com/Whonix/Whonix/blob/master/help-steps/pre" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/help-steps/pre</a></li>
<li>using traps and exit 1 everywhere</li></ul>
<h3><span class="mw-headline" id="Delete_Virtual_Machine_files">Delete Virtual Machine files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=47" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=47.html" title="Edit section: Delete Virtual Machine files">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Not strictly required.
</p><p>So they can be re-created for debugging purposes.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/debug-steps/delete-vbox-vm" href="https://github.com/Whonix/Whonix/blob/master/debug-steps/delete-vbox-vm" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/debug-steps/delete-vbox-vm</a></li></ul>
<h3><span class="mw-headline" id="Interactive_Chroot">Interactive Chroot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=48" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=48.html" title="Edit section: Interactive Chroot">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Optional. Not strictly required.
</p><p>After creating the base operating system image, after copying files into it or after applying the chroot scripts, it is useful to have a command, which allows to look around inside the image without having to boot the image. Adrelanos calls this Interactive Chroot.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/debug-steps/interactive-chroot-img" href="https://github.com/Whonix/Whonix/blob/master/debug-steps/interactive-chroot-img" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/debug-steps/interactive-chroot-img</a></li></ul>
<h2><span class="mw-headline" id="Licensing">Licensing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=49" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=49.html" title="Edit section: Licensing">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Only required for builds, which will be redistributed in public.
</p><p>Make a list of GPLed software.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Added <a class="external text" data-href="http://dberkholz.com/2004/02/" href="http://dberkholz.com/2004/02/" rel="noreferrer noopener" target="_blank">damngpl</a>. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/damngpl" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/damngpl" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/damngpl</a></li>
<li>Creating a list of GPLed software. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_sources" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_sources" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/chroot-scripts/70_sources</a></li>
<li>A script to download all GPLed software, which can be run inside the virtual machine or inside chroot. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/whonix_download_sources" href="https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/whonix_download_sources" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_shared/usr/local/share/whonix/whonix_download_sources</a></li>
<li>The source code needs a License file. <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/COPYING" href="https://github.com/Whonix/Whonix/blob/master/COPYING" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/COPYING</a></li></ul>
<h1><span class="mw-headline" id="Build_Automation">Build Automation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=50" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=50.html" title="Edit section: Build Automation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Optional. Not strictly required.
</p><p>Since many steps are required to build a Gateway or Workstation, it is useful to automate build creation.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/whonix_build" href="https://github.com/Whonix/Whonix/blob/master/whonix_build" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/whonix_build</a></li>
<li><a data-href="/wiki/Dev/Build_Documentation" href="../Dev/Build_Documentation.html" title="Dev/Build Documentation">Dev/Build Documentation</a></li></ul>
<h1><span class="mw-headline" id="Release_Automation">Release Automation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=51" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=51.html" title="Edit section: Release Automation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Optional. Not strictly required.
</p><p>Since many steps are required to redistribute a Gateway or Workstation, it is useful to automate releases.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li>Release maintenance folder: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/README" href="https://github.com/Whonix/Whonix/blob/master/release/README" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/README</a></li>
<li>sourceforge.net Download Readme: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/README" href="https://github.com/Whonix/Whonix/blob/master/release/README" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/README</a></li>
<li>Whonix News File: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/whonix_news" href="https://github.com/Whonix/Whonix/blob/master/release/whonix_news" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/whonix_news</a></li>
<li>Script to automate gpg signing, verification (as sanity check) and upload sourceforge.net Download Readme: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/upload_download_readme" href="https://github.com/Whonix/Whonix/blob/master/release/upload_download_readme" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/upload_download_readme</a></li>
<li>Script to automate gpg signing, verification (as sanity check) and upload Whonix News File: <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/upload_whonix_news" href="https://github.com/Whonix/Whonix/blob/master/release/upload_whonix_news" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/upload_whonix_news</a></li>
<li>Building and uploading of Virtual Machine Images. Fully documented on <a data-href="/wiki/Dev/Redistribution" href="../Dev/Redistribution.html" title="Dev/Redistribution">Dev/Redistribution</a> and <a class="external free" data-href="https://github.com/Whonix/Whonix/blob/master/release/whonix_release" href="https://github.com/Whonix/Whonix/blob/master/release/whonix_release" rel="noreferrer noopener" target="_blank">https://github.com/Whonix/Whonix/blob/master/release/whonix_release</a>.</li></ul>
<h1><span class="mw-headline" id="Other_important_things">Other important things</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=52" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit&amp;section=52.html" title="Edit section: Other important things">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The things on this (Design-Shared) page are supposed to be added to the Gateway and the Workstation.
</p><p>To build a Gateway, also things from the <a data-href="/wiki/Dev/Design-Gateway" href="../Dev/Design-Gateway.html" title="Dev/Design-Gateway">Dev/Design-Gateway</a> page have to be added.
</p><p>To build a Workstation, also things from the <a data-href="/wiki/Dev/Design-Workstation" href="../Dev/Design-Workstation.html" title="Dev/Design-Workstation">Dev/Design-Workstation</a> page have to be added.
</p><p>Justify other design decisions, what the project doesn't and what it doesn't do. Have loads of documentation. Have a source code hacking guide and source code introduction.
</p><p>Whonix-Example-Implementation:
</p>
<ul><li><a data-href="/wiki/Dev/Design-Gateway" href="../Dev/Design-Gateway.html" title="Dev/Design-Gateway">Dev/Design-Gateway</a></li>
<li><a data-href="/wiki/Dev/Design-Workstation" href="../Dev/Design-Workstation.html" title="Dev/Design-Workstation">Dev/Design-Workstation</a></li>
<li><a data-href="/wiki/Design" href="../Design.html" title="Design">Design</a></li>
<li><a data-href="/wiki/Documentation" href="../Documentation.html" title="Documentation">Documentation</a></li>
<li><a data-href="/wiki/Dev/Developer_Portal" href="../Dev/Developer_Portal.html" title="Dev/Developer Portal">Dev/Developer Portal</a></li>
<li><a data-href="/wiki/Dev/Source_Code_Intro" href="../Dev/Source_Code_Intro.html" title="Dev/Source Code Intro">Dev/Source Code Intro</a></li></ul>
<hr/>
<div style="padding-bottom:1px; padding-top:6px; border:thin solid black; background:#EEEEEE; text-align:center;"><u>Random News:</u>
<p>Want to help create awesome, up-to-date <a data-href="/wiki/Screenshots" href="../Screenshots.html" title="Screenshots">screenshots</a> for the Whonix wiki? Help is most welcome!
</p>
</div>
<hr/><p><font size="-1"><a class="external text" data-href="../Dev/Design-Shared" href="../Dev/Design-Shared" rel="noreferrer noopener" target="_blank">https</a> | (<a data-href="/wiki/Forcing_.onion_on_Whonix.org" href="../Forcing_.onion_on_Whonix.org.html" title="Forcing .onion on Whonix.org">forcing</a>) <a class="external text" data-href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Design-Shared" href="http://dds6qkxpwdeubwucdiaord2xgbbeyds25rbsgr73tbfpqpt4a6vjwsyd.onion/wiki/Dev/Design-Shared" rel="noreferrer noopener" target="_blank">onion</a><br/>
</font></p><font size="-1"></font><p><font size="-1">Share: <a data-href="https://twitter.com/intent/tweet?url=../Dev/Design-Shared&amp;text=&amp;via=Whonix" href="https://twitter.com/intent/tweet?url=../Dev/Design-Shared&amp;text=&amp;via=Whonix">Twitter</a>
|
<a data-href="https://facebook.com/sharer.php?u=../Dev/Design-Shared" href="https://facebook.com/sharer.php?u=../Dev/Design-Shared">Facebook</a></font>
</p><p><font size="-1">This is a wiki. Want to improve this page? Help is welcome and volunteer contributions are happily considered! See <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" href="https://github.com/Whonix/Whonix/blob/master/CONTRIBUTING.md" rel="noreferrer noopener" target="_blank">Conditions for Contributions to Whonix</a>, then <a data-href="/w/index.php?title=Dev/Design-Shared&amp;action=edit" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;action=edit">Edit</a>! IP addresses are scrubbed, but editing over Tor is recommended. Edits are held for moderation.</font>
</p><p><font size="-1">Whonix is a <a class="external text" data-href="http://www.openinventionnetwork.com/licensees.php" href="http://www.openinventionnetwork.com/licensees.php" rel="noreferrer noopener" target="_blank">licensee</a> of the Open Invention Network. Unless otherwise noted, the content of this page is <a data-href="/wiki/Whonix:Copyrights" href="../Whonix:Copyrights.html" title="Whonix:Copyrights">copyrighted</a> and licensed under the same Libre Software <a class="external text" data-href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" href="https://github.com/Whonix/Whonix/blob/master/debian/copyright" rel="noreferrer noopener" target="_blank">license</a> as Whonix itself. (<a data-href="/wiki/Why_Whonix_is_Free_Software" href="../Why_Whonix_is_Free_Software.html" title="Why Whonix is Free Software">Why?</a>)</font>
</p><p><font size="-1">Whonix is provided by ENCRYPTED SUPPORT LP. See <a class="mw-redirect" data-href="/wiki/Impressum" href="../Impressum.html" title="Impressum">Imprint</a>.</font>
</p>
<!-- 
NewPP limit report
Cached time: 20181222160325
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.100 seconds
Real time usage: 0.116 seconds
Preprocessor visited node count: 267/1000000
Preprocessor generated node count: 448/1000000
Post‐expand include size: 2431/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 742/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   32.428      1 -total
 42.86%   13.898      1 Template:Header
 39.44%   12.789      1 Template:Footer
 11.89%    3.857      1 Template:Share
 10.52%    3.413      1 Template:Edit_it
  5.59%    1.813      1 Template:RandomNews
  5.39%    1.747      1 Template:Forkme
  4.68%    1.519      1 Template:Whonix_onion
  4.29%    1.390      1 Template:Design_Introduction
-->
</div></div><div class="printfooter">
Retrieved from "<a data-href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;oldid=29439" dir="ltr" href="https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;oldid=29439">https://www.whonix.org/w/index.php?title=Dev/Design-Shared&amp;oldid=29439</a>"</div>
<div class="clear_both"></div>
</div>
<div class="group"><div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a data-href="/wiki/Special:Categories" href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a data-href="/wiki/Category:Design" href="../Category:Design.html" title="Category:Design">Design</a></li></ul></div></div></div>
</div>
</div>
</div>
<footer class="row">
<div id="footer">
<div class="small-12 large-centered columns text-center" id="footer-left">
<ul id="footer-left">
<li id="footer-lastmod"> This page was last edited on 19 April 2017, at 11:02.</li>
<li id="footer-Imprint"><a data-href="/wiki/Imprint" href="../Imprint.html" title="Imprint">Imprint</a></li>
<li id="footer-Privacy_Policy"><a data-href="/wiki/Privacy_Policy" href="../Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-Disclaimer"><a class="mw-redirect" data-href="/wiki/Disclaimer" href="../Disclaimer.html" title="Disclaimer">Disclaimer</a></li>
<li id="footer-Terms_of_Service"><a class="mw-redirect" data-href="/wiki/Terms_of_Service" href="../Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-Priority_Support"><a data-href="/wiki/Priority_Support" href="../Priority_Support.html" title="Priority Support">Priority Support</a></li>
<li id="footer-Investors"><a data-href="/wiki/Investors" href="../Investors.html" title="Investors">Investors</a></li>
<li id="footer-Professional_Support"><a data-href="/wiki/Professional_Support" href="../Professional_Support.html" title="Professional Support">Professional Support</a></li>
</ul>
</div>
<div class="large-12 small-12 columns" id="footer-right-icons">
<ul id="poweredby">
</ul>
</div>
</div>
</footer>
</div>

</body>
<!-- Cached/compressed 20181222160325 -->
</html>
